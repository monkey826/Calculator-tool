/*
    *
    * Wijmo Library 5.20163.259
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the Wijmo Commercial License.
    * sales@wijmo.com
    * http://wijmo.com/products/wijmo-5/license/
    *
    */
"use strict";function _statusJsonReviver(n,t){if(wjcCore.isString(t)){if(_strEndsWith(n,'DateTime'))return new Date(t);if(n==='width'||n==='height'||_strEndsWith(n,'Margin'))return new _Unit(t)}return t}function _pageSettingsJsonReviver(n,t){return wjcCore.isString(t)&&(n==='width'||n==='height'||_strEndsWith(n,'Margin'))?new _Unit(t):t}function _strEndsWith(n,t){return n.slice(-t.length)===t}function _appendQueryString(n,t){var i,r,u;t=t||{};i=[];for(r in t)i.push(r+'='+t[r]);return i.length&&(u=n.indexOf('?')<0?'?':'&',n+=u+i.join('&')),n}function _joinUrl(){for(var n,r,f,t,u=[],i=0;i<arguments.length;i++)u[+i]=arguments[i];for(n=[],r=0,f=u.length;r<f;r++)t=u[r],t&&(typeof t!='string'?n=n.concat(_joinStringUrl(t)):n.push(_prepareStringUrl(t).join('/')));return n.join('/')}function _joinStringUrl(n){var t,i,r;if(n==null)return null;for(t=[],i=0,r=n.length;i<r;i++)t=t.concat(_prepareStringUrl(n[i]));return t}function _prepareStringUrl(n){var t=n.split('/');return t.length>0&&!t[t.length-1].length&&t.splice(t.length-1),t}function _httpRequest(n,t){var r,i;return t&&t.cache||(n=_disableCache(n)),t&&(r=(t.method||'GET').toUpperCase(),r!=='GET'&&(t.data&&(i=_objToParams(t.data),i!=null&&(t.data=i)),t.requestHeaders?t.requestHeaders['Content-Type']||(t.requestHeaders['Content-Type']='application/x-www-form-urlencoded'):t.requestHeaders={'Content-Type':'application/x-www-form-urlencoded'})),wjcCore.httpRequest(n,t)}function _objToParams(n){var i=[],t,r;n=n||{};for(t in n)if(n[t]!==null&&n[t]!==undefined)if(wjcCore.isArray(n[t]))if(n[t].length>0)for(r=0;r<n[t].length;r++)i.push(t+'='+encodeURIComponent(n[t][r]));else i.push(t+'=');else i.push(t+'='+encodeURIComponent(n[t]));return i.join('&')}function _disableCache(n){return n+(n.indexOf('?')==-1?'?':'&')+'_='+(new Date).getTime()}function _twipToPixel(n){return _Unit.convertValue(n,_UnitType.Twip,_UnitType.Dip)}function _parseReportExecutionInfo(n){return JSON.parse(n,_statusJsonReviver)}function _parseExecutionInfo(n){return JSON.parse(n,_statusJsonReviver)}function _createSvgBtn(n){var i=_toDOM(_svgStart+n+_svgEnd),t;return wjcCore.addClass(i,'wj-svg-btn'),t=document.createElement('a'),t.appendChild(i),wjcCore.addClass(t,'wj-btn'),t.tabIndex=0,t}function _setLandscape(n,t){var r,i;n.landscape!==t&&(n.landscape=t,r=n.width,n.width=n.height,n.height=r,i=n.leftMargin,t?(n.leftMargin=n.bottomMargin,n.bottomMargin=n.rightMargin,n.rightMargin=n.topMargin,n.topMargin=i):(n.leftMargin=n.topMargin,n.topMargin=n.rightMargin,n.rightMargin=n.bottomMargin,n.bottomMargin=i))}function _clonePageSettings(n){if(!n)return null;var t={};return t.height=n.height?new _Unit(n.height):null,t.width=n.width?new _Unit(n.width):null,t.bottomMargin=n.bottomMargin?new _Unit(n.bottomMargin):null,t.leftMargin=n.leftMargin?new _Unit(n.leftMargin):null,t.rightMargin=n.rightMargin?new _Unit(n.rightMargin):null,t.topMargin=n.topMargin?new _Unit(n.topMargin):null,t.landscape=n.landscape,t.paperSize=n.paperSize,t}function _enumToArray(n){var i=[];for(var t in n)t&&t.length&&t[0]!="_"&&!isNaN(parseInt(t))&&i.push({text:n[t],value:t});return i}function _removeChildren(n,t){var i,r,u;if(n&&(i=n.children,i))for(r=i.length-1;r>-1;r--)u=i[r],(t==null||t(u))&&n.removeChild(u)}function _toDOMs(n){var t,i=document.createElement("div"),r=document.createDocumentFragment();for(i.innerHTML=n;t=i.firstChild;)r.appendChild(t);return r}function _toDOM(n){return _toDOMs(n).firstChild}function _addEvent(n,t,i,r){for(var e=t.split(","),u,f=0;f<e.length;f++)u=e[f].trim(),n.addEventListener?n.addEventListener(u,i,r):n.attachEvent?n.attachEvent('on'+u,i):n['on'+u]=i}function _checkImageButton(n,t){if(t){wjcCore.addClass(n,_checkedCss);return}wjcCore.removeClass(n,_checkedCss)}function _disableImageButton(n,t){if(t){wjcCore.addClass(n,_disabledCss);return}wjcCore.removeClass(n,_disabledCss)}function _showImageButton(n,t){if(t){wjcCore.removeClass(n,_hiddenCss);return}wjcCore.addClass(n,_hiddenCss)}function _isDisabledImageButton(n){return wjcCore.hasClass(n,_disabledCss)}function _isCheckedImageButton(n){return wjcCore.hasClass(n,_checkedCss)}function _addWjHandler(n,t,i,r){var u,f;n&&(u=t[wjEventsName],u||(u=t[wjEventsName]={}),f=u[n],f||(f=u[n]=[]),f.push(i));t.addHandler(i,r)}function _removeAllWjHandlers(n,t){var i,r;n&&(i=t[wjEventsName],i)&&(r=i[n],r)&&r.forEach(function(n){return t.removeHandler(n)})}var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},wjcCore=require('wijmo/wijmo'),wjcInput=require('wijmo/wijmo.input'),wjcGrid=require('wijmo/wijmo.grid'),wjcSelf=require('wijmo/wijmo.viewer'),_DocumentSource,_DocumentService,_UnitType,_Unit,_Promise,_CompositedPromise,_PaperKind,QueryLoadingDataEventArgs,_Report,_ReportService,_ExecutionStatus,_ParameterType,CatalogItemType,_PdfDocumentSource,_PdfDocumentService,ViewMode,_HistoryManager,ViewerBase,_SideTabs,_TabPage,_Toolbar,_ViewerToolbar,_ViewerMiniToolbar,_PageSetupDialog,wjEventsName,_ViewerActionType,parametersIcon,ReportViewer,_ParametersEditor,_MultiSelectEx,PdfViewer;window.wijmo=window.wijmo||{};window.wijmo.viewer=wjcSelf;_DocumentSource=function(){function n(n){this._hasOutlines=!1;this._pageCount=0;this._supportedExportDescriptions=[];this._isLoadCompleted=!1;this._isDisposed=!1;this._errors=[];this.pageCountChanged=new wjcCore.Event;this.disposed=new wjcCore.Event;this.pageSettingsChanged=new wjcCore.Event;this.loadCompleted=new wjcCore.Event;this.queryLoadingData=new wjcCore.Event;this._service=this._createDocumentService(n);this._paginated=n.paginated}return n.prototype.onQueryLoadingData=function(n){this.queryLoadingData.raise(this,n)},n.prototype._updateIsLoadCompleted=function(n){this._isLoadCompleted!==n&&(this._isLoadCompleted=n,n&&this.onLoadCompleted())},n.prototype._updateIsDisposed=function(n){this._isDisposed!==n&&(this._isDisposed=n,this.onDisposed())},n.prototype._getIsDisposed=function(){return this._isDisposed},n.prototype._checkHasOutlines=function(n){return n.hasOutlines},n.prototype._checkIsLoadCompleted=function(n){return n.status===_ExecutionStatus.completed||n.status===_ExecutionStatus.stopped||n.status===_ExecutionStatus.loaded},n._isMobile=function(){return n._isMobileEnvironment==null&&(n._isMobileEnvironment=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))||this._isIOS()),n._isMobileEnvironment},n._isIOS=function(){return n._isIOSEnvironment==null&&(n._isIOSEnvironment=!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i))),n._isIOSEnvironment},Object.defineProperty(n.prototype,"executionDateTime",{get:function(){return this._executionDateTime},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"expiredDateTime",{get:function(){return this._expiredDateTime},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"errors",{get:function(){return this._errors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLoadCompleted",{get:function(){return this._isLoadCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this._getIsDisposed()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pageSettings",{get:function(){return this._pageSettings},enumerable:!0,configurable:!0}),n.prototype.onPageSettingsChanged=function(n){this.pageSettingsChanged.raise(this,n||new wjcCore.EventArgs)},n.prototype.onLoadCompleted=function(n){this.loadCompleted.raise(this,n||new wjcCore.EventArgs)},n.prototype.onDisposed=function(n){this.disposed.raise(this,n||new wjcCore.EventArgs)},n.prototype.setPageSettings=function(n){var t=this;return this._innerService.setPageSettings(n).then(function(n){return t._updatePageSettings(n)})},n.prototype._updatePageSettings=function(n){this._pageSettings=n;this.onPageSettingsChanged()},Object.defineProperty(n.prototype,"_innerService",{get:function(){return this._service},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paginated",{get:function(){return this.pageSettings?this.pageSettings.paginated:this._paginated},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasOutlines",{get:function(){return this._hasOutlines},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pageCount",{get:function(){return this._pageCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"initialPosition",{get:function(){return this._initialPosition},set:function(n){this._initialPosition=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"service",{get:function(){return this._service},enumerable:!0,configurable:!0}),n.prototype.getSupportedExportDescriptions=function(){return this._innerService.getSupportedExportDescriptions()},n.prototype.getBookmark=function(n){return this._innerService.getBookmark(n)},n.prototype.executeCustomAction=function(n){return this._innerService.executeCustomAction(n)},n.prototype.getOutlines=function(){return this._innerService.getOutlines()},n.prototype.getFeatures=function(){var n=this;return this._innerService.getFeatures().then(function(t){n._features=t})},n.prototype.dispose=function(){var n=this;return this._innerService.dispose().then(function(){return n._updateIsDisposed(!0)})},n.prototype.load=function(){var t=this,i={},n;this._paginated!=null&&(i["pageSettings.paginated"]=this.paginated);n=new QueryLoadingDataEventArgs(i);this.onQueryLoadingData(n);return this._innerService.load(n.data).then(function(n){t._updateExecutionInfo(n);t._updateIsLoadCompleted(!0)})},n.prototype._updateExecutionInfo=function(n){n!=null&&(this._executionDateTime=this._getExecutionDateTime(n),this._expiredDateTime=this._getExpiredDateTime(n),this._updatePageSettings(n.pageSettings),this._features=n.features,this._updateDocumentStatus(n.status))},n.prototype._updateDocumentStatus=function(n){n&&(this._errors=n.errorList,this._initialPosition=n.initialPosition,this._updatePageCount(this._getPageCount(n)),this._expiredDateTime=this._getExpiredDateTime(n),this._hasOutlines=this._checkHasOutlines(n),this._updateIsLoadCompleted(this._checkIsLoadCompleted(n)))},n.prototype._getExecutionDateTime=function(n){return n.loadedDateTime},n.prototype._getExpiredDateTime=function(n){return n.expiredDateTime},n.prototype._getPageCount=function(n){return n.pageCount},n.prototype._updatePageCount=function(n){this._pageCount!==n&&(this._pageCount=n,this.onPageCountChanged())},n.prototype.getStatus=function(){var n=this;return this._innerService.getStatus().then(function(t){n._updateDocumentStatus(t)})},n.prototype._createDocumentService=function(){throw n._abstractMethodException;},n.prototype.onPageCountChanged=function(n){this.pageCountChanged.raise(this,n||new wjcCore.EventArgs)},n.prototype.print=function(){var i,t;if(n._isMobile()){i=this.getRenderToFilterUrl({format:'pdf'});window.open(i);return}t=new wjcCore.PrintDocument({title:'Document'});this.renderToFilter({format:'html'}).then(function(n){t.append(n.responseText);t.print()})},n.prototype.renderToFilter=function(n){return this._innerService.renderToFilter(n)},n.prototype.getRenderToFilterUrl=function(n){return this._innerService.getRenderToFilterUrl(n)},n.prototype.search=function(n,t,i){return this._innerService.search(n,t,i)},n._abstractMethodException='It is an abstract method, please implement it.',n._isMobileEnvironment=null,n._isIOSEnvironment=null,n}();exports._DocumentSource=_DocumentSource;exports._statusJsonReviver=_statusJsonReviver;_DocumentService=function(){function n(n){this._url='';this._url=n.serviceUrl||'';this._documentPath=n.filePath}return Object.defineProperty(n.prototype,"serviceUrl",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filePath",{get:function(){return this._documentPath},enumerable:!0,configurable:!0}),n.prototype.getStatus=function(){throw _DocumentSource._abstractMethodException;},n.prototype.setPageSettings=function(){throw _DocumentSource._abstractMethodException;},n.prototype.getBookmark=function(){throw _DocumentSource._abstractMethodException;},n.prototype.executeCustomAction=function(){throw _DocumentSource._abstractMethodException;},n.prototype.load=function(){throw _DocumentSource._abstractMethodException;},n.prototype.dispose=function(){throw _DocumentSource._abstractMethodException;},n.prototype.getOutlines=function(){throw _DocumentSource._abstractMethodException;},n.prototype.renderToFilter=function(){throw _DocumentSource._abstractMethodException;},n.prototype.search=function(){throw _DocumentSource._abstractMethodException;},n.prototype.getRenderToFilterUrl=function(){throw _DocumentSource._abstractMethodException;},n.prototype.getSupportedExportDescriptions=function(){throw _DocumentSource._abstractMethodException;},n.prototype.getFeatures=function(){throw _DocumentSource._abstractMethodException;},n}();exports._DocumentService=_DocumentService;exports._pageSettingsJsonReviver=_pageSettingsJsonReviver;exports._strEndsWith=_strEndsWith;exports._appendQueryString=_appendQueryString;exports._joinUrl=_joinUrl;exports._joinStringUrl=_joinStringUrl;exports._prepareStringUrl=_prepareStringUrl;exports._httpRequest=_httpRequest;exports._objToParams=_objToParams;exports._disableCache=_disableCache;exports._twipToPixel=_twipToPixel,function(n){n[n.Document=0]="Document";n[n.Inch=1]="Inch";n[n.Mm=2]="Mm";n[n.Pica=3]="Pica";n[n.Point=4]="Point";n[n.Twip=5]="Twip";n[n.InHs=6]="InHs";n[n.Display=7]="Display";n[n.Cm=8]="Cm";n[n.Dip=9]="Dip"}(exports._UnitType||(exports._UnitType={}));_UnitType=exports._UnitType;_Unit=function(){function n(t,i){var u,r;i===void 0&&(i=_UnitType.Dip);n._initUnitTypeDic();wjcCore.isObject(t)?(u=t,t=u.value,i=u.units):wjcCore.isString(t)&&(r=parseFloat(t),isNaN(r)||(i=n._unitTypeDic[t.substr(r.toString().length)],t=r));this._value=t;this._units=i;this._valueInPixel=n.convertValue(t,i,_UnitType.Dip)}return n._initUnitTypeDic=function(){if(!n._unitTypeDic){n._unitTypeDic={};for(var t in n._unitTypes)n._unitTypeDic[n._unitTypeDic[t]=n._unitTypes[t]]=t}},Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"units",{get:function(){return this._units},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueInPixel",{get:function(){return this._valueInPixel},enumerable:!0,configurable:!0}),n.prototype.toString=function(){return n.toString(this)},n.toString=function(t){return t.value+n._unitTypeDic[t.units]},n.convertValue=function(t,i,r){if(i===r)return t;var u;switch(i){case _UnitType.Document:u=t/n._DocumentUnitsPerInch;break;case _UnitType.Inch:u=t;break;case _UnitType.Mm:u=t/n._MmPerInch;break;case _UnitType.Pica:u=t/n._PicaPerInch;break;case _UnitType.Point:u=t/n._PointsPerInch;break;case _UnitType.Twip:u=t/n._TwipsPerInch;break;case _UnitType.InHs:u=t/100;break;case _UnitType.Display:u=t/n._DisplayPerInch;break;case _UnitType.Cm:u=t/n._CmPerInch;break;case _UnitType.Dip:u=t/n._DipPerInch;break;default:throw'Invalid from _UnitType: '+i;}switch(r){case _UnitType.Document:return u*n._DocumentUnitsPerInch;case _UnitType.Inch:return u;case _UnitType.Mm:return u*n._MmPerInch;case _UnitType.Pica:return u*n._PicaPerInch;case _UnitType.Point:return u*n._PointsPerInch;case _UnitType.Twip:return u*n._TwipsPerInch;case _UnitType.InHs:return u*100;case _UnitType.Display:return u*n._DisplayPerInch;case _UnitType.Cm:return u*n._CmPerInch;case _UnitType.Dip:return u*n._DipPerInch;default:throw'Invalid to _UnitType: '+r;}},n._MmPerInch=25.4,n._DocumentUnitsPerInch=300,n._PointsPerInch=72,n._TwipsPerInch=1440,n._PicaPerInch=6,n._CmPerInch=n._MmPerInch/10,n._DisplayPerInch=75,n._DipPerInch=96,n._unitTypes={doc:_UnitType.Document,in:_UnitType.Inch,mm:_UnitType.Mm,pc:_UnitType.Pica,pt:_UnitType.Point,tw:_UnitType.Twip,inhs:_UnitType.InHs,dsp:_UnitType.Display,cm:_UnitType.Cm,dip:_UnitType.Dip,px:_UnitType.Dip},n}();exports._Unit=_Unit;_Promise=function(){function n(){this._callbacks=[]}return n.prototype.then=function(n,t){return this._callbacks.push({onFulfilled:n,onRejected:t}),this},n.prototype.catch=function(n){return this.then(null,n)},n.prototype.resolve=function(n){var t=this;setTimeout(function(){try{t.onFulfilled(n)}catch(i){t.onRejected(i)}},0)},n.prototype.reject=function(n){var t=this;setTimeout(function(){t.onRejected(n)},0)},n.prototype.onFulfilled=function(n){for(var t,i;t=this._callbacks.shift();)t.onFulfilled&&(i=t.onFulfilled(n),i!==undefined&&(n=i))},n.prototype.onRejected=function(n){for(var t,i;t=this._callbacks.shift();)if(t.onRejected){i=t.onRejected(n);this.onFulfilled(i);return}throw n;},n}();exports._Promise=_Promise;_CompositedPromise=function(n){function t(t){n.call(this);this._promises=t;this._init()}return __extends(t,n),t.prototype._init=function(){var t=this;if(!this._promises||!this._promises.length){this.reject('No promises in current composited promise.');return}var r=this._promises.length,u=0,i=[],n=!1;this._promises.some(function(f){return f.then(function(f){n||(i.push(f),++u>=r&&t.resolve(i))}).catch(function(i){n=!0;t.reject(i)}),n})},t}(_Promise);exports._CompositedPromise=_CompositedPromise,function(n){n[n.Custom=0]="Custom";n[n.Letter=1]="Letter";n[n.LetterSmall=2]="LetterSmall";n[n.Tabloid=3]="Tabloid";n[n.Ledger=4]="Ledger";n[n.Legal=5]="Legal";n[n.Statement=6]="Statement";n[n.Executive=7]="Executive";n[n.A3=8]="A3";n[n.A4=9]="A4";n[n.A4Small=10]="A4Small";n[n.A5=11]="A5";n[n.B4=12]="B4";n[n.B5=13]="B5";n[n.Folio=14]="Folio";n[n.Quarto=15]="Quarto";n[n.Standard10x14=16]="Standard10x14";n[n.Standard11x17=17]="Standard11x17";n[n.Note=18]="Note";n[n.Number9Envelope=19]="Number9Envelope";n[n.Number10Envelope=20]="Number10Envelope";n[n.Number11Envelope=21]="Number11Envelope";n[n.Number12Envelope=22]="Number12Envelope";n[n.Number14Envelope=23]="Number14Envelope";n[n.CSheet=24]="CSheet";n[n.DSheet=25]="DSheet";n[n.ESheet=26]="ESheet";n[n.DLEnvelope=27]="DLEnvelope";n[n.C5Envelope=28]="C5Envelope";n[n.C3Envelope=29]="C3Envelope";n[n.C4Envelope=30]="C4Envelope";n[n.C6Envelope=31]="C6Envelope";n[n.C65Envelope=32]="C65Envelope";n[n.B4Envelope=33]="B4Envelope";n[n.B5Envelope=34]="B5Envelope";n[n.B6Envelope=35]="B6Envelope";n[n.ItalyEnvelope=36]="ItalyEnvelope";n[n.MonarchEnvelope=37]="MonarchEnvelope";n[n.PersonalEnvelope=38]="PersonalEnvelope";n[n.USStandardFanfold=39]="USStandardFanfold";n[n.GermanStandardFanfold=40]="GermanStandardFanfold";n[n.GermanLegalFanfold=41]="GermanLegalFanfold";n[n.IsoB4=42]="IsoB4";n[n.JapanesePostcard=43]="JapanesePostcard";n[n.Standard9x11=44]="Standard9x11";n[n.Standard10x11=45]="Standard10x11";n[n.Standard15x11=46]="Standard15x11";n[n.InviteEnvelope=47]="InviteEnvelope";n[n.LetterExtra=50]="LetterExtra";n[n.LegalExtra=51]="LegalExtra";n[n.TabloidExtra=52]="TabloidExtra";n[n.A4Extra=53]="A4Extra";n[n.LetterTransverse=54]="LetterTransverse";n[n.A4Transverse=55]="A4Transverse";n[n.LetterExtraTransverse=56]="LetterExtraTransverse";n[n.APlus=57]="APlus";n[n.BPlus=58]="BPlus";n[n.LetterPlus=59]="LetterPlus";n[n.A4Plus=60]="A4Plus";n[n.A5Transverse=61]="A5Transverse";n[n.B5Transverse=62]="B5Transverse";n[n.A3Extra=63]="A3Extra";n[n.A5Extra=64]="A5Extra";n[n.B5Extra=65]="B5Extra";n[n.A2=66]="A2";n[n.A3Transverse=67]="A3Transverse";n[n.A3ExtraTransverse=68]="A3ExtraTransverse";n[n.JapaneseDoublePostcard=69]="JapaneseDoublePostcard";n[n.A6=70]="A6";n[n.JapaneseEnvelopeKakuNumber2=71]="JapaneseEnvelopeKakuNumber2";n[n.JapaneseEnvelopeKakuNumber3=72]="JapaneseEnvelopeKakuNumber3";n[n.JapaneseEnvelopeChouNumber3=73]="JapaneseEnvelopeChouNumber3";n[n.JapaneseEnvelopeChouNumber4=74]="JapaneseEnvelopeChouNumber4";n[n.LetterRotated=75]="LetterRotated";n[n.A3Rotated=76]="A3Rotated";n[n.A4Rotated=77]="A4Rotated";n[n.A5Rotated=78]="A5Rotated";n[n.B4JisRotated=79]="B4JisRotated";n[n.B5JisRotated=80]="B5JisRotated";n[n.JapanesePostcardRotated=81]="JapanesePostcardRotated";n[n.JapaneseDoublePostcardRotated=82]="JapaneseDoublePostcardRotated";n[n.A6Rotated=83]="A6Rotated";n[n.JapaneseEnvelopeKakuNumber2Rotated=84]="JapaneseEnvelopeKakuNumber2Rotated";n[n.JapaneseEnvelopeKakuNumber3Rotated=85]="JapaneseEnvelopeKakuNumber3Rotated";n[n.JapaneseEnvelopeChouNumber3Rotated=86]="JapaneseEnvelopeChouNumber3Rotated";n[n.JapaneseEnvelopeChouNumber4Rotated=87]="JapaneseEnvelopeChouNumber4Rotated";n[n.B6Jis=88]="B6Jis";n[n.B6JisRotated=89]="B6JisRotated";n[n.Standard12x11=90]="Standard12x11";n[n.JapaneseEnvelopeYouNumber4=91]="JapaneseEnvelopeYouNumber4";n[n.JapaneseEnvelopeYouNumber4Rotated=92]="JapaneseEnvelopeYouNumber4Rotated";n[n.Prc16K=93]="Prc16K";n[n.Prc32K=94]="Prc32K";n[n.Prc32KBig=95]="Prc32KBig";n[n.PrcEnvelopeNumber1=96]="PrcEnvelopeNumber1";n[n.PrcEnvelopeNumber2=97]="PrcEnvelopeNumber2";n[n.PrcEnvelopeNumber3=98]="PrcEnvelopeNumber3";n[n.PrcEnvelopeNumber4=99]="PrcEnvelopeNumber4";n[n.PrcEnvelopeNumber5=100]="PrcEnvelopeNumber5";n[n.PrcEnvelopeNumber6=101]="PrcEnvelopeNumber6";n[n.PrcEnvelopeNumber7=102]="PrcEnvelopeNumber7";n[n.PrcEnvelopeNumber8=103]="PrcEnvelopeNumber8";n[n.PrcEnvelopeNumber9=104]="PrcEnvelopeNumber9";n[n.PrcEnvelopeNumber10=105]="PrcEnvelopeNumber10";n[n.Prc16KRotated=106]="Prc16KRotated";n[n.Prc32KRotated=107]="Prc32KRotated";n[n.Prc32KBigRotated=108]="Prc32KBigRotated";n[n.PrcEnvelopeNumber1Rotated=109]="PrcEnvelopeNumber1Rotated";n[n.PrcEnvelopeNumber2Rotated=110]="PrcEnvelopeNumber2Rotated";n[n.PrcEnvelopeNumber3Rotated=111]="PrcEnvelopeNumber3Rotated";n[n.PrcEnvelopeNumber4Rotated=112]="PrcEnvelopeNumber4Rotated";n[n.PrcEnvelopeNumber5Rotated=113]="PrcEnvelopeNumber5Rotated";n[n.PrcEnvelopeNumber6Rotated=114]="PrcEnvelopeNumber6Rotated";n[n.PrcEnvelopeNumber7Rotated=115]="PrcEnvelopeNumber7Rotated";n[n.PrcEnvelopeNumber8Rotated=116]="PrcEnvelopeNumber8Rotated";n[n.PrcEnvelopeNumber9Rotated=117]="PrcEnvelopeNumber9Rotated";n[n.PrcEnvelopeNumber10Rotated=118]="PrcEnvelopeNumber10Rotated"}(exports._PaperKind||(exports._PaperKind={}));_PaperKind=exports._PaperKind;QueryLoadingDataEventArgs=function(n){function t(t){n.call(this);this._data=t||{}}return __extends(t,n),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t}(wjcCore.EventArgs);exports.QueryLoadingDataEventArgs=QueryLoadingDataEventArgs;_Report=function(n){function t(t){n.call(this,t);this._hasParameters=!1;this._status=_ExecutionStatus.notFound;this.statusChanged=new wjcCore.Event}return __extends(t,n),t.getReportNames=function(n,t){return _ReportService.getReportNames(n,t)},t.getReports=function(n,t,i){return wjcCore.isBoolean(i)&&(i={recursive:i}),_ReportService.getReports(n,t,i)},Object.defineProperty(t.prototype,"reportName",{get:function(){return this._innerService?this._innerService.reportName:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasParameters",{get:function(){return this._hasParameters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),t.prototype.load=function(){return n.prototype.load.call(this)},t.prototype._updateStatus=function(n){this._status!==n&&(this._status=n,this.onStatusChanged())},t.prototype.cancel=function(){var n=this;return this._innerService.cancel().then(function(t){return n._updateDocumentStatus(t)})},t.prototype.onStatusChanged=function(n){this.statusChanged.raise(this,n||new wjcCore.EventArgs)},t.prototype.dispose=function(){return n.prototype.dispose.call(this)},t.prototype.setParameters=function(n){var t=this;return this._innerService.setParameters(n).then(function(n){return void(t._parameters=n)})},t.prototype.getParameters=function(){var t=this,n;return this._parameters&&this._parameters.length?(n=new _Promise,n.resolve(this._parameters),n):this._innerService.getParameters().then(function(n){return void(t._parameters=n)})},t.prototype._getIsDisposed=function(){return n.prototype._getIsDisposed.call(this)||this._innerService.isCleared},t.prototype._updateExecutionInfo=function(t){t==null||this.isDisposed||(this._hasParameters=!!t.hasParameters,n.prototype._updateExecutionInfo.call(this,t))},t.prototype._updateDocumentStatus=function(t){this._updateStatus(t.status);n.prototype._updateDocumentStatus.call(this,t)},t.prototype._checkIsLoadCompleted=function(n){return n.status===_ExecutionStatus.completed||n.status===_ExecutionStatus.stopped},t.prototype._createDocumentService=function(n){return new _ReportService(n)},Object.defineProperty(t.prototype,"_innerService",{get:function(){return this.service},enumerable:!0,configurable:!0}),t.prototype.render=function(){var n=this;return this._innerService.render().then(function(t){return n._updateDocumentStatus(t)})},t.prototype.executeCustomAction=function(n){var t=this;return this._innerService.executeCustomAction(n).then(function(n){return t._updateDocumentStatus(n)})},t}(_DocumentSource);exports._Report=_Report;_ReportService=function(n){function t(t){n.call(this,t);this._reportName=t.reportName}return __extends(t,n),Object.defineProperty(t.prototype,"isCleared",{get:function(){return!this._instanceId&&this._status==_ExecutionStatus.cleared},enumerable:!0,configurable:!0}),t.getReportNames=function(n,i){return t.getReports(n,i).then(function(n){if(!n)return null;var t=[];return n.items.forEach(function(n){n.type===CatalogItemType.Report&&t.push(n.name)}),t})},t.getReports=function(n,t,i){var r=new _Promise,u=_joinUrl(n,t);return _httpRequest(u,{data:i,success:function(n){r.resolve(JSON.parse(n.responseText))},error:function(n){return r.reject(n)}}),r},Object.defineProperty(t.prototype,"reportName",{get:function(){return this._reportName},enumerable:!0,configurable:!0}),t.prototype.getBookmark=function(n){var i=new _Promise;return this._checkReportInstanceController(i)?(_httpRequest(this._getReportInstancesUrl(t._bookmarkAction,n),{success:function(n){i.resolve(JSON.parse(n.responseText))}}),i):i},t.prototype.executeCustomAction=function(n){var i={};return i[t._customActionParam]=n,this.render(i)},t.prototype.getStatus=function(){var n=new _Promise;return _httpRequest(this._statusLocation,{success:function(t){n.resolve(JSON.parse(t.responseText,_statusJsonReviver))}}),n},t.prototype.getDocumentStatus=function(){return this._getReportCache()},t.prototype._getReportCache=function(){var n=new _Promise;return this._checkReportInstanceController(n)?(_httpRequest(this._getReportInstancesUrl(),{success:function(t){n.resolve(_parseReportExecutionInfo(t.responseText))}}),n):n},t.prototype.getParameters=function(){var n=new _Promise;return this._checkReportInstanceController(n)?(_httpRequest(this._getReportInstancesUrl(t._parametersAction),{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},t.prototype._getUrlMainPart=function(){return _joinUrl(this.serviceUrl,this.filePath,this.reportName)},t.prototype._getReportUrl=function(){for(var i=[],n=0;n<arguments.length;n++)i[+n]=arguments[n];return _joinUrl(this._getUrlMainPart(),t._reportCommand,i)},t.prototype._getReportInstancesUrl=function(){for(var i=[],n=0;n<arguments.length;n++)i[+n]=arguments[n];return _joinUrl(this._getUrlMainPart(),t._instancesCommand,this._instanceId,i)},t.prototype._checkReportController=function(n){if(this.serviceUrl!=null&&this.filePath){var i=this.filePath.slice(-5).toLowerCase()==='.flxr'||this.filePath.slice(-4).toLowerCase()==='.xml';if(!i||this.reportName)return!0}return n&&n.reject(t._invalidReportControllerError),!1},t.prototype._checkReportInstanceController=function(n){return this._checkReportController(n)&&this._instanceId?!0:(n&&n.reject(t._invalidReportCacheControllerError),!1)},t.prototype._getError=function(n){var t=n.responseText;try{t=JSON.parse(t)}finally{return t}},t.prototype.render=function(n){var r=this,i=new _Promise;return this._checkReportInstanceController(i)?(_httpRequest(this._getReportInstancesUrl(t._renderAction),{method:'POST',data:n,success:function(n){n.status===202?i.resolve({status:_ExecutionStatus.rendering}):i.resolve(_parseReportExecutionInfo(n.responseText))},error:function(n){i.reject(r._getError(n))}}),i.then(function(n){r._status=n.status})):i},t.prototype.load=function(n){var t=this,i=new _Promise;return this._checkReportController(i)?(_httpRequest(this._getReportInstancesUrl(),{method:'POST',data:n,success:function(n){i.resolve(_parseReportExecutionInfo(n.responseText))},error:function(n){i.reject(t._getError(n))}}),i.then(function(n){t._instanceId=n.id;t._status=_ExecutionStatus.loaded;t._outlinesLocation=n.outlinesLocation;t._statusLocation=n.statusLocation;t._pageSettingsLocation=n.pageSettingsLocation;t._featuresLocation=n.featuresLocation;t._parametersLocation=n.parametersLocation})):i},t.prototype.cancel=function(){var i=this,n=new _Promise;return this._checkReportInstanceController(n)?this._status!==_ExecutionStatus.rendering?(n.reject('Cannot execute cancel when the report is not rendering.'),n):(_httpRequest(this._getReportInstancesUrl(t._cancelAction),{method:'POST',success:function(t){n.resolve(_parseReportExecutionInfo(t.responseText))}}),n.then(function(n){return void(i._status=n.status)}),n):n},t.prototype.dispose=function(){var t=this,n=new _Promise;return this._checkReportInstanceController()?(_httpRequest(this._getReportInstancesUrl(),{method:'DELETE',success:function(){t._status=_ExecutionStatus.cleared;t._instanceId='';n.resolve()}}),n):n},t.prototype.getOutlines=function(){var n=new _Promise;return this._checkReportInstanceController(n)?(_httpRequest(this._getReportInstancesUrl(t._outlinesAction),{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},t.prototype.renderToFilter=function(n){var i=this,t=new _Promise;return this._checkReportInstanceController(t)?(_httpRequest(this.getRenderToFilterUrl(n),{cache:!0,success:function(n){t.resolve(n)},error:function(n){t.reject(i._getError(n))}}),t):t},t.prototype.getRenderToFilterUrl=function(n){if(!this._checkReportInstanceController())return null;var i=this._getReportInstancesUrl(t._exportAction);return i=_disableCache(i),_appendQueryString(i,n)},t.prototype.search=function(n,i,r){var u=new _Promise;return this._checkReportInstanceController(u)?(_httpRequest(this._getReportInstancesUrl(t._searchAction),{success:function(n){u.resolve(JSON.parse(n.responseText))},data:{text:n,matchCase:!!i,wholeWord:!!r}}),u):u},t.prototype.setPageSettings=function(n){var u=this,i=new _Promise,r;return this._checkReportInstanceController(i)?(r=this._getReportInstancesUrl(t._pageSettingsAction),_httpRequest(r,{method:'PUT',data:n,success:function(n){i.resolve(JSON.parse(n.responseText,_pageSettingsJsonReviver))},error:function(n){i.reject(u._getError(n))}}),i):i},t.prototype.setParameters=function(n){var u=this,i=new _Promise,r;return this._checkReportInstanceController(i)?(r=this._getReportInstancesUrl(t._parametersAction),_httpRequest(r,{method:'PATCH',data:n,success:function(n){i.resolve(JSON.parse(n.responseText))},error:function(n){i.reject(u._getError(n))}}),i):i},t.prototype.getSupportedExportDescriptions=function(){var n=new _Promise;return this._checkReportInstanceController(n)?(_httpRequest(this._getReportInstancesUrl(t._supportedFormatsAction),{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},t.prototype.getFeatures=function(){var n=new _Promise;return this._checkReportInstanceController(n)?(_httpRequest(this._featuresLocation,{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},t._reportCommand='$report',t._instancesCommand='$instances',t._customActionParam='actionString',t._renderAction='render',t._searchAction='search',t._cancelAction='stop',t._outlinesAction='outlines',t._exportAction='export',t._parametersAction='parameters',t._bookmarkAction='bookmarks',t._pageSettingsAction='pagesettings',t._supportedFormatsAction='supportedformats',t._invalidReportControllerError='Cannot call the service without service url, document path or report name.',t._invalidReportCacheControllerError='Cannot call the service when service url is not set or the report is not loaded.',t}(_DocumentService);exports._ReportService=_ReportService;exports._parseReportExecutionInfo=_parseReportExecutionInfo;_ExecutionStatus=function(){function n(){}return n.loaded='Loaded',n.rendering='Rendering',n.completed='Completed',n.stopped='Stopped',n.cleared='Cleared',n.notFound='NotFound',n}();exports._ExecutionStatus=_ExecutionStatus,function(n){n[n.Boolean=0]="Boolean";n[n.DateTime=1]="DateTime";n[n.Time=2]="Time";n[n.Date=3]="Date";n[n.Integer=4]="Integer";n[n.Float=5]="Float";n[n.String=6]="String"}(exports._ParameterType||(exports._ParameterType={}));_ParameterType=exports._ParameterType,function(n){n[n.Folder=0]="Folder";n[n.File=1]="File";n[n.Report=2]="Report"}(exports.CatalogItemType||(exports.CatalogItemType={}));CatalogItemType=exports.CatalogItemType;_PdfDocumentSource=function(n){function t(t){n.call(this,t);this._status=_ExecutionStatus.notFound}return __extends(t,n),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_innerService",{get:function(){return this.service},enumerable:!0,configurable:!0}),t.prototype._createDocumentService=function(n){return new _PdfDocumentService(n)},t.prototype.load=function(){return n.prototype.load.call(this)},t.prototype._updateStatus=function(n){this._status!==n&&(this._status=n)},t.prototype.getStatus=function(){var t=this,n=new QueryLoadingDataEventArgs;this.onQueryLoadingData(n);return this._innerService.getStatus(n.data).then(function(n){return t._updateDocumentStatus(n)})},t.prototype.renderToFilter=function(n){var t=new QueryLoadingDataEventArgs;this.onQueryLoadingData(t);return this._innerService.renderToFilter(n,t.data)},t.prototype._updateDocumentStatus=function(t){t!=null&&(this._updateStatus(t.status),n.prototype._updateDocumentStatus.call(this,t))},t}(_DocumentSource);exports._PdfDocumentSource=_PdfDocumentSource;_PdfDocumentService=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype._getPdfUrl=function(){for(var i=[],n=0;n<arguments.length;n++)i[+n]=arguments[n];return _joinUrl(this.serviceUrl,this.filePath,t._pdfCommand,i)},t.prototype._getPdfStatus=function(n){var i=this,t=new _Promise;return this._checkPdfController(t)?(_httpRequest(this._getPdfUrl(),{data:n,success:function(n){t.resolve(_parseExecutionInfo(n.responseText))}}),t.then(function(n){i._status=_ExecutionStatus.loaded;i._statusLocation=n.statusLocation;i._featuresLocation=n.featuresLocation})):t},t.prototype._checkPdfController=function(n){return this.serviceUrl!=null&&this.filePath?!0:(n&&n.reject(t._invalidPdfControllerError),!1)},t.prototype.dispose=function(){var n=new _Promise;return n.resolve(),n},t.prototype.load=function(n){return this._getPdfStatus(n)},t.prototype.getStatus=function(n){var t=new _Promise;return _httpRequest(this._statusLocation,{data:n,success:function(n){t.resolve(JSON.parse(n.responseText))}}),t},t.prototype.renderToFilter=function(n,t){var i=new _Promise;return this._checkPdfController(i)?(_httpRequest(this.getRenderToFilterUrl(n),{data:t,cache:!0,success:function(n){i.resolve(n)}}),i):i},t.prototype.getRenderToFilterUrl=function(n){if(!this._checkPdfController())return null;var i=this._getPdfUrl(t._exportAction);return i=_disableCache(i),_appendQueryString(i,n)},t.prototype.getSupportedExportDescriptions=function(){var n=new _Promise;return this._checkPdfController(n)?(_httpRequest(this._getPdfUrl(t._supportedFormatsAction),{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},t.prototype.getFeatures=function(){var n=new _Promise;return this._checkPdfController(n)?(_httpRequest(this._featuresLocation,{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},t._pdfCommand='$pdf',t._exportAction='export',t._supportedFormatsAction='supportedformats',t._invalidPdfControllerError='Cannot call the service when service url is not set or the pdf is not loaded.',t}(_DocumentService);exports._PdfDocumentService=_PdfDocumentService;exports._parseExecutionInfo=_parseExecutionInfo;wjcCore.culture.Viewer=window.wijmo.culture.Viewer||{cancel:'Cancel',ok:'OK',bottom:'Bottom:',top:'Top:',right:'Right:',left:'Left:',margins:'Margins(inches)',orientation:'Orientation:',paperKind:'Paper Kind:',pageSetup:'Page Setup',landscape:'Landscape',portrait:'Portrait',pageNumber:'Page Number',zoomFactor:'Zoom Factor',paginated:'Print Layout',print:'Print',search:'Search',matchCase:'Match case',wholeWord:'Match whole word only',searchResults:'Search Results',previousPage:'Previous Page',nextPage:'Next Page',firstPage:'First Page',lastPage:'Last Page',backwardHistory:'Backward',forwardHistory:'Forward',pageCount:'Page Count',selectTool:'Select Tool',moveTool:'Move Tool',continuousMode:'Continuous Page View',singleMode:'Single Page View',wholePage:'Fit Whole Page',pageWidth:'Fit Page Width',zoomOut:'Zoom Out',zoomIn:'Zoom In',exports:'Export',fullScreen:'Full Screen',exitFullScreen:'Exit Full Screen',thumbnails:'Page Thumbnails',outlines:'Document Map',loading:'Loading...',pdfExportName:'Adobe PDF',docxExportName:'Open XML Word',xlsxExportName:'Open XML Excel',docExportName:'Microsoft Word',xlsExportName:'Microsoft Excel',mhtmlExportName:'Web archive (MHTML)',htmlExportName:'HTML document',rtfExportName:'RTF document',metafileExportName:'Compressed metafiles',csvExportName:'CSV',tiffExportName:'Tiff images',bmpExportName:'BMP images',emfExportName:'Enhanced metafile',gifExportName:'GIF images',jpgExportName:'JPEG images',jpegExportName:'JPEG images',pngExportName:'PNG images',parameters:'Parameters',requiringParameters:'Please input parameters.',nullParameterError:'Value cannot be null.',invalidParameterError:'Invalid input.',parameterNoneItemsSelected:'(none)',parameterAllItemsSelected:'(all)',parameterSelectAllItemText:'(Select All)',selectParameterValue:'(select value)',apply:'Apply',errorOccured:'An error has occured.'};'use strict';var icons={paginated:'<rect x="16" y= "1" width="1" height="1" /><rect x="17" y= "2" width="1" height="1" /><rect x="18" y= "3" width="1" height="1" /><path d= "M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M5,22.1V2h8v5h1h1h3v15.1H5z" /><rect x="6" y= "8" width="10" height="1" /><rect x="6" y= "5" width="5" height="1" /><rect x="6" y= "11" width="10" height="1" /><rect x="6" y= "14" width="10" height="1" /><rect x="6" y= "17" width="10" height="1" /><rect x="6" y= "20" width="10" height="1" />',print:'<rect x="5" y= "1" width="14" height="4" /><polygon points= "22,8 22,7 19,7 19,6 5,6 5,7 2,7 2,8 1,8 1,11 1,20 2,20 2,21 5,21 5,11 19,11 19,21 22,21 22,20 23,20 23, 11 23, 8 "/><path d="M6,12v11h12V12H6z M16,21H8v-1h8V21z M16,18H8v-1h8V18z M16,15H8v-1h8V15z" />',exports:'<path d="M19.6,23"/><polyline points="5,19 5,2 13,2 13,7 14.3,7 15,7 18,7 18,9 20,9 20,7 20,6.4 20,5 20,4 19,4 19,5 15,5 15,2 15,1 16,1 16,0 15,0 5,0 3,0 3,2 3,19 3,21 5,21 "/><rect x="18" y="3" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="16" y="1" width="1" height="1"/><polygon points="17,16.6 20,14.1 17,11.6 17,13.6 13,13.6 13,14.6 17,14.6 "/><rect x="3" y="20.9" width="2" height="3.1"/><rect x="4.5" y="22" width="15.6" height="2"/><rect x="18" y="8.4" width="2" height="1.6"/><rect x="18" y="18" width="2.1" height="6"/>',portrait:'<path d="M19,0L19,0L5,0v0H3v24h0.1H5h14h1.7H21V0H19z M12.5,23h-1v-1h1V23z M19,21H5V2h14V21z"/>',landscape:'<path d="M24,19L24,19l0-14h0V3H0v0.1V5v14v1.7V21h24V19z M1,12.5v-1h1v1H1z M3,19V5h19v14H3z"/>',pageSetup:'<rect x="18" y="1" width="1" height="1"/><rect x="19" y="2" width="1" height="1"/><rect x="20" y="3" width="1" height="1"/><polygon points="22,5 22,4 21,4 21,5 20.4,5 20,5 17,5 17,2 17,1.3 17,1 18,1 18,0 17,0 17,0 7,0 6,0 5,0 5,5 7,5 7,2 15,2 15,7 16,7 17,7 20,7 20,22.1 7,22.1 7,19 5,19 5,24 5.9,24 7,24 20,24 21.1,24 22,24 22,5 "/><rect x="5" y="7" width="2" height="2"/><rect x="5" y="11" width="2" height="2"/><rect x="5" y="15" width="2" height="2"/><rect x="9" y="11" width="2" height="2"/><rect x="1" y="11" width="2" height="2"/><polygon points="9,8 9,8 8,8 8,9 9,9 9,10 10,10 10,8 "/><polygon points="2,9 2,9 2,10 3,10 3,9 4,9 4,8 2,8 "/><polygon points="3,16 3,16 4,16 4,15 3,15 3,14 2,14 2,16 "/><polygon points="10,15 10,15 10,14 9,14 9,15 8,15 8,16 10,16 "/>',previousPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="5.6,10.7 12,4.4 18.4,10.7 18.4,15 13.5,10.1 13.5,19.6 10.4,19.6 10.4,10.1 5.6,15 " />',nextPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="18.4,13.3 12,19.6 5.6,13.3 5.6,9 10.5,13.9 10.5,4.4 13.6,4.4 13.6,13.9 18.4,9 " />',firstPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="6.5,13.1 12,7.8 17.5,13.1 17.5,17.5 13.5,13.5 13.5,19.6 10.4,19.6 10.4,13.5 6.5,17.5 " /><rect x="6.5" y= "4.4" width="10.9" height="2.2" />',lastPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="17.5,10.9 12,16.2 6.5,10.9 6.5,6.5 10.5,10.5 10.5,4.4 13.6,4.4 13.6,10.5 17.5,6.5 " /><rect x="6.5" y= "17.5" transform="matrix(-1 -8.987357e-011 8.987357e-011 -1 24 37.0909)" width="10.9" height="2.2" />',backwardHistory:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="10.7,18.4 4.4,12 10.7,5.6 15,5.6 10.1,10.5 19.6,10.5 19.6,13.6 10.1,13.6 15,18.4 " />',forwardHistory:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="13.3,5.6 19.6,12 13.3,18.4 9,18.4 13.9,13.5 4.4,13.5 4.4,10.4 13.9,10.4 9,5.6 " />',selectTool:'<polygon points="19.9,13.4 5.6,1.1 5.3,19.9 10.5,14.7 14.3,23.3 16.4,22.4 12.6,13.8 "/>',moveTool:'<polygon points="12.5,3 14.5,3 12,0 9.5,3 11.5,3 11.5,21 11.5,21 9.6,21 12,24 14.5,21 12.5,21 "/><polygon points="21,12.5 21,14.5 24,12 21,9.5 21,11.5 3,11.5 3,11.5 3,9.6 0,12 3,14.5 3,12.5 "/>',continuousView:'<polygon points="22,0 22,5 9,5 9,0 7,0 7,5 7,7 7,7 24,7 24,7 24,5 24,0 "/><polygon points="23,15 19,15 19,11 20,11 20,10 19,10 18,10 17,10 9,10 7.4,10 7,10 7,24 9,24 9,12 17,12 17,15 17,16.6 17,17 22,17 22,24 24,24 24,17 24,15.1 24,15 24,15 24,14 23,14 "/><rect x="22" y="13" width="1" height="1"/><polygon points="20.9,12 20.9,13 22,13 22,12 21,12 21,11 20,11 20,12 "/><polygon points="4.9,5.2 2.5,2.2 0,5.2 2,5.2 2,9.2 3,9.2 3,5.2 "/><polygon points="2.9,19.2 2.9,15.2 1.9,15.2 1.9,19.2 0,19.2 2.5,22.1 4.9,19.2 "/>',singleView:'<rect x="16" y="1" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="18" y="3" width="1" height="1"/><path d="M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M5,22.1V2h8v5h1h1h3v15.1H5z"/>',fitWholePage:'<rect x="16" y="1" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="18" y="3" width="1" height="1"/><path d="M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M18,22.1H5V2h8v5h1h1h3V22.1z"/><polygon points="17,13.5 15,11 15,13 13,13 13,14 15,14 15,16 "/><polygon points="6,13.5 8,16 8,14 10,14 10,13 8,13 8,11 "/><polygon points="11.5,7 9,9 11,9 11,11 12,11 12,9 14,9 "/><polygon points="11.5,20 14,18 12,18 12,16 11,16 11,18 9,18 "/>',fitPageWidth:'<rect x="16" y="1" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="18" y="3" width="1" height="1"/><path d="M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M5,22.1V2h8v5h1h1h3v15.1H5z"/><polygon points="14,15.5 17,13 14,10.6 14,12.6 13,12.6 13,13.6 14,13.6 "/><polyline points="6,13.1 9,15.6 9,13.6 10,13.6 10,12.6 9,12.6 9,10.6 6,13.1 "/>',zoomOut:'<circle opacity=".25" cx="12" cy="12" r="12"/><rect opacity=".75" x="5" y="10" width="14" height="3"/>',zoomIn:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon opacity=".75" points="19,10 13.5,10 13.5,4.5 10.5,4.5 10.5,10 5,10 5,13 10.5,13 10.5,18.5 13.5,18.5 13.5,13 19,13 " />',fullScreen:'<path d="M22,0H0v2.8V4v20h1.5H2h20h0.7H24V4V0H22z M7,1h1v1H7V1z M5,1h1v1H5V1z M3,1h1v1H3V1z M22,22H2L2,4h20L22,22z" /><polygon points="19.6,9.9 20,6 16.1,6.4 17.6,7.8 14.7,10.6 15.4,11.3 18.3,8.5"/><polygon points="4.4,16.2 4,20 7.9,19.7 6.5,18.3 9.3,15.5 8.6,14.8 5.8,17.6"/>',exitFullScreen:'<path d="M22,0H0v2.8V4v20h1.5H2h20h0.7H24V4V0H22z M7,1h1v1H7V1z M5,1h1v1H5V1z M3,1h1v1H3V1z M22,22H2L2,4h20L22,22z" /><polygon points="9.2,18.6 9.6,14.7 5.7,15.1 7.2,16.5 4.3,19.3 5,20 7.9,17.2"/><polygon points="14.8,7.5 14.4,11.3 18.3,11 16.9,9.6 19.7,6.8 19,6.1 16.2,8.9"/>',thumbnails:'<path d="M20,2h-5h-2v2v5v2v0h2v0h5v0h2v0V9V4V2H20z M20,9h-5V4h5V9z"/><path d="M20,13h-5h-2v2v5v2v0h2v0h5v0h2v0v-2v-5v-2H20z M20,20h-5v-5h5V20z"/><path d="M9,13H4H2v2v5v2v0h2v0h5v0h2v0v-2v-5v-2H9z M9,20H4v-5h5V20z"/><rect x="2" y="2" width="9" height="9"/>',outlines:'<path d="M22,0H2H0v2v20v2h2h20h2v-2V2V0H22z M2,2h12v20H2V2z M22,22h-6V2h6V22z"/><rect x="17.5" y="5" width="3" height="1" /><rect x="17.5" y="8" width="3" height="1"/><rect x="17.5" y="11" width="3" height="1"/>',search:'<mask id="wj-viewer-search-mask"><rect width="100%" height="100%" opacity="1" fill="white"/><circle cx="9.5" cy="9.5" r="6.5"/><\/mask><circle cx="9.5" cy="9.5" r="8.5" mask="url(#wj-viewer-search-mask)"/><rect x="16.9" y="13.7" transform="matrix(-0.7193 0.6947 -0.6947 -0.7193 44.3315 18.4942)" width="3" height="9"/>',searchNext:'<polygon points="12,12.6 4,4.5 4,11.4 12,19.5 20,11.4 20,4.5 "/>',searchPrevious:'<polygon points="12,11.4 20,19.5 20,12.6 12,4.5 4,12.6 4,19.5 "/>'},_svgStart='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox = "0 0 24 24" xml: space = "preserve" >',_svgEnd='</svg>';(function(n){n[n.Single=0]="Single";n[n.Continuous=1]="Continuous"})(exports.ViewMode||(exports.ViewMode={}));ViewMode=exports.ViewMode;_HistoryManager=function(){function n(){this._items=[];this._position=-1;this.statusChanged=new wjcCore.Event}return n.prototype._onStatusChanged=function(){this.statusChanged.raise(this,new wjcCore.EventArgs)},n.prototype.clear=function(){this._items.length!=0&&(this._items.length=0,this._position=-1,this._onStatusChanged())},n.prototype.add=function(n){n&&(this._items.splice(this._position+1),this._items.push(n),this._position=this._items.length-1,this._onStatusChanged())},n.prototype.forward=function(){return this.canForward()?(this._position++,this._onStatusChanged(),this._items[this._position]):null},n.prototype.backward=function(){return this.canBackward()?(this._position--,this._onStatusChanged(),this._items[this._position]):null},n.prototype.canForward=function(){return this._items.length>0&&this._position<this._items.length-1},n.prototype.canBackward=function(){return this._items.length>0&&this._position>0},n}();exports._HistoryManager=_HistoryManager;ViewerBase=function(n){function t(t,i){n.call(this,t,i,!0);this._initialTop=0;this._initialLeft=0;this._isScrolling=!0;this._pageIndexChangedByScrolling=!1;this._preFetchPageCount=3;this._pages=[];this._pageIndex=0;this._zoomFactor=1;this._selectMouseMode=!0;this._viewMode=ViewMode.Single;this._needBind=!1;this._historyManager=new _HistoryManager;this._fullScreen=!1;this._miniToolbarPinnedTimer=null;this._autoHeightCalculated=!1;this._documentSourceChanged=new wjcCore.Event;this.pageIndexChanged=new wjcCore.Event;this.viewModeChanged=new wjcCore.Event;this.selectMouseModeChanged=new wjcCore.Event;this.fullScreenChanged=new wjcCore.Event;this.zoomFactorChanged=new wjcCore.Event;this.queryLoadingData=new wjcCore.Event;this._viewerActionStatusChanged=new wjcCore.Event;this._documentEventKey=(new Date).getTime().toString();this._init(i)}return __extends(t,n),Object.defineProperty(t.prototype,"serviceUrl",{get:function(){return this._serviceUrl},set:function(n){n!=this._serviceUrl&&(this._serviceUrl=n,this._needBindDocumentSource(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filePath",{get:function(){return this._filePath},set:function(n){n!=this._filePath&&(this._filePath=n,this._needBindDocumentSource(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_innerPaginated",{get:function(){return this._documentSource&&!this._needBind?this._documentSource.paginated:this._paginated},set:function(n){this._documentSource&&!this._needBind?this._setPaginated(n):this._paginated=n==null?null:wjcCore.asBoolean(n);this._setViewerAction(_ViewerActionType.TogglePaginated,!0)},enumerable:!0,configurable:!0}),t.prototype.reload=function(){this._needBindDocumentSource();this.invalidate()},t.prototype.refresh=function(i){var r,u;i===void 0&&(i=!0);n.prototype.refresh.call(this,i);this._needBind&&(this._setDocumentSource(this._getSource()),this._needBind=!1);this._resetMiniToolbarPosition();this._resetToolbarWidth();this._resetViewPanelContainerWidth();this._autoHeightCalculated=!1;i&&(r=wjcCore.Control.getControl(this._toolbar),r&&r.refresh(),u=wjcCore.Control.getControl(this._miniToolbar),u&&u.refresh(),t._exportItems=null,this._bindExportMenu(),this._globalize())},t.prototype._getSource=function(){return this.filePath?new _DocumentSource({serviceUrl:this._serviceUrl,filePath:this._filePath}):null},t.prototype._needBindDocumentSource=function(){this._needBind=!0},t.prototype._supportsPageSettingActions=function(){return!1},t.prototype._init=function(n){var t=this;this._createChildren();this._resetToolbarWidth();this._resetViewPanelContainerWidth();this._autoCalculateViewerContainerHeight();this._bindEvents();this.deferUpdate(function(){t.initialize(n)})},t.prototype._globalize=function(){var n=wjcCore.culture.Viewer;this._gSearchTitle.textContent=n.search;this._gMatchCase.innerHTML='&nbsp;&nbsp;&nbsp;'+n.matchCase+'<input type="checkbox" wj-part="match-case"/>';this._gWholeWord.innerHTML='&nbsp;&nbsp;&nbsp;'+n.wholeWord+'<input type="checkbox" wj-part="whole-word"/>';this._gSearchResults.textContent=n.searchResults;this._gThumbnailsTitle.textContent=n.thumbnails;this._gOutlinesTitle.textContent=n.outlines},t.prototype._autoCalculateViewerContainerHeight=function(){if(this._shouldAutoHeight()){var n=this._viewpanelContainer.style.height;this._viewpanelContainer.style.height='auto';this._viewerContainer.style.height=Math.max(this._viewpanelContainer.getBoundingClientRect().height,t._viewpanelContainerMinHeight)+'px';this._viewpanelContainer.style.height=n}},t.prototype._bindEvents=function(){var n=this,t;_addEvent(this._viewpanelContainer,'click',function(){n._viewpanelContainer.focus()});_addEvent(window,'unload',function(){n._documentSource&&n._documentSource.dispose()});_addEvent(this._viewpanelContainer,'scroll',function(){t!==null&&clearTimeout(t);t=setTimeout(function(){n._isScrolling=!0;n._onViewScrolling()},200)});_addEvent(document,'mousemove',function(t){var r=n._startX&&n._startY,i;if(r){n._panning(t);return}n.fullScreen&&(i=n._checkMiniToolbarVisible(t),n._miniToolbarPinnedTimer!=null&&i?(clearTimeout(n._miniToolbarPinnedTimer),n._miniToolbarPinnedTimer=null,n._showMiniToolbar(i)):n._miniToolbarPinnedTimer==null&&n._showMiniToolbar(i))});_addEvent(document,'mouseup',function(){n._stopPanning()});_addEvent(document,'keydown',function(t){t.keyCode===wjcCore.Key.Escape&&(n.fullScreen=!1)});this._historyManager.statusChanged.addHandler(this._onHistoryManagerStatusUpdated,this);this._onHistoryManagerStatusUpdated()},t.prototype._checkMiniToolbarVisible=function(n){var r=n.clientX,u=n.clientY,t=this._miniToolbar.getBoundingClientRect(),i=60,f=t.left-i,e=t.right+i,o=t.top-i,s=t.bottom+i;return r>=f&&r<=e&&u>=o&&u<=s},t.prototype._showMiniToolbar=function(n){var t=parseFloat(getComputedStyle(this._miniToolbar,'').opacity),r=.01,i,u=this._miniToolbar;i=n?setInterval(function(){if(t>=.8){window.clearInterval(i);return}t+=r;u.style.opacity=t.toString()},1):setInterval(function(){if(t<0){window.clearInterval(i);return}t-=r;u.style.opacity=t.toString()},1)},t.prototype._startPanning=function(n){this._startX=n.screenX;this._startY=n.screenY},t.prototype._panning=function(n){this._viewpanelContainer.scrollLeft+=this._startX-n.screenX;this._viewpanelContainer.scrollTop+=this._startY-n.screenY;this._startX=n.screenX;this._startY=n.screenY},t.prototype._stopPanning=function(){this._startX=null;this._startY=null},t.prototype._goToBookmark=function(n){var t=this;this._documentSource&&n!==""&&this._documentSource.getBookmark(n).then(function(n){n&&t._scrollToPosition(n,!0)})},t.prototype._executeCustomAction=function(n){var t=this,i;this._documentSource&&n!==""&&(this._initialPosition={pageIndex:this._pageIndex,pageBounds:{x:this._initialLeft,y:this._initialTop,width:0,height:0}},this._resetDocument(),this._showViewPanelMessage(),this._setDocumentRendering(),i=this._documentSource,this._documentSource.executeCustomAction(n).then(function(){return t._getStatusUtilCompleted(i)}).catch(function(n){t._showViewPanelErrorMessage(t._getErrorMessage(n))}))},t.prototype._getStatusUtilCompleted=function(n){var t=this;!n||n.isLoadCompleted||n.isDisposed||n.getStatus().then(function(){t._documentSource===n&&setTimeout(function(){return t._getStatusUtilCompleted(n)},100)})},t.prototype._onViewScrolling=function(){if(this.viewMode===ViewMode.Single||this._documentSource.pageCount<=this._preFetchPageCount||!this._isScrolling){this._isScrolling=!0;return}this._updateScrollPageIndex(!0)},t.prototype._updateScrollPageIndex=function(n){var i,r,u,t;i=this._viewpanelContainer.scrollTop;r=30;u=this._documentSource.pageSettings.height.valueInPixel*this._zoomFactor;t=Math.round(i/(u+r));this._pageIndex!==t&&(this._pageIndexChangedByScrolling=!0,this._innerMoveToPage(t,n))},t.prototype._createChildren=function(){var n=this.getTemplate();this.applyTemplate('wj-viewer wj-control',n,{_viewpanelContainer:'viewpanel-container',_viewpanelWrapper:'viewpanel-wrapper',_toolbar:'toolbar',_miniToolbar:'mini-toolbar',_leftPanel:'viewer-left-panel',_sidePanel:'side-panel',_viewerContainer:'viewer-container',_splitter:'splitter'});this._initToolbar();this._initSidePanel();this._initSplitter()},t.prototype._initSplitter=function(){var n=this;_addEvent(this._splitter,'click',function(){return n._toggleSplitter()})},t.prototype._toggleSplitter=function(n){var i='wj-glyph-left',u='wj-glyph-right',t=this._splitter.querySelector('span'),r=wjcCore.Control.getControl(this._sidePanel);if(n===!0){if(wjcCore.hasClass(t,u))return}else if(n===!1){if(wjcCore.hasClass(t,i))return}else n=wjcCore.hasClass(t,i);if(n)r.collapse(),t.className=u;else{if(r.visibleTabPagesCount===0)return;t.className=i;r.expand()}this._resetViewPanelContainerWidth()},t.prototype._resetMiniToolbarPosition=function(){var n=this.hostElement.getBoundingClientRect().width,t=this._miniToolbar.getBoundingClientRect().width;this._miniToolbar.style.left=(n-t)/2+'px'},t.prototype._resetToolbarWidth=function(){var n=wjcCore.Control.getControl(this._toolbar);n.resetWidth()},t.prototype._resetViewPanelContainerWidth=function(){var n=this;n._viewpanelContainer.style.width=n._viewerContainer.getBoundingClientRect().width-n._splitter.getBoundingClientRect().width-n._leftPanel.getBoundingClientRect().width+'px'},t.prototype._shouldAutoHeight=function(){return(this.hostElement.style.height==='100%'||this.hostElement.style.height==='auto')&&!this.fullScreen},t.prototype._initSidePanel=function(){var n=this,t=new _SideTabs(this._sidePanel);t.collapse();t.collapsed.addHandler(function(){n._toggleSplitter(!0)});t.expanded.addHandler(function(){n._toggleSplitter(!1);var t=n._sidePanel.getBoundingClientRect().width+n._splitter.getBoundingClientRect().width;t>n._viewerContainer.getBoundingClientRect().width&&wjcCore.addClass(n._sidePanel,"collapsed")});t.tabPageVisibilityChanged.addHandler(function(i,r){(!r.tabPage.isHidden&&t.visibleTabPagesCount==1||r.tabPage.isHidden&&t.visibleTabPagesCount==0)&&n._resetViewPanelContainerWidth()});this._initSidePanelThumbnails();this._initSidePanelOutlines();this._initSidePanelSearch()},t.prototype._highlightPosition=function(n,t){var i=this;this._innerMoveToPage(n).then(function(){var u=i,h,o,e,c,l=u._pageIndex,a=u._viewpanelContainer.scrollTop,v=u._viewpanelContainer.scrollLeft,s={pageIndex:n,pageBounds:null},r,f;switch(u.viewMode){case ViewMode.Continuous:c=u._viewpanelWrapper.querySelectorAll('.wj-view-page');o=c.item(n);break;case ViewMode.Single:o=u._viewpanelWrapper.querySelector('.wj-view-page')}for(h=o.querySelector('g'),e=u._viewpanelWrapper.querySelectorAll('.highlight'),r=0;r<e.length;r++)e.item(r).parentNode.removeChild(e.item(r));for(r=0;r<t.length;r++)f=document.createElementNS('http://www.w3.org/2000/svg','rect'),f.setAttributeNS(null,'x',_twipToPixel(t[r].x).toString()),f.setAttributeNS(null,'y',_twipToPixel(t[r].y).toString()),f.setAttributeNS(null,'height',_twipToPixel(t[r].height).toString()),f.setAttributeNS(null,'width',_twipToPixel(t[r].width).toString()),f.setAttributeNS(null,'class','highlight'),h.appendChild(f);t.length>0&&(s.pageBounds=t[0],u._scrollToPosition(s));(l!=n||a!=u._viewpanelContainer.scrollTop||v!=u._viewpanelContainer.scrollLeft)&&u._addHistory(s)})},t.prototype._scrollToPosition=function(n,t){var i=n.pageIndex||0,r=n.pageBounds||{x:0,y:0,width:0,height:0},u=this.zoomFactor,f,e;f=_twipToPixel(r.y)*u+30;e=_twipToPixel(r.x)*u+30;this._initialTop=f;this._initialLeft=e;this._pageIndex!==i?this._innerMoveToPage(i):this.viewMode===ViewMode.Continuous?this._scrollToCurrentPage():this._scrollToInitialPosition();t===!0&&this._addHistory(n)},t.prototype._initSidePanelSearch=function(){var n=this,t=wjcCore.Control.getControl(this._sidePanel),i=t.addPage(wjcCore.culture.Viewer.search,icons.search);this._gSearchTitle=i.outContent.querySelector('.wj-tabtitle');i.format(function(i){var w='<div class="wj-searchcontainer"><input class="wj-searchbox" wj-part="search-box" type="text"/><div class="wj-btn-group"><button class="wj-btn wj-btn-searchpre">'+_createSvgBtn(icons.searchPrevious).innerHTML+'<\/button><button class="wj-btn wj-btn-searchnext">'+_createSvgBtn(icons.searchNext).innerHTML+'<\/button><\/div><\/div><div class="wj-searchoption"><label wj-part="g-matchCase">&nbsp;&nbsp;&nbsp;'+wjcCore.culture.Viewer.matchCase+'<input type="checkbox" wj-part="match-case"/><\/label><\/div><div class="wj-searchoption"><label wj-part="g-wholeWord">&nbsp;&nbsp;&nbsp;'+wjcCore.culture.Viewer.wholeWord+'<input type="checkbox" wj-part="whole-word"/><\/label><\/div><h3 wj-part="g-searchResults" class="wj-searchresult">'+wjcCore.culture.Viewer.searchResults+'</h3>',o=_toDOMs(w),f,u,v;n._gMatchCase=o.querySelector('[wj-part="g-matchCase"]');n._gWholeWord=o.querySelector('[wj-part="g-wholeWord"]');n._gSearchResults=o.querySelector('[wj-part="g-searchResults"]');i.outContent.querySelector('.wj-tabtitle-wrapper').appendChild(o);var h=i.outContent.querySelectorAll('input[type="checkbox"]')[0],c=i.outContent.querySelectorAll('input[type="checkbox"]')[1],e=i.outContent.querySelector('input[type="text"]'),b=i.outContent.querySelector('.wj-btn-searchpre'),k=i.outContent.querySelector('.wj-btn-searchnext');wjcCore.addClass(i.content.parentElement,'search-wrapper');wjcCore.addClass(i.content,'wj-searchresultlist');var r=new wjcInput.ListBox(i.content),l=!1,a=!1;r.formatItem.addHandler(function(n,t){var i=t.item,f=t.data,r=document.createElement('div'),u=document.createElement('div');i.innerHTML='';u.innerHTML=f.nearText;u.className='wj-search-text';r.innerHTML='Page '+(f.pageIndex+1);r.className='wj-search-page';wjcCore.addClass(i,'wj-search-item');i.setAttribute('tabIndex','-1');i.appendChild(u);i.appendChild(r)});u=-1;v=function(t){var i,e;if(!l&&!a){if(i=f||r.itemsSource,t===-1||!i||!i.length){u=-1;r.selectedIndex=-1;return}(u=t,e=i[u],e)&&(a=!0,r.selectedIndex=t,n._highlightPosition(e.pageIndex,e.boundsList),a=!1)}};r.selectedIndexChanged.addHandler(function(){return v(r.selectedIndex)});var s=function(){f=null},d=function(){var t=new _Promise;return f?(t.resolve(f),t):n._documentSource?e.value?(u=-1,n._documentSource.search(e.value,h.checked,c.checked).then(function(n){f=n;l=!0;r.itemsSource=n;l=!1})):t:(t.reject('Cannot search without document source.'),t)},y=function(n){d().then(function(t){if(t&&t.length){var i=u;n?(i--,i<0&&(i=t.length-1)):(i++,i>=t.length&&(i=0));i=Math.max(Math.min(i,t.length-1),0);v(i)}})},p=function(){if(s(),r.itemsSource=null,h.checked=!1,c.checked=!1,e.value='',!n._documentSource||!n._documentSource.features||n._documentSource.paginated&&!n._documentSource.features.textSearchInPaginatedMode){t.hide(i);return}t.show(i)};n._documentSourceChanged.addHandler(function(){n._documentSource&&_addWjHandler(n._documentEventKey,n._documentSource.loadCompleted,p);p()});_addEvent(h,'click',s);_addEvent(c,'click',s);_addEvent(e,'input',s);_addEvent(e,'keyup',function(n){var t=n||window.event;t.keyCode===wjcCore.Key.Enter&&y(t.shiftKey)});_addEvent(k,'click',function(){return y()});_addEvent(b,'click',function(){return y(!0)});_addEvent(i.header,'keydown',function(t){var i,r=n._toolbar;t.keyCode===wjcCore.Key.Tab&&(i=r.querySelector('[tabIndex=0]')||r.querySelector('input:not([type="hidden"])')||r,i&&i.focus&&(i.focus(),t.preventDefault()))})})},t.prototype._initSidePanelOutlines=function(){var n=this,t=wjcCore.Control.getControl(this._sidePanel),i=t.addPage(wjcCore.culture.Viewer.outlines,icons.outlines);this._gOutlinesTitle=i.outContent.querySelector('.wj-tabtitle');i.format(function(i){var r,e;wjcCore.addClass(i.content,'wj-outlines-tree');r=new wjcGrid.FlexGrid(i.content);r.initialize({autoGenerateColumns:!1,columns:[{binding:'caption',width:'*'}],isReadOnly:!0,childItemsPath:'children',allowResizing:wjcGrid.AllowResizing.None,headersVisibility:wjcGrid.HeadersVisibility.None});r.itemFormatter=function(n,t,i,r){var u,f;u=r.firstElementChild?r.firstElementChild.outerHTML:'&nbsp;&nbsp;&nbsp;&nbsp;';f=n.rows[t].dataItem;r.innerHTML=u+'<a>'+f.caption+'</a>'};e=!1;r.selectionChanged.addHandler(function(t,i){var u,r;if(!e&&(u=i.panel.rows[i.row],u))if(r=u.dataItem,r.position)n._scrollToPosition(r.position,!0);else if(r.target){if(!n._documentSource)return;n._documentSource.getBookmark(r.target).then(function(u){r.position=u;t.getSelectedState(i.row,i.col)!=wjcGrid.SelectedState.None&&n._scrollToPosition(u,!0)},function(){})}});var u=!1,f=function(){u||t.isCollapsed||!i.isActived||i.isHidden||(r.refresh(),u=!0)},o=function(){if(!n._documentSource){r.itemsSource=null;t.hide(i);return}var e=function(){if(!n._documentSource.hasOutlines){r.itemsSource=null;t.hide(i);return}n._documentSource.getOutlines().then(function(n){u=!1;r.itemsSource=n;t.show(i);f()})};_addWjHandler(n._documentEventKey,n._documentSource.loadCompleted,e);e()};n._documentSourceChanged.addHandler(o);t.expanded.addHandler(f);t.tabPageActived.addHandler(f);o()})},t.prototype._initSidePanelThumbnails=function(){var n=this,t=wjcCore.Control.getControl(this._sidePanel),i=t.addPage(wjcCore.culture.Viewer.thumbnails,icons.thumbnails);this._gThumbnailsTitle=i.outContent.querySelector('.wj-tabtitle');i.format(function(i){wjcCore.addClass(i.content,'wj-thumbnaillist');var r=new wjcInput.ListBox(i.content),u=null,o=!1;r.formatItem.addHandler(function(n,t){var i=t.item,f=t.data,r=document.createElement('img'),u=document.createElement('div');i.innerHTML='';wjcCore.addClass(i,'wj-thumbnail-item');r.setAttribute('tabIndex','-1');r.className='wj-pagethumbnail';r.src=f;i.appendChild(r);u.className='page-index';u.innerHTML=(t.index+1).toString();i.appendChild(u)});r.selectedIndexChanged.addHandler(function(){o||r.selectedIndex<0||r.selectedIndex==n._pageIndex||n.moveToPage(r.selectedIndex)});n.pageIndexChanged.addHandler(function(){return r.selectedIndex=n._pageIndex});var h=function(){var i,t;if(!n._documentSource||!n._documentSource.isLoadCompleted)return null;for(i=[],t=0;t<n._documentSource.pageCount;t++)i.push(n._documentSource.getRenderToFilterUrl({format:'png',resolution:50,outputRange:t+1}));return i},f=function(){!t.isCollapsed&&i.isActived&&(u||(u=h()),i.isActived&&r.itemsSource!==u&&r.deferUpdate(function(){o=!0;r.itemsSource=u;r.selectedIndex=n._pageIndex;o=!1}))},e=function(){if(!n._documentSource||!n._documentSource.paginated){t.hide(i);r.itemsSource=null;return}t.show(i);u=null;f()},s=function(){if(!n._documentSource){t.hide(i);r.itemsSource=null;return}_addWjHandler(n._documentEventKey,n._documentSource.loadCompleted,e);_addWjHandler(n._documentEventKey,n._documentSource.pageCountChanged,e);_addWjHandler(n._documentEventKey,n._documentSource.pageSettingsChanged,e);e()};n._documentSourceChanged.addHandler(s);s();t.expanded.addHandler(f);t.tabPageActived.addHandler(f);f()})},t.prototype._scrollToCurrentPage=function(){var n=this,t,i;if(n.viewMode!==ViewMode.Single){if(n._pageIndexChangedByScrolling){n._pageIndexChangedByScrolling=!1;return}t=30;n._documentSource.pageSettings&&(i=n._documentSource.pageSettings.height.valueInPixel*n._zoomFactor);n._isScrolling=!1;n._viewpanelContainer.scrollTop=n._pageIndex*(i+t);n._scrollToInitialPosition();n._updateScrollPageIndex(!1)}},t.prototype._scrollToInitialPosition=function(){switch(this.viewMode){case ViewMode.Continuous:this._viewpanelContainer.scrollTop+=this._initialTop;this._viewpanelContainer.scrollLeft=this._initialLeft;this._initialTop=0;this._initialLeft=0;break;case ViewMode.Single:this._viewpanelContainer.scrollTop=this._initialTop;this._viewpanelContainer.scrollLeft=this._initialLeft;this._initialTop=0;this._initialLeft=0}},t.prototype._executeAction=function(n){if(!this._actionIsDisabled(n))switch(n){case _ViewerActionType.TogglePaginated:this._innerPaginated=!this._innerPaginated;break;case _ViewerActionType.Print:this._documentSource&&this._documentSource.print();break;case _ViewerActionType.Exports:this._exportMenu.selectedIndex=-1;wjcCore.showPopup(this._exportMenu.dropDown,this._exportMenu.owner);this._exportMenu.dropDown.style.color=this.hostElement.style.color;this._exportMenu.dropDown.focus();break;case _ViewerActionType.Portrat:this._setPageLandscape(!1);break;case _ViewerActionType.Landscape:this._setPageLandscape(!0);break;case _ViewerActionType.ShowPageSetupDialog:this.showPageSetupDialog();break;case _ViewerActionType.FirstPage:this.moveToPage(0);break;case _ViewerActionType.LastPage:this._moveToLastPage();break;case _ViewerActionType.PrePage:this.moveToPage(this._pageIndex-1);break;case _ViewerActionType.NextPage:this.moveToPage(this._pageIndex+1);break;case _ViewerActionType.Backward:this._moveBackwardHistory();break;case _ViewerActionType.Forward:this._moveForwardHistory();break;case _ViewerActionType.SelectTool:this.selectMouseMode=!0;break;case _ViewerActionType.MoveTool:this.selectMouseMode=!1;break;case _ViewerActionType.Continuous:this.viewMode=ViewMode.Continuous;break;case _ViewerActionType.Single:this.viewMode=ViewMode.Single;break;case _ViewerActionType.FitPageWidth:this.zoomToViewWidth();break;case _ViewerActionType.FitWholePage:this.zoomToView();break;case _ViewerActionType.ZoomOut:this._zoomBtnClicked(!1,t._defaultZoomValues);break;case _ViewerActionType.ZoomIn:this._zoomBtnClicked(!0,t._defaultZoomValues);break;case _ViewerActionType.FullScreen:this.fullScreen=!0;break;case _ViewerActionType.ExitFullScreen:this.fullScreen=!1}},t.prototype._initToolbar=function(){new _ViewerToolbar(this._toolbar,this)},t.prototype._clearExportMenuItems=function(){this._exportMenu&&(this._exportMenu.itemsSource=null)},Object.defineProperty(t.prototype,"_exportItemDescriptions",{get:function(){return t._exportItems||(t._exportItems={pdf:{name:wjcCore.culture.Viewer.pdfExportName,supportIOS:!0},doc:{name:wjcCore.culture.Viewer.docExportName,supportIOS:!1},docx:{name:wjcCore.culture.Viewer.docxExportName,supportIOS:!1},rtf:{name:wjcCore.culture.Viewer.rtfExportName,supportIOS:!1},xlsx:{name:wjcCore.culture.Viewer.xlsxExportName,supportIOS:!0},xls:{name:wjcCore.culture.Viewer.xlsExportName,supportIOS:!0},mhtml:{name:wjcCore.culture.Viewer.mhtmlExportname,supportIOS:!0},html:{name:wjcCore.culture.Viewer.htmlExportName,supportIOS:!0},zip:{name:wjcCore.culture.Viewer.metafileExportName,supportIOS:!1},csv:{name:wjcCore.culture.Viewer.csvExportName,supportIOS:!0},tiff:{name:wjcCore.culture.Viewer.tiffExportName,supportIOS:!0},bmp:{name:wjcCore.culture.Viewer.bmpExportName,supportIOS:!1},emf:{name:wjcCore.culture.Viewer.emfExportName,supportIOS:!1},gif:{name:wjcCore.culture.Viewer.gifExportName,supportIOS:!1},jpeg:{name:wjcCore.culture.Viewer.jpegExportName,suportIOS:!1},jpg:{name:wjcCore.culture.Viewer.jpegExportName,supportIOS:!1},png:{name:wjcCore.culture.Viewer.pngExportName,supportIOS:!1}}),t._exportItems},enumerable:!0,configurable:!0}),t.prototype._bindExportMenu=function(){var t=this,n;this._supportedExportsDesc&&(n=[],this._supportedExportsDesc.forEach(function(i){var r=t._exportItemDescriptions[i.format];(!_DocumentSource._isIOS()||r.supportIOS)&&(i.name=r.name,n.push(i))}),this._exportMenu.itemsSource=n,this._exportMenu.displayMemberPath='name',this._exportMenu.selectedValuePath='format')},t.prototype._updateExportMenu=function(){var n=this;if(!this._documentSource||this._documentSource.isDisposed){this._clearExportMenuItems();return}this._documentSource.getSupportedExportDescriptions().then(function(t){n._supportedExportsDesc=t;n._bindExportMenu();n._setViewerAction(_ViewerActionType.Exports)})},t.prototype._actionIsChecked=function(n){switch(n){case _ViewerActionType.TogglePaginated:return this._innerPaginated===!0;case _ViewerActionType.Landscape:return this._documentSource&&this._documentSource.pageSettings?this._documentSource.pageSettings.landscape:!1;case _ViewerActionType.Portrat:return this._documentSource&&this._documentSource.pageSettings?!this._documentSource.pageSettings.landscape:!1;case _ViewerActionType.SelectTool:return this.selectMouseMode;case _ViewerActionType.MoveTool:return!this.selectMouseMode;case _ViewerActionType.Continuous:return this.viewMode==ViewMode.Continuous;case _ViewerActionType.Single:return this.viewMode==ViewMode.Single;case _ViewerActionType.FullScreen:return this.fullScreen}return!1},t.prototype._actionIsDisabled=function(n){var i,r;switch(n){case _ViewerActionType.TogglePaginated:return this._innerPaginated==null;case _ViewerActionType.Exports:return!this._exportMenu||!this._exportMenu.itemsSource;case _ViewerActionType.Landscape:case _ViewerActionType.Portrat:case _ViewerActionType.ShowPageSetupDialog:return this._documentSource&&this._documentSource.pageSettings?!this._documentSource.paginated:!0;case _ViewerActionType.FirstPage:case _ViewerActionType.PrePage:return i=!this._documentSource||this._documentSource.pageCount==null,i||this._pageIndex<=0;case _ViewerActionType.LastPage:case _ViewerActionType.NextPage:return i=!this._documentSource||this._documentSource.pageCount==null,i||this._pageIndex>=this._documentSource.pageCount-1;case _ViewerActionType.Backward:return!this._historyManager.canBackward();case _ViewerActionType.Forward:return!this._historyManager.canForward();case _ViewerActionType.Continuous:case _ViewerActionType.Single:return!this._documentSource||!this._documentSource.paginated;case _ViewerActionType.ZoomOut:return this.zoomFactor<=t._defaultZoomValues[0].value;case _ViewerActionType.ZoomIn:return r=t._defaultZoomValues,this.zoomFactor>=r[r.length-1].value}return!1},t.prototype._actionIsShown=function(n){var t=this._documentSource?this._documentSource.features:null;switch(n){case _ViewerActionType.TogglePaginated:return t&&t.paginated&&t.nonPaginated;case _ViewerActionType.Landscape:case _ViewerActionType.Portrat:case _ViewerActionType.ShowPageSetupDialog:return t?t.pageSettings:this._supportsPageSettingActions();case _ViewerActionType.SelectTool:case _ViewerActionType.MoveTool:return!_DocumentSource._isMobile()}return!0},t.prototype._onViewerActionStatusChanged=function(n){this._viewerActionStatusChanged.raise(this,n)},t.prototype._setViewerAction=function(n,t,i,r){var u={actionType:n,disabled:t?t:this._actionIsDisabled(n),checked:i?i:this._actionIsChecked(n),shown:r?r:this._actionIsShown(n)};this._onViewerActionStatusChanged({action:u})},t.prototype._updateViewerActions=function(){this._updatePageSettingsActions();this._updateViewModeActions();this._updateSelectMouseModeActions();this._setViewerAction(_ViewerActionType.Exports)},t.prototype._updateViewModeActions=function(){this._setViewerAction(_ViewerActionType.Continuous);this._setViewerAction(_ViewerActionType.Single)},t.prototype._updatePageSettingsActions=function(){this._setViewerAction(_ViewerActionType.TogglePaginated);this._setViewerAction(_ViewerActionType.Landscape);this._setViewerAction(_ViewerActionType.Portrat);this._setViewerAction(_ViewerActionType.ShowPageSetupDialog)},t.prototype._updateSelectMouseModeActions=function(){this._setViewerAction(_ViewerActionType.SelectTool);this._setViewerAction(_ViewerActionType.MoveTool)},t.prototype._updateZoomFactorActions=function(){this._setViewerAction(_ViewerActionType.ZoomOut);this._setViewerAction(_ViewerActionType.ZoomIn)},t.prototype._onPageSettingsUpdated=function(){this._updatePageSettingsActions();this._updateViewModeActions();this._resetToolbarWidth()},t.prototype._onPageCountUpdated=function(){this._updatePageNavActions();this._resetToolbarWidth()},t.prototype._updatePageNavActions=function(){this._setViewerAction(_ViewerActionType.FirstPage);this._setViewerAction(_ViewerActionType.LastPage);this._setViewerAction(_ViewerActionType.PrePage);this._setViewerAction(_ViewerActionType.NextPage)},t.prototype._onHistoryManagerStatusUpdated=function(){this._setViewerAction(_ViewerActionType.Backward);this._setViewerAction(_ViewerActionType.Forward)},t.prototype._updateViewContainerCursor=function(){var n=!this.selectMouseMode;n?wjcCore.hasClass(this._viewpanelContainer,'move')||wjcCore.addClass(this._viewpanelContainer,'move'):wjcCore.hasClass(this._viewpanelContainer,'move')&&wjcCore.removeClass(this._viewpanelContainer,'move')},t.prototype._updateFullScreenStyle=function(){var t='full-screen',n,i;this.fullScreen?(n=document.body,this._bodyOriginScrollLeft=document.documentElement&&document.documentElement.scrollLeft||n.scrollLeft,this._bodyOriginScrollTop=document.documentElement&&document.documentElement.scrollTop||n.scrollTop,wjcCore.hasClass(this.hostElement,t)||wjcCore.addClass(this.hostElement,t),wjcCore.hasClass(n,t)||wjcCore.addClass(n,t),this._placeHolderElement||(this._placeHolderElement=document.createElement('div'),this._placeHolderElement.className='hidden'),this.hostElement.parentElement.insertBefore(this._placeHolderElement,this.hostElement),this.hostElement.parentElement.removeChild(this.hostElement),n.appendChild(this.hostElement),this._hostOriginWidth=this.hostElement.style.width,this._hostOriginHeight=this.hostElement.style.height,this.hostElement.style.width='100%',this.hostElement.style.height='100%',window.scrollTo(0,0)):this._placeHolderElement&&this._placeHolderElement.parentElement&&(wjcCore.hasClass(this.hostElement,t)&&wjcCore.removeClass(this.hostElement,t),n=document.body,wjcCore.hasClass(n,t)&&wjcCore.removeClass(n,t),n.removeChild(this.hostElement),i=this._placeHolderElement.parentElement,i.insertBefore(this.hostElement,this._placeHolderElement),i.removeChild(this._placeHolderElement),this.hostElement.style.width=this._hostOriginWidth,this.hostElement.style.height=this._hostOriginHeight,wjcCore.isNumber(this._bodyOriginScrollLeft)&&(document.documentElement&&(document.documentElement.scrollLeft=this._bodyOriginScrollLeft),n.scrollLeft=this._bodyOriginScrollLeft),wjcCore.isNumber(this._bodyOriginScrollTop)&&(document.documentElement&&(document.documentElement.scrollTop=this._bodyOriginScrollTop),n.scrollTop=this._bodyOriginScrollTop));this.refresh()},t.prototype._initExportMenu=function(n){var t=document.createElement('div');t.style.display='none';this._exportMenu=new wjcInput.Menu(t);this._exportMenu.showDropDownButton=!1;this._exportMenu.itemClicked.addHandler(this._onExportClicked,this);this._exportMenu.owner=n},t.prototype._onExportClicked=function(n){var r,i,t;if(this._documentSource&&!(this._documentSource.pageCount<=0)){if(r=n.selectedItem,i=this._documentSource.getRenderToFilterUrl({format:r.format}),_DocumentSource._isIOS()){window.open(i);return}t=document.querySelector('#viewDownloader');t||(t=document.createElement('iframe'),t.id='viewDownloader',t.style.display='none',document.body.appendChild(t));t.src=i}},t.prototype.showPageSetupDialog=function(){this._pageSetupDialog||this._createPageSetupDialog();this._pageSetupDialog.showWithValue(this._documentSource.pageSettings)},t.prototype._createPageSetupDialog=function(){var n=this,t=document.createElement("div");t.style.display='none';n.hostElement.appendChild(t);n._pageSetupDialog=new _PageSetupDialog(t);n._pageSetupDialog.applied.addHandler(function(){return n._setPageSettings(n._pageSetupDialog.pageSettings)})},t.prototype.zoomToView=function(){var n=this,i=n._documentSource,r,u,t;i&&i.pageSettings&&(r=n._getViewPortHeight(),u=n._getViewPortWidth(),t=this._getPageSize(),n.zoomFactor=Math.min(r/t.height.valueInPixel,u/t.width.valueInPixel))},t.prototype.zoomToViewWidth=function(){var n=this,i=n._documentSource,r,t,e,u;if(i&&i.pageSettings){r=n._getViewPortHeight();t=n._getViewPortWidth();var f=this._getPageSize(),e=f.height.valueInPixel,u=f.width.valueInPixel;t/u>r/(e*(n.viewMode===ViewMode.Continuous?n._documentSource.pageCount:1))&&(t-=n._getScrollbarWidth());n.zoomFactor=t/u}},t.prototype._getScrollbarWidth=function(){var t=this,n,i;return t._scrollbarWidth||(n=document.createElement('div'),n.style.width='50px',n.style.height='50px',n.style.overflow='auto',document.body.appendChild(n),i=document.createElement('div'),i.style.height='60px',n.appendChild(i),t._scrollbarWidth=n.offsetWidth-n.clientWidth,document.body.removeChild(n)),t._scrollbarWidth},t.prototype._getViewPortHeight=function(){var n=this,t=n._viewpanelWrapper.currentStyle||window.getComputedStyle(n._viewpanelWrapper);return n._viewpanelContainer.offsetHeight-parseFloat(t.marginBottom)-parseFloat(t.marginTop)},t.prototype._getViewPortWidth=function(){var n=this,t=n._viewpanelWrapper.currentStyle||window.getComputedStyle(n._viewpanelWrapper);return n._viewpanelContainer.offsetWidth-parseFloat(t.marginLeft)-parseFloat(t.marginRight)},t.prototype._setPageLandscape=function(n){var i=this,t=this._documentSource.pageSettings;_setLandscape(t,n);i._setPageSettings(t)},t.prototype._setPaginated=function(n){var i=this._documentSource.features,t=this._documentSource.pageSettings;i&&t&&n!=t.paginated&&(n&&i.paginated?(t.paginated=!0,this._setPageSettings(t)):!n&&i.nonPaginated&&(t.paginated=!1,this._setPageSettings(t)))},t.prototype._setPageSettings=function(n){var t=this;return this._showViewPanelMessage(),this._documentSource.setPageSettings(n).then(function(){t._resetDocument();t._reRenderDocument()}).catch(function(n){t._showViewPanelErrorMessage(t._getErrorMessage(n))})},t.prototype._showViewPanelErrorMessage=function(n){this._showViewPanelMessage(n,'errormessage')},t.prototype._showViewPanelMessage=function(n,t){var i=this._viewpanelContainer.querySelector('.wj-viewer-loading'),r;i||(i=document.createElement('div'),i.innerHTML='<span class="verticalalign"></span><span class="textspan"></span>',this._viewpanelContainer.appendChild(i));i.className='wj-viewer-loading';t&&wjcCore.addClass(i,t);r=i.querySelector('.textspan');r&&(r.innerHTML=n||wjcCore.culture.Viewer.loading)},t.prototype._removeViewPanelMessage=function(){var n=this._viewpanelContainer.querySelector('.wj-viewer-loading');n&&this._viewpanelContainer.removeChild(n)},t.prototype._reRenderDocument=function(){this._documentSource&&(this._showViewPanelMessage(),this._documentSource.load())},t.prototype._zoomBtnClicked=function(n,t){for(var u=this,i,r=0;r<t.length;r++)if(t[r].value>u._zoomFactor){i=r-.5;break}else if(t[r].value===u._zoomFactor){i=r;break}(i==null&&(i=t.length-.5),i<=0&&!n)||i>=t.length-1&&n||(i=n?Math.floor(i)+1:Math.ceil(i)-1,u.zoomFactor=t[i].value)},t.prototype._getDocumentSource=function(){return this._documentSource},t.prototype._setDocumentSource=function(n){var t=this;this._loadDocument(n).then(function(){t._documentSource==n&&t._updateExportMenu()})},t.prototype._loadDocument=function(n){var t=this,i=new _Promise;return this._documentSource===n?i:(this._disposeDocument(),this._documentSource=n,n&&(_addWjHandler(this._documentEventKey,n.loadCompleted,this._onDocumentSourceLoadCompleted,this),_addWjHandler(this._documentEventKey,n.queryLoadingData,function(n,i){t.onQueryLoadingData(i)},this),n.isLoadCompleted?(this._onDocumentSourceLoadCompleted(),this._keepServiceConnection(),i.resolve()):(this._showViewPanelMessage(),n.load().then(function(n){t._keepServiceConnection();i.resolve(n)}).catch(function(n){t._showViewPanelErrorMessage(t._getErrorMessage(n))}))),this._onDocumentSourceChanged(),i)},t.prototype._getErrorMessage=function(n){var t=n||wjcCore.culture.Viewer.errorOccured;return n.Message&&(t=n.Message,n.ExceptionMessage&&(t+='<br/>'+n.ExceptionMessage)),t},t.prototype._onDocumentSourceLoadCompleted=function(){var t=this._documentSource.errors,i,r,n;if(this._documentSource.isLoadCompleted){if(this._removeViewPanelMessage(),this._pages.length=0,this._documentSource.pageCount<=0)return;for(n=0;n<this._documentSource.pageCount;n++)this._pages.push(null);if(this._documentSource.paginated||(this.viewMode=ViewMode.Single),i=this._documentSource.initialPosition||this._initialPosition,this._documentSource.initialPosition=null,this._initialPosition=null,i&&i.pageIndex!=0?this._scrollToPosition(i,!0):(this._pageIndex=0,this._updateViewPage(),this._addHistory({pageIndex:0,pageBounds:null})),t&&t.length>0)for(r="",n=0;n<t.length;n++)r+=t[n]+"\r\n";this._updatePageSettingsActions()}},t.prototype._renderSinglePage=function(n,t){var i=this,r,u=new _Promise,f=this._documentSource;return(t=t<0?0:t,!f||!n)?(u.reject('Cannot render page without documentsource and view page.'),u):(_removeChildren(n),f.pageSettings&&(n.style.height=f.pageSettings.height.valueInPixel*this.zoomFactor+'px',n.style.width=f.pageSettings.width.valueInPixel*this.zoomFactor+'px',this._autoHeightCalculated||(this._autoCalculateViewerContainerHeight(),this._autoHeightCalculated=!0)),this._pages[t])?(n.appendChild(this._pages[t].content),this._changePageZoom(n),this.viewMode===ViewMode.Single&&this._scrollToInitialPosition(),u.resolve(t),u):(r=document.createElement('div'),r.className='wj-loading',r.style.height=n.style.height,r.style.lineHeight=n.style.height,r.innerHTML=wjcCore.culture.Viewer.loading,n.appendChild(r),f.renderToFilter({format:'html',paged:this._innerPaginated,outputRange:(t+1).toString()}).then(function(r){var s,e,h,o,c;if(i._documentSource===f){for(s=document.createElement('div'),s.innerHTML=i._addGlobalUniqueId(r.responseText),o=s.querySelector('section'),o&&o.style&&(c={width:new _Unit(o.style.width),height:new _Unit(o.style.height)}),e=s.querySelector('svg'),h=document.createElementNS('http://www.w3.org/2000/svg','g');e.hasChildNodes();)h.appendChild(e.firstChild);e.appendChild(h);i._pages[t]={content:e,size:c};_removeChildren(n);n.appendChild(e);i._changePageZoom(n);i._replaceActionLinks(e);i.viewMode===ViewMode.Single&&i._scrollToInitialPosition();u.resolve(t)}}).catch(function(n){r.innerHTML=i._getErrorMessage(n)}),u)},t.prototype._addGlobalUniqueId=function(n){var i=(new Date).getTime().toString();return n=n.replace(t._idReg,'$1$2'+i+'$3$4'),n.replace(t._idReferReg,'$1$2'+i+'$3$4')},t.prototype._replaceActionLinks=function(n){for(var i,r,u,e=n.querySelectorAll('a'),o=this,f=0;f<e.length;f++)i=e.item(f),r=i.href?i.href.baseVal:'',r.indexOf('navigate')>0?(u=t._bookmarkReg.exec(r),u&&(u[1]&&u[1].length>0?(i.href.baseVal='javascript:void(0);',i.setAttribute(t._bookmarkAttr,u[1]),_addEvent(i,'click',function(){o._goToBookmark(this.getAttribute(t._bookmarkAttr))})):i.removeAttribute("xlink:href"))):t._customActionReg.test(r)&&(i.href.baseVal='javascript:void(0);',i.setAttribute(t._customActionAttr,r.substr(3)),_addEvent(i,'click',function(){o._executeCustomAction(this.getAttribute(t._customActionAttr))}))},t.prototype._getPageSize=function(){if(this.viewMode==ViewMode.Single||!this._documentSource.features.pageSettings){var n=this._pages[this._pageIndex];if(n&&n.size)return n.size}return{width:this._documentSource.pageSettings.width,height:this._documentSource.pageSettings.height}},t.prototype._changePageZoom=function(n){var e=this,r=e.zoomFactor,i,f,u;n&&(u=this._getPageSize(),n.style.height=u.height.valueInPixel*r+'px',n.style.width=u.width.valueInPixel*r+'px',i=n.querySelector('g'),i&&(i.parentNode.setAttribute('height',u.height.valueInPixel*r+'px'),i.parentNode.setAttribute('width',u.width.valueInPixel*r+'px'),i.setAttribute('transform','scale('+r+')'),t._isIE&&(f=i.parentNode,f.removeChild(i),f.appendChild(i))))},t.prototype._renderContinuousPage=function(){var r=this._documentSource.pageCount,t=this._pageIndex-this._preFetchPageCount,i=this._pageIndex+this._preFetchPageCount,u=[],n;for(t=t<0?0:t,i=i>r-1?r-1:i,n=t;n<=i;n++)u.push(this._renderSinglePage(this._viewpanelWrapper.getElementsByClassName('wj-view-page').item(n),n));return new _CompositedPromise(u)},t.prototype._clearKeepSerConnTimer=function(){this._keepSerConnTimer!=null&&clearTimeout(this._keepSerConnTimer)},t.prototype._keepServiceConnection=function(){var n=this,t;(this._clearKeepSerConnTimer(),t=this._documentSource,t)&&(this._keepSerConnTimer=setTimeout(function(){n._documentSource===t&&n._documentSource.getStatus().then(function(){return n._keepServiceConnection()})},this._getExpiredTime()))},t.prototype._getExpiredTime=function(){if(this._expiredTime)return this._expiredTime;var n=this._documentSource;return!n||!n.expiredDateTime||!n.executionDateTime?6e3:(this._expiredTime=n.expiredDateTime.getTime()-n.executionDateTime.getTime(),this._expiredTime=Math.max(this._expiredTime-12e4,0),this._expiredTime)},t.prototype._disposeDocument=function(){this._documentSource&&(_removeAllWjHandlers(this._documentEventKey,this._documentSource.disposed),_removeAllWjHandlers(this._documentEventKey,this._documentSource.pageCountChanged),_removeAllWjHandlers(this._documentEventKey,this._documentSource.pageSettingsChanged),_removeAllWjHandlers(this._documentEventKey,this._documentSource.loadCompleted),_removeAllWjHandlers(this._documentEventKey,this._documentSource.queryLoadingData),this._documentSource.dispose());this._resetDocument()},t.prototype._resetDocument=function(){this._pages.length=0;this._addSinglePage();this._pageIndex=0;this._historyManager.clear()},t.prototype._setDocumentRendering=function(){this._documentSource._updateIsLoadCompleted(!1)},t.prototype._createViewPage=function(){var t=this,n=document.createElement('div');return n.className='wj-view-page',_addEvent(n,'mousedown',function(n){t.selectMouseMode||t._startPanning(n)}),_addEvent(n,'dragstart',function(n){t.selectMouseMode||n.preventDefault()}),n},t.prototype._addContinuousPage=function(){var n=this,i,t;for(_removeChildren(n._viewpanelWrapper),i=0;i<n._documentSource.pageCount;i++)t=this._createViewPage(),t.style.height=n._documentSource.pageSettings.height.valueInPixel*n.zoomFactor+'px',t.style.width=n._documentSource.pageSettings.width.valueInPixel*n.zoomFactor+'px',n._viewpanelWrapper.appendChild(t)},t.prototype._addSinglePage=function(){var t=this,n;return _removeChildren(t._viewpanelWrapper),n=this._createViewPage(),t._viewpanelWrapper.appendChild(n),n},t.prototype.moveToPage=function(n){return this._innerMoveToPage(n,!0)},t.prototype._innerMoveToPage=function(n,t){var i=this,r=this._pageIndex;return this._setPageIndex(n).then(function(n){t===!0&&n!=r&&i._addHistory({pageIndex:n,pageBounds:null})})},t.prototype._moveToLastPage=function(){var n=new _Promise;return this._ensureDocumentLoadCompleted(n)?this._innerMoveToPage(this._documentSource.pageCount-1,!0):n},t.prototype._moveBackwardHistory=function(){if(this._ensureDocumentLoadCompleted()&&this._historyManager.canBackward()){var n=this._historyManager.backward();this._moveToHistory(n)}},t.prototype._moveForwardHistory=function(){if(this._ensureDocumentLoadCompleted()&&this._historyManager.canForward()){var n=this._historyManager.forward();this._moveToHistory(n)}},t.prototype._moveToHistory=function(n){n&&(this.zoomFactor=n.zoomFactor,this._scrollToPosition(n.position))},t.prototype._addHistory=function(n){n&&this._historyManager.add({zoomFactor:this._zoomFactor,position:n})},t.prototype._ensureDocumentLoadCompleted=function(n){return this._documentSource?this._documentSource.isLoadCompleted?!0:(n&&n.reject('Cannot set page index when document source is not loaded completely.'),!1):(n&&n.reject('Cannot set page index without document source.'),!1)},t.prototype._setPageIndex=function(n){var t=new _Promise,r,i,u;if(!this._ensureDocumentLoadCompleted(t))return t;if(n=Math.min(this._documentSource.pageCount-1,Math.max(n,0)),this._pageIndex===n)return t.resolve(n),t;this._updatePageIndex(n);r=this._pageIndex;switch(this.viewMode){case ViewMode.Continuous:this._scrollToCurrentPage();i=this._renderContinuousPage();break;case ViewMode.Single:u=this._viewpanelWrapper.querySelector('.wj-view-page');i=this._renderSinglePage(u,n)}return i.then(function(){return r})},t.prototype._updatePageIndex=function(n){this._documentSource&&(n=Math.min(this._documentSource.pageCount-1,Math.max(n,0)),this._pageIndex!==n)&&(this._pageIndex=n,this.onPageIndexChanged())},Object.defineProperty(t.prototype,"zoomFactor",{get:function(){return this._zoomFactor},set:function(n){(n=Math.max(.05,Math.min(10,n)),n!==this._zoomFactor)&&(this._zoomFactor=n,this._changeViewerZoom(),this.onZoomFactorChanged())},enumerable:!0,configurable:!0}),t.prototype._changeViewerZoom=function(){var t,i,n;switch(this.viewMode){case ViewMode.Continuous:for(t=this._viewpanelWrapper.querySelectorAll('.wj-view-page'),n=0;n<t.length;n++)this._changePageZoom(t.item(n));break;case ViewMode.Single:i=this._viewpanelWrapper.querySelector('.wj-view-page');this._changePageZoom(i)}},Object.defineProperty(t.prototype,"viewMode",{get:function(){return this._viewMode},set:function(n){this._viewMode!==n&&(this._viewMode=n,this._updateViewPage(),this.onViewModeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectMouseMode",{get:function(){return this._selectMouseMode},set:function(n){this._selectMouseMode!==n&&(this._selectMouseMode=n,this.onSelectMouseModeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullScreen",{get:function(){return this._fullScreen},set:function(n){this._fullScreen!==n&&(this._fullScreen=n,n&&this._initMiniToolbar(),this.onFullScreenChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._pageIndex},enumerable:!0,configurable:!0}),t.prototype._initMiniToolbar=function(){var n=wjcCore.Control.getControl(this._miniToolbar);n||(new _ViewerMiniToolbar(this._miniToolbar,this),wjcCore.addClass(this._miniToolbar,"wj-mini-toolbar"))},t.prototype._pinMiniToolbar=function(){var n=this;this._showMiniToolbar(!0);this._miniToolbarPinnedTimer=setTimeout(function(){n._showMiniToolbar(!1);n._miniToolbarPinnedTimer=null},t._miniToolbarPinnedTime)},t.prototype._updateViewPage=function(){if(this._documentSource&&this._documentSource.isLoadCompleted)switch(this.viewMode){case ViewMode.Continuous:this._addContinuousPage();this._renderContinuousPage();this._scrollToCurrentPage();break;case ViewMode.Single:var n=this._addSinglePage();this._renderSinglePage(n,this._pageIndex)}},t.prototype._onDocumentSourceChanged=function(n){this._documentSourceChanged.raise(this,n||new wjcCore.EventArgs);this._clearExportMenuItems();this._updateViewerActions();this._onPageSettingsUpdated();this._onPageCountUpdated();this._updateViewModeActions();this._documentSource&&(_addWjHandler(this._documentEventKey,this._documentSource.pageSettingsChanged,this._onPageSettingsUpdated,this),_addWjHandler(this._documentEventKey,this._documentSource.pageCountChanged,this._onPageCountUpdated,this),_addWjHandler(this._documentEventKey,this._documentSource.loadCompleted,this._onPageCountUpdated,this))},t.prototype.onPageIndexChanged=function(n){this.pageIndexChanged.raise(this,n||new wjcCore.EventArgs);this._updatePageNavActions()},t.prototype.onViewModeChanged=function(n){this.viewModeChanged.raise(this,n||new wjcCore.EventArgs);this._updateViewModeActions()},t.prototype.onSelectMouseModeChanged=function(n){(this.selectMouseModeChanged.raise(this,n||new wjcCore.EventArgs),_DocumentSource._isMobile())||(this._updateSelectMouseModeActions(),this._updateViewContainerCursor())},t.prototype.onFullScreenChanged=function(n){this.fullScreenChanged.raise(this,n||new wjcCore.EventArgs);this._setViewerAction(_ViewerActionType.FullScreen);this._updateFullScreenStyle();this.fullScreen&&this._pinMiniToolbar()},t.prototype.onZoomFactorChanged=function(n){this.zoomFactorChanged.raise(this,n||new wjcCore.EventArgs);this._updateZoomFactorActions()},t.prototype.onQueryLoadingData=function(n){this.queryLoadingData.raise(this,n)},t._bookmarkAttr='bookmark',t._isIE=!!navigator.userAgent.match(/MSIE |Trident\/|Edge\//),t._bookmarkReg=/javascript\:navigate\(['|"](.*)['|"]\)/,t._customActionAttr='customAction',t._customActionReg=/^CA\:/,t._idReg=/(\<[^\>]+)(id=['|"])(\w+)(['|"])/g,t._idReferReg=/(\<[^\>]+)(url\(#)(\w+)(\))/g,t._viewpanelContainerMinHeight=300,t._miniToolbarPinnedTime=3e3,t._defaultZoomValues=[{name:wjcCore.Globalize.format(.05,'p0'),value:.05},{name:wjcCore.Globalize.format(.25,'p0'),value:.25},{name:wjcCore.Globalize.format(.5,'p0'),value:.5},{name:wjcCore.Globalize.format(.75,'p0'),value:.75},{name:wjcCore.Globalize.format(1,'p0'),value:1},{name:wjcCore.Globalize.format(2,'p0'),value:2},{name:wjcCore.Globalize.format(3,'p0'),value:3},{name:wjcCore.Globalize.format(4,'p0'),value:4},{name:wjcCore.Globalize.format(8,'p0'),value:8},{name:wjcCore.Globalize.format(10,'p0'),value:10}],t.controlTemplate='<div class="wj-viewer-outer wj-content"><div wj-part="toolbar"><\/div><div class="wj-viewer-container" wj-part="viewer-container"><div class="wj-viewer-leftpanel" wj-part="viewer-left-panel"><div class="wj-viewer-tabsleft" wj-part="side-panel"><\/div><\/div><div class="wj-viewer-splitter" wj-part="splitter"><button class="wj-btn wj-btn-default" type="button"><span class="wj-glyph-right"><\/span><\/button><\/div><div class="wj-viewpanel-container" wj-part="viewpanel-container" tabIndex="-1"><div class="wj-viewpanel-wrapper" wj-part="viewpanel-wrapper"><\/div><\/div><\/div><div wj-part="mini-toolbar"><\/div><\/div>',t}(wjcCore.Control);exports.ViewerBase=ViewerBase;_SideTabs=function(n){function t(t){n.call(this,t);this._idCounter=0;this._tabPages=[];this._tabPageDic={};this.tabPageActived=new wjcCore.Event;this.tabPageVisibilityChanged=new wjcCore.Event;this.expanded=new wjcCore.Event;this.collapsed=new wjcCore.Event;var i=this.getTemplate();this.applyTemplate('wj-control',i,{_headersContainer:'wj-headers',_contentsContainer:'wj-contents'})}return __extends(t,n),t.prototype.applyTemplate=function(n,t,i){var u=this.hostElement,r,f;if(wjcCore.addClass(u,n),u.appendChild(_toDOMs(t)),i)for(r in i)if(f=i[r],this[r]=u.querySelector('[wj-part="'+f+'"]'),this[r]==null&&u.getAttribute('wj-part')==f&&(this[r]=t),this[r]==null)throw'Missing template part: "'+f+'"';return u},Object.defineProperty(t.prototype,"tabPages",{get:function(){return this._tabPages},enumerable:!0,configurable:!0}),t.prototype.getTabPage=function(n){return this._tabPageDic[n]},t.prototype.getFirstShownTabPage=function(n){var t;return this._tabPages.some(function(i){return!i.isHidden&&i!==n?(t=i,!0):!1}),t},Object.defineProperty(t.prototype,"visibleTabPagesCount",{get:function(){var n=0;return this._tabPages.forEach(function(t){t.isHidden||n++}),n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activedTabPage",{get:function(){var n;return this._tabPages.some(function(t){return t.isActived?(n=t,!0):!1}),n},enumerable:!0,configurable:!0}),t.prototype.removePage=function(n){var t,u,i,r;(t=typeof n=='string'?this.getTabPage(n):n,t)&&((u=t.id,i=this._tabPages.indexOf(t),i<0)||(this._tabPages.splice(i,1),this._tabPageDic[u]=void 0,!this.isCollapsed&&t.isActived&&(r=this.getFirstShownTabPage(),r?this.active(r):this.collapse()),this._headersContainer.removeChild(t.header),this._contentsContainer.removeChild(t.outContent)))},t.prototype.addPage=function(n,t,i){var e=this,o=this._getNewTabPageId(),u=document.createElement('li'),h='<div class="wj-tabpane"><div class="wj-tabtitle-wrapper"><h3 class="wj-tabtitle">'+n+'<span class="wj-close">×<\/span><\/h3><\/div><div class="wj-tabcontent-wrapper"><div class="wj-tabcontent-inner"><\/div><\/div><\/div>',f=_toDOM(h),c=_createSvgBtn(t),r,s;return u.appendChild(c),i=i==null?this._tabPages.length:i,i=Math.min(Math.max(i,0),this._tabPages.length),i>=this._tabPages.length?(this._headersContainer.appendChild(u),this._contentsContainer.appendChild(f)):(this._headersContainer.insertBefore(u,this._tabPages[i].header),this._contentsContainer.insertBefore(f,this._tabPages[i].outContent)),_addEvent(f.querySelector('.wj-close'),'click',function(){e.collapse()}),_addEvent(u.querySelector('a'),'click,keydown',function(n){var t=e.getTabPage(o),i;t&&(i=n.type==='keydown'&&n.keyCode===wjcCore.Key.Enter||n.type==='click',i)&&e.active(t)}),r=new _TabPage(f,u,o),i>=this._tabPages.length?this._tabPages.push(r):this._tabPages.splice(i,0,r),this._tabPageDic[o]=r,this.isCollapsed||(s=this.activedTabPage,s||this.active(r)),r},Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return wjcCore.hasClass(this.hostElement,t._collapsedCss)},enumerable:!0,configurable:!0}),t.prototype.hide=function(n){var i=typeof n=='string'?this.getTabPage(n):n;if(i&&!wjcCore.hasClass(i.header,t._hiddenCss)){wjcCore.addClass(i.header,t._hiddenCss);this.onTabPageVisibilityChanged(i);this.deactive(i)}},t.prototype.show=function(n){var i=typeof n=='string'?this.getTabPage(n):n,r;if(i&&wjcCore.hasClass(i.header,t._hiddenCss)){wjcCore.removeClass(i.header,t._hiddenCss);this.onTabPageVisibilityChanged(i);this.isCollapsed||(r=this.activedTabPage,r||this.active(i))}},t.prototype.deactive=function(n){var i=typeof n=='string'?this.getTabPage(n):n,r;i&&i.isActived&&(wjcCore.removeClass(i.outContent,t._activedCss),_checkImageButton(i.header.querySelector('a'),!1),r=this.getFirstShownTabPage(i),r?this.active(r):this.collapse())},t.prototype.active=function(n){var i=typeof n=='string'?this.getTabPage(n):n;i&&((this.expand(),i.isActived)||(this._tabPages.forEach(function(n){wjcCore.removeClass(n.outContent,t._activedCss);_checkImageButton(n.header.querySelector('a'),!1)}),this.show(i),wjcCore.addClass(i.outContent,t._activedCss),_checkImageButton(i.header.querySelector('a'),!0),this.onTabPageActived()))},t.prototype.onTabPageActived=function(){this.tabPageActived.raise(this,new wjcCore.EventArgs)},t.prototype.onTabPageVisibilityChanged=function(n){this.tabPageVisibilityChanged.raise(this,{tabPage:n})},t.prototype.onExpanded=function(){this.expanded.raise(this,new wjcCore.EventArgs)},t.prototype.onCollapsed=function(){this.collapsed.raise(this,new wjcCore.EventArgs)},t.prototype.collapse=function(){this.isCollapsed||(wjcCore.addClass(this.hostElement,t._collapsedCss),this.onCollapsed())},t.prototype.expand=function(){if(this.isCollapsed){if(wjcCore.removeClass(this.hostElement,t._collapsedCss),!this.activedTabPage){var n=this.getFirstShownTabPage();n&&this.active(n)}this.onExpanded()}},t.prototype._getNewTabPageId=function(){while(this._tabPageDic[(this._idCounter++).toString()]);return this._idCounter.toString()},t._hiddenCss='hidden',t._activedCss='active',t._collapsedCss='collapsed',t.controlTemplate='<ul class="wj-nav wj-btn-group" wj-part="wj-headers"><\/ul><div class="wj-tabcontent" wj-part="wj-contents"><\/div>',t}(wjcCore.Control);exports._SideTabs=_SideTabs;_TabPage=function(){function n(n,t,i){this._header=t;this._outContent=n;this._content=n.querySelector('.wj-tabcontent-inner');this._id=i}return Object.defineProperty(n.prototype,"isActived",{get:function(){return wjcCore.hasClass(this.outContent,_SideTabs._activedCss)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isHidden",{get:function(){return wjcCore.hasClass(this.header,_SideTabs._hiddenCss)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"outContent",{get:function(){return this._outContent},enumerable:!0,configurable:!0}),n.prototype.format=function(n){n(this)},n}();exports._TabPage=_TabPage;_Toolbar=function(n){function t(t){var i=this,r;n.call(this,t);this.svgButtonClicked=new wjcCore.Event;r=this.getTemplate();this.applyTemplate('wj-toolbar',r,{_toolbarWrapper:'toolbar-wrapper',_toolbarContainer:'toolbar-container',_toolbarLeft:'toolbar-left',_toolbarRight:'toolbar-right'});_addEvent(this._toolbarLeft,'mouseover',function(){i._scrollLeft()});_addEvent(this._toolbarLeft,'mouseout',function(){i._clearToolbarMoveTimer()});_addEvent(this._toolbarRight,'mouseover',function(){i._scrollRight()});_addEvent(this._toolbarRight,'mouseout',function(){i._clearToolbarMoveTimer()})}return __extends(t,n),t.prototype.applyTemplate=function(n,t,i){var u=this.hostElement,r,f;if(wjcCore.addClass(u,n),u.appendChild(_toDOMs(t)),i)for(r in i)if(f=i[r],this[r]=u.querySelector('[wj-part="'+f+'"]'),this[r]==null&&u.getAttribute('wj-part')==f&&(this[r]=t),this[r]==null)throw'Missing template part: "'+f+'"';return u},t.prototype._clearToolbarMoveTimer=function(){this._toolbarMoveTimer!=null&&(clearTimeout(this._toolbarMoveTimer),this._toolbarMoveTimer=null)},t.prototype._scrollRight=function(){var i=this,r=this._toolbarRight.getBoundingClientRect().width,u=this._toolbarContainer.getBoundingClientRect().width-this._toolbarWrapper.getBoundingClientRect().width,n=this._toolbarWrapper.offsetLeft-r-t._moveStep;(this._checkMoveButtonEnabled(),n<u)||(this._toolbarWrapper.style.left=n+'px',this._toolbarMoveTimer=setTimeout(function(){return i._scrollRight()},t._moveInterval))},t.prototype._scrollLeft=function(){var i=this,r=this._toolbarLeft.getBoundingClientRect().width,n=this._toolbarWrapper.offsetLeft-r+t._moveStep;(this._checkMoveButtonEnabled(),n>0)||(this._toolbarWrapper.style.left=n+'px',this._toolbarMoveTimer=setTimeout(function(){return i._scrollLeft()},t._moveInterval))},t.prototype._checkMoveButtonEnabled=function(){var u=this._toolbarLeft.getBoundingClientRect().width,n=this._toolbarWrapper.offsetLeft-u+t._moveStep,f=n<=0,i=wjcCore.hasClass(this._toolbarLeft,t._enabledCss);f?i||wjcCore.addClass(this._toolbarLeft,t._enabledCss):i&&wjcCore.removeClass(this._toolbarLeft,t._enabledCss);var e=this._toolbarRight.getBoundingClientRect().width,o=this._toolbarContainer.getBoundingClientRect().width-this._toolbarWrapper.getBoundingClientRect().width,n=this._toolbarWrapper.offsetLeft-e-t._moveStep,s=n>=o,r=wjcCore.hasClass(this._toolbarRight,t._enabledCss);s?r||wjcCore.addClass(this._toolbarRight,t._enabledCss):r&&wjcCore.removeClass(this._toolbarRight,t._enabledCss)},t.prototype._showToolbarMoveButton=function(n){var t=n?'visible':'hidden';this._toolbarLeft.style.visibility=t;this._toolbarRight.style.visibility=t;this._checkMoveButtonEnabled()},t.prototype._globalize=function(){},t.prototype.resetWidth=function(){var i=this._toolbarLeft.getBoundingClientRect().width,r=this._toolbarRight.getBoundingClientRect().width,u=this.hostElement.getBoundingClientRect().width,n,t;this._toolbarContainer.style.width='1500px';this._toolbarWrapper.style.width='auto';n=this._toolbarWrapper.getBoundingClientRect().width+2;this._toolbarWrapper.style.width=n+'px';this._toolbarContainer.style.width=u-i-r+'px';t=i+r+n>u;this._showToolbarMoveButton(t);t||(this._toolbarWrapper.style.left='0px')},t.prototype.addSeparator=function(){var n=document.createElement('span');return n.className='wj-separator',this._toolbarWrapper.appendChild(n),n},t.prototype.onSvgButtonClicked=function(n){this.svgButtonClicked.raise(this,n)},t.prototype.addCustomItem=function(n,i){wjcCore.isString(n)&&(n=_toDOM(n));i!=null&&n.setAttribute(t.commandTagAttr,i.toString());this._toolbarWrapper.appendChild(n)},t.prototype.addSvgButton=function(n,i,r,u){var e=this,f=_createSvgBtn(i);return f.title=n,f.setAttribute(t.commandTagAttr,r.toString()),this._toolbarWrapper.appendChild(f),_addEvent(f,'click,keydown',function(n){var t=n||window.event,i=t.type==='keydown'&&t.keyCode===wjcCore.Key.Enter||t.type==='click';if(i&&!_isDisabledImageButton(f)&&(u||!_isCheckedImageButton(f)))e.onSvgButtonClicked({commandTag:r})}),f},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);t&&this._globalize()},t._initToolbarPageNumberInput=function(n,t){var u=wjcCore.Control.getControl(n),r=document.createElement('div'),f=document.createElement('span'),i,o=function(){var n=t._getDocumentSource();n&&n.pageCount!=null&&(i.value=t.pageIndex+1)},e=function(){var n=t._getDocumentSource();n&&n.pageCount!=null&&(f.innerHTML=n.pageCount.toString(),i.max=n.pageCount,i.min=Math.min(n.pageCount,1),o())},s=function(){var n=t._getDocumentSource();n&&(e(),_addWjHandler(t._documentEventKey,n.pageCountChanged,e),_addWjHandler(t._documentEventKey,n.loadCompleted,e))};r.className='wj-pagenumber';u.addCustomItem(r,_ViewerActionType.PageNumber);i=new wjcInput.InputNumber(r);i.format='n0';_addEvent(r,'keyup',function(n){var r=n||window.event;r.keyCode===wjcCore.Key.Enter&&t.moveToPage(i.value-1)});u.addCustomItem('<span class="slash">/</span>');f.className='wj-pagecount';u.addCustomItem(f,_ViewerActionType.PageCountLabel);t.pageIndexChanged.addHandler(function(){o()});t._getDocumentSource()&&s();t._documentSourceChanged.addHandler(function(){s()})},t._checkSeparatorShown=function(n){for(var o=n._toolbarWrapper,u,i=!0,t,r,f,e=0;e<o.children.length;e++){if(t=o.children[e],u=wjcCore.hasClass(t,'wj-separator'),r=wjcCore.hasClass(t,_hiddenCss),!u&&!r){i=!1;continue}u&&(i?r||wjcCore.addClass(t,_hiddenCss):(r&&wjcCore.removeClass(t,_hiddenCss),f=t),i=!0)}i&&f&&wjcCore.addClass(f,'hidden')},t._moveStep=2,t._moveInterval=5,t._enabledCss='enabled',t.commandTagAttr='command-Tag',t.controlTemplate='<div class="wj-toolbar-move left" wj-part="toolbar-left"><span class="wj-glyph-left"><\/span><\/div><div class="wj-toolbarcontainer" wj-part="toolbar-container"><div class="wj-toolbarwrapper wj-btn-group" wj-part="toolbar-wrapper"><\/div><\/div><div class="wj-toolbar-move right" wj-part="toolbar-right"><span class="wj-glyph-right"><\/span><\/div>',t}(wjcCore.Control);exports._Toolbar=_Toolbar;_ViewerToolbar=function(n){function t(t,i){var r=this,u;n.call(this,t);this._viewer=i;this._initToolbarItems();u=function(){return r.isDisabled=!r._viewer._getDocumentSource()};this._viewer._documentSourceChanged.addHandler(u);u();this._viewer._viewerActionStatusChanged.addHandler(function(n,t){var i=t.action,u=r.hostElement.querySelector('[command-tag="'+i.actionType.toString()+'"]');_checkImageButton(u,i.checked);_disableImageButton(u,i.disabled);_showImageButton(u,i.shown);_Toolbar._checkSeparatorShown(r)})}return __extends(t,n),t.prototype._initToolbarItems=function(){this._gPaginated=this.addSvgButton(wjcCore.culture.Viewer.paginated,icons.paginated,_ViewerActionType.TogglePaginated,!0);this._gPrint=this.addSvgButton(wjcCore.culture.Viewer.print,icons.print,_ViewerActionType.Print);this._gExports=this.addSvgButton(wjcCore.culture.Viewer.exports,icons.exports,_ViewerActionType.Exports);this._viewer._initExportMenu(this._gExports);this.addSeparator();this._gPortrait=this.addSvgButton(wjcCore.culture.Viewer.portrait,icons.portrait,_ViewerActionType.Portrat);this._gLandscape=this.addSvgButton(wjcCore.culture.Viewer.landscape,icons.landscape,_ViewerActionType.Landscape);this._gPageSetup=this.addSvgButton(wjcCore.culture.Viewer.pageSetup,icons.pageSetup,_ViewerActionType.ShowPageSetupDialog);this.addSeparator();this._gFirstPage=this.addSvgButton(wjcCore.culture.Viewer.firstPage,icons.firstPage,_ViewerActionType.FirstPage);this._gPreviousPage=this.addSvgButton(wjcCore.culture.Viewer.previousPage,icons.previousPage,_ViewerActionType.PrePage);this._gNextPage=this.addSvgButton(wjcCore.culture.Viewer.nextPage,icons.nextPage,_ViewerActionType.NextPage);this._gLastPage=this.addSvgButton(wjcCore.culture.Viewer.lastPage,icons.lastPage,_ViewerActionType.LastPage);_Toolbar._initToolbarPageNumberInput(this.hostElement,this._viewer);this.addSeparator();this._gBackwardHistory=this.addSvgButton(wjcCore.culture.Viewer.backwardHistory,icons.backwardHistory,_ViewerActionType.Backward);this._gForwardHistory=this.addSvgButton(wjcCore.culture.Viewer.forwardHistory,icons.forwardHistory,_ViewerActionType.Forward);this.addSeparator();this._gSelectTool=this.addSvgButton(wjcCore.culture.Viewer.selectTool,icons.selectTool,_ViewerActionType.SelectTool);this._gMoveTool=this.addSvgButton(wjcCore.culture.Viewer.moveTool,icons.moveTool,_ViewerActionType.MoveTool);this._gContinuousMode=this.addSvgButton(wjcCore.culture.Viewer.continuousMode,icons.continuousView,_ViewerActionType.Continuous);this._gSingleMode=this.addSvgButton(wjcCore.culture.Viewer.singleMode,icons.singleView,_ViewerActionType.Single);this.addSeparator();this._gWholePage=this.addSvgButton(wjcCore.culture.Viewer.wholePage,icons.fitWholePage,_ViewerActionType.FitWholePage);this._gPageWidth=this.addSvgButton(wjcCore.culture.Viewer.pageWidth,icons.fitPageWidth,_ViewerActionType.FitPageWidth);this._gZoomOut=this.addSvgButton(wjcCore.culture.Viewer.zoomOut,icons.zoomOut,_ViewerActionType.ZoomOut);this._gZoomIn=this.addSvgButton(wjcCore.culture.Viewer.zoomIn,icons.zoomIn,_ViewerActionType.ZoomIn);this._initToolbarZoomValue(this.hostElement);this._gFullScreen=this.addSvgButton(wjcCore.culture.Viewer.fullScreen,icons.fullScreen,_ViewerActionType.FullScreen)},t.prototype._globalize=function(){var n=wjcCore.culture.Viewer;this._gPaginated.title=n.paginated;this._gPrint.title=n.print;this._gExports.title=n.exports;this._gPortrait.title=n.portrait;this._gLandscape.title=n.landscape;this._gPageSetup.title=n.pageSetup;this._gFirstPage.title=n.firstPage;this._gPreviousPage.title=n.previousPage;this._gNextPage.title=n.nextPage;this._gLastPage.title=n.lastPage;this._gBackwardHistory.title=n.backwardHistory;this._gForwardHistory.title=n.forwardHistory;this._gSelectTool.title=n.selectTool;this._gMoveTool.title=n.moveTool;this._gContinuousMode.title=n.continuousMode;this._gSingleMode.title=n.singleMode;this._gWholePage.title=n.wholePage;this._gPageWidth.title=n.pageWidth;this._gZoomOut.title=n.zoomOut;this._gZoomIn.title=n.zoomIn;this._gFullScreen.title=n.fullScreen},t.prototype.onSvgButtonClicked=function(t){n.prototype.onSvgButtonClicked.call(this,t);this._viewer._executeAction(parseInt(t.commandTag))},t.prototype._initToolbarZoomValue=function(n){var f=this,s=wjcCore.Control.getControl(n),e=document.createElement('div'),t,o,r,u,i=ViewerBase._defaultZoomValues;e.className='wj-input-zoom';s.addCustomItem(e,_ViewerActionType.ZoomValue);t=new wjcInput.ComboBox(e);t.deferUpdate(function(){for(r=0;r<i.length;r++)for(u=r+1;u<i.length;u++)i[r].value>i[u].value&&(o=i[r],i[r]=i[u],i[u]=o);t.itemsSource=i;t.isEditable=!0;t.displayMemberPath='name';t.selectedValuePath='value';t.selectedValue=1});t.selectedIndexChanged.addHandler(function(){var n,i;t.isDroppedDown&&(n=t.selectedValue,n==null&&(i=t.text.replace(",",""),n=parseFloat(i),isNaN(n)&&(n=100),n=n*.01),f._viewer.zoomFactor=n)});_addEvent(e,'keypress',function(n){var u=n||window.event,i=t.text,r;u.keyCode===wjcCore.Key.Enter&&(i.lastIndexOf('%')===i.length-1&&(i=i.substring(0,t.text.length-1)),i=i.replace(",",""),r=parseFloat(i),isNaN(r)?t.text=wjcCore.Globalize.format(f._viewer.zoomFactor,'p0'):f._viewer.zoomFactor=r*.01)});_addEvent(e.querySelector('.wj-form-control'),'blur',function(){t.text=wjcCore.Globalize.format(f._viewer.zoomFactor,'p0')});this._viewer.zoomFactorChanged.addHandler(function(){t.isDroppedDown=!1;t.text=wjcCore.Globalize.format(f._viewer.zoomFactor,'p0')})},t}(_Toolbar);exports._ViewerToolbar=_ViewerToolbar;_ViewerMiniToolbar=function(n){function t(t,i){var r=this,u;n.call(this,t);this._viewer=i;this._initToolbarItems();u=function(){return r.isDisabled=!r._viewer._getDocumentSource()};this._viewer._documentSourceChanged.addHandler(u);u();this._viewer._viewerActionStatusChanged.addHandler(function(n,t){var i=t.action,u=r.hostElement.querySelector('[command-tag="'+i.actionType.toString()+'"]');_checkImageButton(u,i.checked);_disableImageButton(u,i.disabled);_showImageButton(u,i.shown);_Toolbar._checkSeparatorShown(r)})}return __extends(t,n),t.prototype._initToolbarItems=function(){this._gPrint=this.addSvgButton(wjcCore.culture.Viewer.print,icons.print,_ViewerActionType.Print);this.addSeparator();this._gPreviousPage=this.addSvgButton(wjcCore.culture.Viewer.previousPage,icons.previousPage,_ViewerActionType.PrePage);this._gNextPage=this.addSvgButton(wjcCore.culture.Viewer.nextPage,icons.nextPage,_ViewerActionType.NextPage);_Toolbar._initToolbarPageNumberInput(this.hostElement,this._viewer);this.addSeparator();this._gZoomOut=this.addSvgButton(wjcCore.culture.Viewer.zoomOut,icons.zoomOut,_ViewerActionType.ZoomOut);this._gZoomIn=this.addSvgButton(wjcCore.culture.Viewer.zoomIn,icons.zoomIn,_ViewerActionType.ZoomIn);this._gExitFullScreen=this.addSvgButton(wjcCore.culture.Viewer.exitFullScreen,icons.exitFullScreen,_ViewerActionType.ExitFullScreen)},t.prototype._globalize=function(){var n=wjcCore.culture.Viewer;this._gPrint.title=n.print;this._gPreviousPage.title=n.previousPage;this._gNextPage.title=n.nextPage;this._gZoomOut.title=n.zoomOut;this._gZoomIn.title=n.zoomIn;this._gExitFullScreen.title=n.exitFullScreen},t.prototype.onSvgButtonClicked=function(t){n.prototype.onSvgButtonClicked.call(this,t);this._viewer._executeAction(parseInt(t.commandTag))},t}(_Toolbar);exports._ViewerMiniToolbar=_ViewerMiniToolbar;exports._createSvgBtn=_createSvgBtn;_PageSetupDialog=function(n){function t(t){var i,r;n.call(this,t);this._uiUpdating=!1;this.applied=new wjcCore.Event;i='Missing dependency: _PageSetupDialog requires ';wjcCore.assert(wjcInput.ComboBox!=null,i+'wijmo.input.');this.modal=!0;this.hideTrigger=wjcInput.PopupTrigger.None;r=this.getTemplate();this.applyTemplate('wj-control wj-content',r,{_divPaperKind:'div-paper-kind',_divOrientation:'div-page-orientation',_divMarginsLeft:'div-margins-left',_divMarginsRight:'div-margins-right',_divMarginsTop:'div-margins-top',_divMarginsBottom:'div-margins-bottom',_btnApply:'btn-apply',_btnCancel:'btn-cancel',_btnClose:'a-close',_gHeader:'g-header',_gPaperKind:'g-paperkind',_gOrientation:'g-orientation',_gMargins:'g-margins',_gLeft:'g-left',_gRight:'g-right',_gTop:'g-top',_gBottom:'g-bottom'});this._numMarginsLeft=new wjcInput.InputNumber(this._divMarginsLeft);this._numMarginsLeft.valueChanged.addHandler(this._updateValue,this);this._numMarginsRight=new wjcInput.InputNumber(this._divMarginsRight);this._numMarginsRight.valueChanged.addHandler(this._updateValue,this);this._numMarginsTop=new wjcInput.InputNumber(this._divMarginsTop);this._numMarginsTop.valueChanged.addHandler(this._updateValue,this);this._numMarginsBottom=new wjcInput.InputNumber(this._divMarginsBottom);this._numMarginsBottom.valueChanged.addHandler(this._updateValue,this);this._cmbPaperKind=new wjcInput.ComboBox(this._divPaperKind,{itemsSource:_enumToArray(_PaperKind),displayMemberPath:'text',selectedValuePath:'value',isEditable:!1});this._cmbPaperKind.selectedIndexChanged.addHandler(this._updateValue,this);this._cmbOrientation=new wjcInput.ComboBox(this._divOrientation,{itemsSource:[wjcCore.culture.Viewer.portrait,wjcCore.culture.Viewer.landscape],isEditable:!1});this._cmbOrientation.selectedIndexChanged.addHandler(this._updateValue,this);this._globalize();this._addEvents()}return __extends(t,n),t.prototype._globalize=function(){var n=wjcCore.culture.Viewer;this._gHeader.textContent=n.pageSetup;this._gPaperKind.textContent=n.paperKind;this._gOrientation.textContent=n.orientation;this._gMargins.textContent=n.margins;this._gLeft.textContent=n.left;this._gRight.textContent=n.right;this._gTop.textContent=n.top;this._gBottom.textContent=n.bottom;this._btnApply.textContent=n.ok;this._btnCancel.textContent=n.cancel;this._cmbOrientation.itemsSource=[wjcCore.culture.Viewer.portrait,wjcCore.culture.Viewer.landscape]},t.prototype._addEvents=function(){var n=this;_addEvent(n._btnClose,'click',function(){n.hide()});_addEvent(n._btnCancel,'click',function(){n.hide()});_addEvent(n._btnApply,'click',function(){n._apply();n.hide()})},t.prototype._apply=function(){this.onApplied()},t.prototype._updateValue=function(){if(!this._uiUpdating){var n=this.pageSettings;n&&(n.bottomMargin=new _Unit(this._numMarginsBottom.value,_UnitType.Inch),n.leftMargin=new _Unit(this._numMarginsLeft.value,_UnitType.Inch),n.rightMargin=new _Unit(this._numMarginsRight.value,_UnitType.Inch),n.topMargin=new _Unit(this._numMarginsTop.value,_UnitType.Inch),n.paperSize=this._cmbPaperKind.selectedValue,_setLandscape(n,this._cmbOrientation.text===wjcCore.culture.Viewer.landscape),this._updateUI())}},t.prototype.onApplied=function(){this.applied.raise(this,new wjcCore.EventArgs)},t.prototype.onShowing=function(t){return this._updateUI(),n.prototype.onShowing.call(this,t)},t.prototype._updateUI=function(){this._uiUpdating=!0;var n=this.pageSettings,t=function(n,t){n.value=_Unit.convertValue(t.value,t.units,_UnitType.Inch)};n&&(this._cmbPaperKind.selectedValue=n.paperSize,this._cmbOrientation.text=n.landscape?wjcCore.culture.Viewer.landscape:wjcCore.culture.Viewer.portrait,t(this._numMarginsLeft,n.leftMargin),t(this._numMarginsRight,n.rightMargin),t(this._numMarginsTop,n.topMargin),t(this._numMarginsBottom,n.bottomMargin));this._uiUpdating=!1},t.prototype.onShown=function(t){this._cmbPaperKind.focus();n.prototype.onShown.call(this,t)},t.prototype.showWithValue=function(t){var i=_clonePageSettings(t);this.pageSettings=i;n.prototype.show.call(this)},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);t&&this._globalize()},t.controlTemplate='<div><div wj-part="g-header" class="wj-dialog-header"><a class="wj-hide" wj-part="a-close" style="float:right;outline:none;text-decoration:none;padding:0px 6px" href="" tabindex="-1" draggable="false">&times;<\/a><\/div><div style="padding:12px;"><table style="table-layout:fixed"><tr><td wj-part="g-paperkind"><\/td><td><div wj-part="div-paper-kind"><\/div><\/td><\/tr><tr><td wj-part="g-orientation"><\/td><td><div wj-part="div-page-orientation"><\/div><\/td><\/tr><\/table><fieldset style="margin-top: 12px"><legend wj-part="g-margins"><\/legend><table style="table-layout:fixed"><tr><td wj-part="g-left"><\/td><td><div wj-part="div-margins-left"><\/div><\/td><\/tr><tr><td wj-part="g-right"><\/td><td><div wj-part="div-margins-right"><\/div><\/td><\/tr><tr><td wj-part="g-top"><\/td><td><div wj-part="div-margins-top"><\/div><\/td><\/tr><tr><td wj-part="g-bottom"><\/td><td><div wj-part="div-margins-bottom"><\/div><\/td><\/tr><\/table><\/fieldset><div class="wj-dialog-footer"><a class="wj-hide" wj-part="btn-apply" href="" tabindex="-1" draggable="false"><\/a>&nbsp;&nbsp;<a class="wj-hide" wj-part="btn-cancel" href="" tabindex="-1" draggable="false"><\/a><\/div><\/div><\/div>',t}(wjcInput.Popup);exports._PageSetupDialog=_PageSetupDialog;exports._setLandscape=_setLandscape;exports._clonePageSettings=_clonePageSettings;exports._enumToArray=_enumToArray;exports._removeChildren=_removeChildren;exports._toDOMs=_toDOMs;exports._toDOM=_toDOM;exports._addEvent=_addEvent;var _checkedCss='wj-state-active',_disabledCss='wj-state-disabled',_hiddenCss='hidden';exports._checkImageButton=_checkImageButton;exports._disableImageButton=_disableImageButton;exports._showImageButton=_showImageButton;exports._isDisabledImageButton=_isDisabledImageButton;exports._isCheckedImageButton=_isCheckedImageButton;wjEventsName='__wjEvents';exports._addWjHandler=_addWjHandler;exports._removeAllWjHandlers=_removeAllWjHandlers,function(n){n[n.TogglePaginated=0]="TogglePaginated";n[n.Print=1]="Print";n[n.Exports=2]="Exports";n[n.Portrat=3]="Portrat";n[n.Landscape=4]="Landscape";n[n.ShowPageSetupDialog=5]="ShowPageSetupDialog";n[n.FirstPage=6]="FirstPage";n[n.PrePage=7]="PrePage";n[n.NextPage=8]="NextPage";n[n.LastPage=9]="LastPage";n[n.PageNumber=10]="PageNumber";n[n.PageCountLabel=11]="PageCountLabel";n[n.Backward=12]="Backward";n[n.Forward=13]="Forward";n[n.SelectTool=14]="SelectTool";n[n.MoveTool=15]="MoveTool";n[n.Continuous=16]="Continuous";n[n.Single=17]="Single";n[n.ZoomOut=18]="ZoomOut";n[n.ZoomIn=19]="ZoomIn";n[n.ZoomValue=20]="ZoomValue";n[n.FitWholePage=21]="FitWholePage";n[n.FitPageWidth=22]="FitPageWidth";n[n.FullScreen=23]="FullScreen";n[n.ExitFullScreen=24]="ExitFullScreen"}(exports._ViewerActionType||(exports._ViewerActionType={}));_ViewerActionType=exports._ViewerActionType;parametersIcon='<path d="M24,11.9v-2h-4V7h0V5h0h-1h-5V2h0V0h0h-1H1H0h0v2h0v11h0v1h0h1h5v4h0v1h0h1h3v4h0v1h0h1h2.1v-1H11V12h2.1v-2H11h-1h0v2h0v6H7V7h12v2.9h-1v2h5V23h-4.9v1H23h1h0v-1h0L24,11.9L24,11.9z M6,5L6,5l0,2h0v6H1V2h12v3H7H6z"/><path d="M20,20v-3v-1h-1h-1v-1v-1h-1h-3h-1v1v3v1h1h1v2h0h1h3h1h0L20,20L20,20z M14,18v-3h3v1h-1h-1v1v1H14z M17,17v1h-1v-1H17z M16,20v-1h1h1v-1v-1h1v3H16z"/>';ReportViewer=function(n){function t(t,i){n.call(this,t,i);this._initSidePanelParameters()}return __extends(t,n),Object.defineProperty(t.prototype,"reportName",{get:function(){return this._reportName},set:function(n){n!=this._reportName&&(this._reportName=n,this._needBindDocumentSource(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paginated",{get:function(){return this._innerPaginated},set:function(n){this._innerPaginated=n},enumerable:!0,configurable:!0}),t.getReportNames=function(n,t){return _Report.getReportNames(n,t)},t.getReports=function(n,t,i){return _Report.getReports(n,t,i)},t._isRequiringParameters=function(n){for(var t=0;t<n.length;t++)if((n[t].value===null||n[t].value===undefined)&&!n[t].nullable)return!0;return!1},t.prototype._globalize=function(){n.prototype._globalize.call(this);var t=wjcCore.culture.Viewer;this._gParameterTitle.textContent=t.parameters},t.prototype._initSidePanelParameters=function(){var n=this,i=wjcCore.Control.getControl(this._sidePanel),r=i.addPage(wjcCore.culture.Viewer.parameters,parametersIcon,2);this._gParameterTitle=r.outContent.querySelector('.wj-tabtitle');r.format(function(r){n._paramsEditor=new _ParametersEditor(r.content);n._paramsEditor.commit.addHandler(function(){n._innerDocumentSource&&n._innerDocumentSource.hasParameters&&(n._showViewPanelMessage(),n._innerDocumentSource.setParameters(n._paramsEditor.parameters).then(function(t){var i=t||[],r=i.some(function(n){return!!n.error});r?n._paramsEditor.itemsSource=i:(n._resetDocument(),n._paramsEditor.isDisabled=!0,n._renderDocumentSource())}).catch(function(t){n._showViewPanelErrorMessage(n._getErrorMessage(t))}))});n._paramsEditor.validate.addHandler(function(){n._innerDocumentSource&&n._innerDocumentSource.hasParameters&&n._innerDocumentSource.setParameters(n._paramsEditor.parameters).then(function(t){n._paramsEditor.itemsSource=t})});var u=function(){var u=n._innerDocumentSource;if(u.status===_ExecutionStatus.cleared||u.status===_ExecutionStatus.notFound?_removeChildren(r.content):u.status===_ExecutionStatus.rendering?n._paramsEditor.isDisabled=!0:u.status===_ExecutionStatus.completed&&(n._paramsEditor.isDisabled=!1),u.status===_ExecutionStatus.loaded){if(!u.hasParameters){i.hide(r);return}i.show(r);i.active(r);u.getParameters().then(function(i){n._innerDocumentSource!=u||u.isDisposed||(n._paramsEditor.itemsSource=i,t._isRequiringParameters(i)?n._showViewPanelMessage(wjcCore.culture.Viewer.requiringParameters):(n._paramsEditor.isDisabled=!0,n._renderDocumentSource()))})}},f=function(){n._innerDocumentSource&&(_addWjHandler(n._documentEventKey,n._innerDocumentSource.statusChanged,u),u())};n._documentSourceChanged.addHandler(f);f()})},t.prototype._updateLoadingDivContent=function(n){var f=this,u=this._viewpanelContainer.querySelector('.wj-view-page'),t,i=this._viewpanelContainer.querySelectorAll('.wj-loading'),r;if(i&&i.length>0)for(r=0;r<i.length;r++)i.item(r).innerHTML=n;else t=document.createElement('div'),t.className='wj-loading',t.style.height=u.offsetHeight+'px',t.style.lineHeight=u.offsetHeight+'px',t.innerHTML=n,u.appendChild(t)},Object.defineProperty(t.prototype,"_innerDocumentSource",{get:function(){return this._getDocumentSource()},enumerable:!0,configurable:!0}),t.prototype._loadDocument=function(t){var i=this._innerDocumentSource!==t,r=n.prototype._loadDocument.call(this,t);return t&&i&&_addWjHandler(this._documentEventKey,t.statusChanged,this._onDocumentStatusChanged,this),r},t.prototype._reRenderDocument=function(){this._renderDocumentSource()},t.prototype._onDocumentStatusChanged=function(){this._innerDocumentSource&&this._innerDocumentSource.status===_ExecutionStatus.loaded&&!this._innerDocumentSource.hasParameters&&this._renderDocumentSource()},t.prototype._renderDocumentSource=function(){var t=this,n;this._innerDocumentSource&&(this._setDocumentRendering(),n=this._innerDocumentSource,n.render().then(function(){return t._getStatusUtilCompleted(n)}))},t.prototype._disposeDocument=function(){this._innerDocumentSource&&_removeAllWjHandlers(this._documentEventKey,this._innerDocumentSource.statusChanged);n.prototype._disposeDocument.call(this)},t.prototype._setDocumentRendering=function(){this._innerDocumentSource._updateStatus(_ExecutionStatus.rendering);n.prototype._setDocumentRendering.call(this)},t.prototype._getSource=function(){return this.filePath?new _Report({serviceUrl:this.serviceUrl,filePath:this.filePath,reportName:this.reportName,paginated:this.paginated}):null},t.prototype._supportsPageSettingActions=function(){return!0},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);t&&this._paramsEditor.refresh()},t}(ViewerBase);exports.ReportViewer=ReportViewer;_ParametersEditor=function(n){function t(t){n.call(this,t);this._parameters={};this._errors=[];this._errorsVisible=!1;this.commit=new wjcCore.Event;this.validate=new wjcCore.Event;wjcCore.addClass(this.hostElement,'wj-parameterscontainer');this._updateErrorsVisible()}return __extends(t,n),t.prototype._setErrors=function(n){this._errors=n;this._updateErrorDiv()},Object.defineProperty(t.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._itemSources},set:function(n){this._itemSources=n;this._parameters={};this._render();var t=[];(n||[]).forEach(function(n){n.error&&t.push({key:n.name,value:n.error})});this._setErrors(t)},enumerable:!0,configurable:!0}),t.prototype._setErrorsVisible=function(n){this._errorsVisible=n;this._updateErrorsVisible()},t.prototype._updateErrorsVisible=function(){this._errorsVisible?wjcCore.removeClass(this.hostElement,t._errorsHiddenCss):wjcCore.addClass(this.hostElement,t._errorsHiddenCss)},t.prototype.onCommit=function(){this.commit.raise(this,new wjcCore.EventArgs)},t.prototype.onValidate=function(){this.validate.raise(this,new wjcCore.EventArgs);this._setErrorsVisible(!1)},t.prototype._deferValidate=function(n,t,i){var r=this;this._validateTimer!=null&&(clearTimeout(this._validateTimer),this._validateTimer=null);this._validateTimer=setTimeout(function(){t!=null&&t();r.onValidate();i!=null&&i();r._lastEditedParam=n;r._validateTimer=null},500)},t.prototype._updateErrorDiv=function(){for(var i,f,e,r=this._errors||[],u=this.hostElement.querySelectorAll('.error'),n=0;n<u.length;n++)u[n].parentNode.removeChild(u[n]);for(n=0;n<r.length;n++)f=this.hostElement.querySelector('*['+t._paramIdAttr+'="'+r[n].key+'"]'),e=r[n].value,f&&(i=document.createElement('div'),i.innerHTML=e,i.className='error',f.appendChild(i))},t.prototype._render=function(){var f=this,e=this._itemSources,o,c=null,s,n,u;if(e&&this._lastEditedParam&&(c=function(n){var i=n.getAttribute(t._paramIdAttr);return i!==f._lastEditedParam?!0:(o=n,!1)}),_removeChildren(this.hostElement,c),e){for(s=0;s<e.length;s++){if(n=e[s],this._lastEditedParam===n.name){this._lastEditedParam=null;o=null;continue}if(!n.hidden){var r=document.createElement('div'),h=document.createElement('span'),i=null;if(r.className='wj-parametercontainer',h.className='wj-parameterhead',h.innerHTML=n.prompt||n.name,wjcCore.isArray(n.allowedValues))i=this._generateComboEditor(n);else switch(n.dataType){case _ParameterType.Boolean:i=this._generateBoolEditor(n);break;case _ParameterType.DateTime:case _ParameterType.Time:case _ParameterType.Date:i=this._generateDateTimeEditor(n);break;case _ParameterType.Integer:case _ParameterType.Float:i=this._generateNumberEditor(n);break;case _ParameterType.String:i=this._generateStringEditor(n)}i&&(i.className+=' wj-parametercontrol',r.setAttribute(t._paramIdAttr,n.name),r.appendChild(h),r.appendChild(i),o?this.hostElement.insertBefore(r,o):this.hostElement.appendChild(r))}}u=document.createElement('input');u.type='button';u.value=wjcCore.culture.Viewer.apply;u.className='wj-applybutton';_addEvent(u,'click',function(){f._validateParameters()&&(f._errors=[],f.onCommit());f._setErrorsVisible(!0)});this.hostElement.appendChild(u)}},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);t&&this._render()},t.prototype._validateParameters=function(){for(var n,e=this.hostElement.querySelectorAll('textarea'),o,u=[],s=this.itemsSource,i=0;i<s.length;i++)n=s[i],o=this.hostElement.querySelector('['+t._paramIdAttr+'="'+n.name+'"]'),n.nullable||this.parameters.hasOwnProperty(n.name)||this.parameters[n.name]||n.value!==null&&n.value!==undefined&&n.value!==""||o&&u.push({key:n.name,value:wjcCore.culture.Viewer.nullParameterError});for(i=0;i<e.length;i++){var r=e.item(i),h,f=!0;h=parseInt(r.getAttribute('data-type'));switch(h){case _ParameterType.Date:case _ParameterType.DateTime:case _ParameterType.Time:f=t._checkValueType(r.value,wjcCore.isDate);break;case _ParameterType.Float:f=t._checkValueType(r.value,t._isFloat);break;case _ParameterType.Integer:f=t._checkValueType(r.value,wjcCore.isInt)}f||u.push({key:r.parentElement.id,value:wjcCore.culture.Viewer.invalidParameterError})}return this._setErrors(u),u.length<=0},t._isFloat=function(n){return!isNaN(parseFloat(n))},t._checkValueType=function(n,t){for(var r=n.split('\n'),i=0;i<r.length;i++)if(r[i].trim().length<=0||t(r[i].trim()))continue;else return!1;return!0},t.prototype._generateComboEditor=function(n){var u=this,t,o=[],f=document.createElement('div'),i,s,l=[],h=n.allowedValues&&n.allowedValues.length>0,r,e,c;for(n.multiValue?t=new _MultiSelectEx(f):(t=new wjcInput.ComboBox(f),n.nullable?o.push({name:wjcCore.culture.Viewer.parameterNoneItemsSelected,value:null}):n.value==null&&h&&o.push({name:wjcCore.culture.Viewer.selectParameterValue,value:null})),t.isEditable=!1,t.displayMemberPath='name',t.selectedValuePath='value',t.isDisabled=!h,r=0;r<n.allowedValues.length;r++)o.push({name:n.allowedValues[r].key,value:n.allowedValues[r].value});if(t.itemsSource=o,n.multiValue){if(i=t,h){if(n.value){for(r=0;r<n.value.length;r++)for(e=0;e<i.itemsSource.length;e++)if(i.itemsSource[e].value===n.value[r]){l.push(i.itemsSource[e]);break}i.checkedItems=l}}else i.checkedItems=[];i.checkedItemsChanged.addHandler(function(){u._deferValidate(n.name,function(){s=[];for(var t=0;t<i.checkedItems.length;t++)s.push(i.checkedItems[t].value);u._updateParameters(n,s)},function(){s.length>0&&!n.nullable&&u._validateNullValueOfParameter(f)})})}else t.selectedValue=h?n.value:null,c=!1,t.selectedIndexChanged.addHandler(function(t){u._deferValidate(n.name,function(){c||(u._updateParameters(n,t.selectedValue),t.selectedValue&&t.itemsSource[0].name===wjcCore.culture.Viewer.selectParameterValue&&setTimeout(function(){c=!0;var n=t.selectedValue,i=t.selectedIndex;t.itemsSource.shift();t.collectionView.refresh();t.selectedValue=n;t.selectedIndex=i-1;c=!1}))},function(){return u._validateNullValueOfParameter(f)})});return f},t.prototype._updateParameters=function(n,t){var r=function(n,t){return t&&!wjcCore.isArray(n)?n.split(/[\r\n]+/):n},i;this.itemsSource.some(function(t){return t.name===n.name?(i=t,!0):!1});this._parameters[n.name]=i.value=n.value=r(t,n.multiValue)},t.prototype._generateBoolEditor=function(n){var r=this,i,u=[],t;return n.nullable?(t=document.createElement('div'),i=new wjcInput.ComboBox(t),i.isEditable=!1,i.displayMemberPath='name',i.selectedValuePath='value',u.push({name:'None',value:null}),u.push({name:'True',value:!0}),u.push({name:'False',value:!1}),i.itemsSource=u,i.selectedValue=n.value,i.selectedIndexChanged.addHandler(function(t){r._deferValidate(n.name,function(){return r._updateParameters(n,t.selectedValue)})})):(t=document.createElement('input'),t.type='checkbox',t.checked=n.value,_addEvent(t,'click',function(){r._deferValidate(n.name,function(){return r._updateParameters(n,t.checked)})})),t},t.prototype._generateStringEditor=function(n){var i=this,t;return n.multiValue?t=i._createTextarea(n.value,n.dataType):(t=document.createElement('input'),t.type='text',n.value&&(t.value=n.value)),i._bindTextChangedEvent(t,n),t},t.prototype._createTextarea=function(n,i){var r=document.createElement('textarea'),f,e=[],u;if((i===_ParameterType.DateTime||i===_ParameterType.Time||i===_ParameterType.Date)&&(f=t._dateTimeFormat),n&&n.length>0)if(f){for(u=0;u<n.length;u++)e.push(wjcCore.Globalize.formatDate(new Date(n[u]),f));r.value=e.join('\n')}else r.value=n.join('\n');return r.wrap='off',r.setAttribute('data-type',i.toString()),r},t.prototype._bindTextChangedEvent=function(n,t){var i=this;_addEvent(n,'change,keyup,paste,input',function(){i._deferValidate(t.name,function(){return i._updateParameters(t,n.value)},function(){n.value&&!t.nullable&&i._validateNullValueOfParameter(n)})})},t.prototype._generateNumberEditor=function(n){var r=this,t,i;return n.multiValue?(t=this._createTextarea(n.value,n.dataType),this._bindTextChangedEvent(t,n)):(t=document.createElement('div'),i=new wjcInput.InputNumber(t),i.format=n.dataType===_ParameterType.Integer?'n0':'n2',i.isRequired=!n.nullable,n.value&&(i.value=n.dataType===_ParameterType.Integer?parseInt(n.value):parseFloat(n.value)),i.valueChanged.addHandler(function(t){r._deferValidate(n.name,function(){return r._updateParameters(n,t.value)})})),t},t.prototype._generateDateTimeEditor=function(n){var u=this,i,r;return n.multiValue?(i=this._createTextarea(n.value,n.dataType),i.title=t._dateTimeFormat,this._bindTextChangedEvent(i,n)):(i=document.createElement('div'),n.dataType==_ParameterType.Date||n.dataType===_ParameterType.DateTime?r=new wjcInput.InputDate(i):(r=new wjcInput.InputTime(i),r.step=60),r.isRequired=!n.nullable,n.value&&(r.value=new Date(n.value)),r.valueChanged.addHandler(function(){u._deferValidate(n.name,function(){return u._updateParameters(n,r.value.toJSON())})})),i},t.prototype._validateNullValueOfParameter=function(n){var i=this._errors,r,u;if(i&&i.length)for(r=0;r<i.length;r++)if(i[r].key===n.parentElement.getAttribute(t._paramIdAttr)&&(u=n.parentElement.querySelector('.error'),u)){n.parentElement.removeChild(u);i.splice(r,1);break}},t._paramIdAttr='param-id',t._errorsHiddenCss='wj-parametererrors-hidden',t._dateTimeFormat='MM/dd/yyyy HH:mm',t}(wjcCore.Control);exports._ParametersEditor=_ParametersEditor;_MultiSelectEx=function(){function n(n){this._selectedAll=!1;this._innerCheckedItemsChanged=!1;this.checkedItemsChanged=new wjcCore.Event;var t=this,i=new wjcInput.MultiSelect(n);t._multiSelect=i;i.checkedItemsChanged.addHandler(t.onCheckedItemsChanged,t);i.isDroppedDownChanged.addHandler(t.onIsDroppedDownChanged,t);i.headerFormatter=function(){return t._updateHeader()}}return n.prototype._updateHeader=function(){var i=this,t=i.checkedItems||[],r=[],u=i.displayMemberPath,n;if(!t.length)return wjcCore.culture.Viewer.parameterNoneItemsSelected;if(i._selectedAll)return wjcCore.culture.Viewer.parameterAllItemsSelected;if(u){for(n=0;n<t.length;n++)r[n]=t[n][u];return r.join(', ')}return t.join(', ')},n.prototype.onIsDroppedDownChanged=function(){this._multiSelect.isDroppedDown&&this._updateSelectedAll()},n.prototype.onCheckedItemsChanged=function(n,t){var i=this;if(!i._innerCheckedItemsChanged){if(!i._selectAllItem){i.checkedItemsChanged.raise(i,t);return}i._updateSelectedAll();i.checkedItemsChanged.raise(i,t)}},Object.defineProperty(n.prototype,"isEditable",{get:function(){return this._multiSelect.isEditable},set:function(n){this._multiSelect.isEditable=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDisabled",{get:function(){return this._multiSelect.isDisabled},set:function(n){this._multiSelect.isDisabled=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayMemberPath",{get:function(){return this._multiSelect.displayMemberPath},set:function(n){this._multiSelect.displayMemberPath=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedValuePath",{get:function(){return this._multiSelect.selectedValuePath},set:function(n){this._multiSelect.selectedValuePath=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemsSource",{get:function(){return this._itemsSource},set:function(n){var t=this,r=t.displayMemberPath||'name',i;t._itemsSource=n;i=[];n&&(n.length>1?(t._selectAllItem={},t._selectAllItem[r]=wjcCore.culture.Viewer.parameterSelectAllItemText,i.push(t._selectAllItem)):t._selectAllItem=null,i=i.concat(n));t._multiSelect.itemsSource=i},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"checkedItems",{get:function(){var t=this,n=[],i;return t._multiSelect.checkedItems&&(n=t._multiSelect.checkedItems.slice()),i=n.indexOf(t._selectAllItem),i>-1&&n.splice(i,1),n},set:function(n){var t=this;t._multiSelect.checkedItems=n;t._selectedAll=!1;t._updateSelectedAll()},enumerable:!0,configurable:!0}),n.prototype._updateSelectedAll=function(){var n=this;if(n._selectAllItem){var t=n._multiSelect.checkedItems||[],r=t.indexOf(n._selectAllItem),i=r>-1,u=n._selectedAll!==i;if(u){n._selectedAll=i;n._innerCheckedItemsChanged=!0;n._multiSelect.checkedItems=n._selectedAll?n._multiSelect.itemsSource.slice():[];n._innerCheckedItemsChanged=!1;return}(n._selectedAll=t&&n._itemsSource&&t.length-(i?1:0)===n._itemsSource.length,n._selectedAll!==i)&&(n._innerCheckedItemsChanged=!0,n._selectedAll?n._multiSelect.checkedItems=t.concat(n._selectAllItem):(t=t.slice(),t.splice(r,1),n._multiSelect.checkedItems=t),n._innerCheckedItemsChanged=!1)}},n}();exports._MultiSelectEx=_MultiSelectEx;PdfViewer=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),Object.defineProperty(t.prototype,"_innerDocumentSource",{get:function(){return this._getDocumentSource()},enumerable:!0,configurable:!0}),t.prototype._getSource=function(){return this.filePath?new _PdfDocumentSource({serviceUrl:this.serviceUrl,filePath:this.filePath}):null},t}(ViewerBase);exports.PdfViewer=PdfViewer