var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n=jQuery,r=".35",i=function(){function e(){}return e.strPolynom="polynom",e.strExponent="exponent",e.strLogarithmic="logarithmic",e.strPower="power",e.strFourier="fourier",e.strMinX="minX",e.strMinY="minY",e.strMaxX="maxX",e.strMaxY="maxY",e.strAverageX="averageX",e.strAverageY="averageY",e}();t.TrendlineFitType=i;var s=function(){function e(){}return e.strTrendline="trendLine",e}();t.ChartConsts=s;var o=function(){function e(){}return e.getDiffAttrs=function(e,t){var r={};return n.each(t,function(n,i){if(typeof e=="undefined")return!0;typeof e[n]=="undefined"?r[n]=t[n]:e[n]!==t[n]&&(r[n]=t[n])}),r},e.paintShadow=function(e,t,r){if(e.removed||n(e.node).parent().length===0)return;var i=e.clone(),s=t||1,o=r||"#cccccc";i.insertBefore(e),i.attr({transform:Raphael.format("...T{0},{1}",s,s),stroke:o,fill:"none","stroke-width":s}),i.toBack(),i.offset=s,e.shadow=i},e.getScaling=function(e,t,n,r){var i=t-n;return i===0&&(i=1),e&&(i=-i),r/i},e.getTranslation=function(e,t,n,r,i){var s=0;return e?(s=t.y,s-=i*n):(s=t.x,s-=i*r),s},e.getXSortedPoints=function(e){function u(e,t){return e-t}var t=e.data.x,r=[].concat(t),i=[].concat(e.data.y),s=[],o=t;if(t===undefined||t.length===0)return;return typeof t[0]=="number"&&(o=[].concat(t).sort(u)),n.each(o,function(e,t){n.each(r,function(n,o){if(t===o)return typeof o!="number"&&(o=e),s.push({x:o,y:i[n]}),r.splice(n,1),i.splice(n,1),!1})}),s},e.sector=function(e,t,r,i,s){var o=n.wijraphael.getPositionByAngle(e,t,r,i),u=n.wijraphael.getPositionByAngle(e,t,r,s),a,f,l,c;return s>i?(l=s-i,c=l>180,c?(a=1,f=0):(a=+c,f=+c)):(l=i-s,c=l>180,c?(a=1,f=1):(a=+c,f=+!c)),["M",e,t,"L",o.x,o.y,"A",r,r,0,a,f,u.x,u.y,"z"]},e.donut=function(e,t,r,i,s,o){var u=n.wijraphael.getPositionByAngle(e,t,r,s),a=n.wijraphael.getPositionByAngle(e,t,r,o),f=n.wijraphael.getPositionByAngle(e,t,i,s),l=n.wijraphael.getPositionByAngle(e,t,i,o),c=o-s>180,h,p,d,v,m,g;return o>s?(m=o-s,g=m>180,g?(h=1,p=0,d=1,v=1):(h=0,p=0,d=0,v=1)):(m=s-o,g=m>180,g?(h=1,p=1,d=1,v=0):(h=0,p=1,d=0,v=0)),["M",u.x,u.y,"A",r,r,0,h,p,a.x,a.y,"L",l.x,l.y,"A",i,i,0,d,v,f.x,f.y,"L",u.x,u.y,"z"]},e.isDate=function(e){return e?typeof e=="object"&&e.constructor===Date:!1},e.getNumberValues=function(t){var r=[],i,s=e.getFirstValidListValue(t);if(typeof s=="number")return t;i=e.isDate(s);for(var o=0;o<t.length;o++)i?r.push(n.toOADate(t[o])):r.push(o);return r},e.getFirstValidListValue=function(e){var t;return n.each(e,function(e,n){return n===null?!0:typeof n=="undefined"?!0:typeof n=="number"&&isNaN(n)?!0:(t=n,!1)}),t},e.getLastValidListValue=function(t){var n=[].concat(t).reverse();return e.getFirstValidListValue(n)},e.isHolefunction=function(e,t){return e===null?!0:typeof e=="undefined"?!0:typeof e=="number"&&isNaN(e)?!0:t===null?!1:typeof e!="undefined"?e-t===0?!0:!1:!1},e.toHexColor=function(e){if({hs:1,rg:1}.hasOwnProperty(e.toLowerCase().substring(0,2))||e.substring(0,1)==="#")return e;try{var t=new ActiveXObject("htmlfile"),n,r,i;return t.write("<body>"),t.close(),n=t.body,r=n.createTextRange(),n.style.color=e,i=r.queryCommandValue("ForeColor"),i=(i&255)<<16|i&65280|(i&16711680)>>>16,i=i.toString(16),"#000000".slice(0,7-i.length)+i}catch(s){return e}},e.getChartLabel=function(e,t,r,i){var s=t,o=!1,u;return e&&e.length&&(o=!0,s=Globalize.format(t,e,r)),i.chartLabelFormatter&&n.isFunction(i.chartLabelFormatter)&&(o=!0,u=n.extend(!0,{},i,{chartLabel:s}),s=n.proxy(i.chartLabelFormatter,u)()),{text:s,processed:o}},e}();t.ChartUtil=o;var u=function(){function e(){}return e.roundTime=function(e,t,r){var i=this,s=t,o=n.fromOADate(e),u,a,f,l;return s>0?(u={year:o.getFullYear(),month:o.getMonth(),day:o.getDate(),hour:o.getHours(),minute:o.getMinutes(),second:o.getSeconds()},s<i.tmInc.minute?(u.second=i.tround(u.second,s,r),i.getTimeAsDouble(u)):(u.second=0,s<i.tmInc.hour?(s/=i.tmInc.minute,u.minute=i.tround(u.minute,s,r),i.getTimeAsDouble(u)):(u.minute=0,s<i.tmInc.day?(s/=i.tmInc.hour,u.hour=i.tround(u.hour,s,r),i.getTimeAsDouble(u)):(u.hour=0,s<i.tmInc.month?(s/=i.tmInc.day,u.day=i.tround(u.day,s,r),i.getTimeAsDouble(u)):(u.day=1,s<i.tmInc.year?(s/=i.tmInc.month,u.month=i.tround(u.month,s,r),i.getTimeAsDouble(u)):(u.month=0,s/=i.tmInc.year,u.year=i.tround(u.year,s,r),i.getTimeAsDouble(u))))))):(a=o,f=a-s,l=parseInt((f/t).toString(),10)*t,r&&l!==f&&(l+=t),a=s+l,a)},e.tround=function(e,t,n){var r=parseInt((e/t*t).toString(),10);return n&&r!==e&&(r+=parseInt(t,10)),r},e.getTimeAsDouble=function(e){var t=0,r=0,i=null;return e.day<1?(r=-1-e.day,e.day=1):e.day>28&&(r=e.day-28,e.day=28),e.month<0?(t=-1-e.day,e.month=0):e.month>11&&(t=e.month-11,e.month=11),i=new Date(e.year,e.month,e.day,e.hour,e.minute,e.second),i.setDate(i.getDate()+r),i.setMonth(i.getMonth()+t),n.toOADate(i)},e.getTimeDefaultFormat=function(e,t){var n=this,r=e-t,i="d";return r>2*n.tmInc.year?i="yyyy":r>n.tmInc.year?i="MMM yy":r>3*n.tmInc.month?i="MMM":r>2*n.tmInc.week?i="MMM d":r>2*n.tmInc.day?i="ddd d":r>n.tmInc.day?i="ddd H:mm":r>n.tmInc.hour?i="H:mm":r>=1e3&&(i="H:mm:ss"),i},e.niceTimeUnit=function(e,t){var n=this,r=e;return r=n.niceTimeSpan(r,t),r},e.niceTimeSpan=function(e,t){var n=this,r=n.manualTimeInc(t),i=0,s=0;i=Math.ceil(e);if(i===0)return n.timeSpanFromTmInc(r);s=1;if(r<n.tmInc.minute){if(i<n.tmInc.minute){s=n.getNiceInc([1,2,5,10,15,30],i,r);if(s!==0)return s}r=n.tmInc.minute}if(r<n.tmInc.hour){if(i<n.tmInc.hour){s=n.getNiceInc([1,2,5,10,15,30],i,r);if(s!==0)return s}r=n.tmInc.hour}if(r<n.tmInc.day){if(i<n.tmInc.day){s=n.getNiceInc([1,3,6,12],i,r);if(s!==0)return s}r=n.tmInc.day}if(r<n.tmInc.month){if(i<n.tmInc.month){s=n.getNiceInc([1,2,7,14],i,r);if(s!==0)return s}r=n.tmInc.month}if(r<n.tmInc.year){if(i<n.tmInc.year){s=n.getNiceInc([1,2,3,4,6],i,r);if(s!==0)return s}r=n.tmInc.year}return s=100*n.tmInc.year,i<s&&(s=n.getNiceInc([1,2,5,10,20,50],i,r),s===0&&(s=100*n.tmInc.year)),s},e.getNiceInc=function(e,t,n){var r=0,i=0,s=e.length;for(r=0;r<s;r++){i=e[r]*n;if(t<=i)return i}return 0},e.timeSpanFromTmInc=function(e){var t=1e3,n=e,r=1;if(e!==this.tmInc.maxtime)if(e>this.tmInc.tickf1)t=e;else{e+=7;while(n>0)r*=10,n--;t=r}return t},e.manualTimeInc=function(e){var t=this,n=t.tmInc.second;return!e||e.length===0?n:(e.indexOf("s")>=0?n=t.tmInc.second:e.indexOf("m")>=0?n=t.tmInc.minute:e.indexOf("h")>=0||e.indexOf("H")>=0?n=t.tmInc.hour:e.indexOf("d")>=0?n=t.tmInc.day:e.indexOf("M")>=0?n=t.tmInc.month:e.indexOf("y")>=0&&(n=t.tmInc.year),n)},e.niceTickNumber=function(e){if(parseFloat(e)===0)return e;e<0&&(e=-e);var t=Math.log(e)/Math.log(10),n=parseInt(this.signedFloor(t).toString(),10),r=e/Math.pow(10,n),i=10;return r<=1?i=1:r<=2?i=2:r<=5&&(i=5),i*Math.pow(10,n)},e.niceNumber=function(e,t,n){if(parseFloat(e)===0)return e;e<0&&(e=-e);var r=e/Math.pow(10,t),i=10;return n?r<1.5?i=1:r<3?i=2:r<7&&(i=5):r<=1?i=1:r<=2?i=2:r<=5&&(i=5),i*Math.pow(10,t)},e.nicePrecision=function(e){if(e<=0||typeof e!="number")return 0;var t=Math.log(e)/Math.log(10),n=parseInt(this.signedFloor(t).toString(),10),r=e/Math.pow(10,n);return r<3&&(n=-n+1),n},e.precCeil=function(e,t){var n=Math.pow(10,e),r=t/n;return r=Math.ceil(r),r*n},e.precFloor=function(e,t){var n=Math.pow(10,e),r=t/n;return r=Math.floor(r),r*n},e.signedCeiling=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.signedFloor=function(e){return e<0?Math.ceil(e):Math.floor(e)},e.powerTransform=function(e,t,n,r,i){var s,o=n[0]<0?-1:1;for(var u=0;u<e;u++){if(t[u]<=0)throw"Incompatible data: x values should be positive.";s=o*n[u];if(s<=0)throw"Incompatible data: y values must all have the same sign.";r[u]=Math.log(t[u]),i[u]=Math.log(s)}return o},e.expoTransform=function(e,t,n,r,i){var s,o=n[0]<0?-1:1;for(var u=0;u<e;u++)r[u]=t[u];for(var u=0;u<e;u++){s=o*n[u];if(s<=0)throw"Incompatible data: for expo fit all Y values must have the same sign";i[u]=Math.log(s)}return o},e.logTransform=function(e,t,n,r,i){var s,o=t[0]<0?-1:1;for(var u=0;u<e;u++)i[u]=n[u];for(var u=0;u<e;u++){s=o*t[u];if(s<=0)throw"Incompatible data: for log fit all Y values must have the same sign";r[u]=Math.log(s)}return o},e.polyCreateBasisFunctions=function(e,t,n,r,i){for(var s=0;s<e;s++){i?(r[s][0]=n[s],t>1&&(r[s][1]=n[s]*n[s])):(r[s][0]=1,r[s][1]=n[s]);for(var o=2;o<t;o++)r[s][o]=n[s]*r[s][o-1]}},e.powerCreateBasisFunctions=function(e,t,n){for(var r=0;r<e;r++)n[r][0]=1,n[r][1]=t[r]},e.expoCreateBasisFunctions=function(e,t,n){for(var r=0;r<e;r++)n[r][0]=1,n[r][1]=t[r]},e.logCreateBasisFunctions=function(e,t,n){for(var r=0;r<e;r++)n[r][0]=t[r],n[r][1]=1},e.fourierCreateBasisFunctions=function(e,t,n,r){for(var i=0;i<e;i++){if(r[i]===null||r[i]===undefined)r[i]=new Array;r[i][0]=1,t>1&&(r[i][1]=Math.cos(n[i])),t>2&&(r[i][2]=Math.sin(n[i]));for(var s=3;s<t;s++){var o=Math.ceil((s+1)/2);s%2==1?r[i][s]=Math.cos(o*n[i]):r[i][s]=Math.sin(o*n[i])}}},e.createBasis=function(t,n,r,s,o,u,a,f){if(t<2)throw"Incompatible data: Less than 2 data points.";if(s<1)throw"Incompatible data: Less than 1 coefficient in the fit";if(s>t)throw"Incompatible data: Number of data points less than number of terms";for(var l=0;l<s;l++)o[l]=0;switch(a){case i.strPolynom:e.polyCreateBasisFunctions(t,s,n,u,f);break;case i.strPower:e.powerCreateBasisFunctions(t,n,u);break;case i.strExponent:e.expoCreateBasisFunctions(t,n,u);break;case i.strLogarithmic:e.logCreateBasisFunctions(t,n,u);break;case i.strFourier:e.fourierCreateBasisFunctions(t,s,n,u)}},e.solveGauss=function(e,t,n){var r=e.length,i,s,o,u,a,f=!0;if(t.length<r||e[0].length<r+1)throw"Dimension of matrix is not correct.";for(i=0;i<r;i++){o=i,u=Math.abs(e[i][i]);for(s=i+1;s<r;s++)u<Math.abs(e[s][i])&&(u=Math.abs(e[s][i]),o=s);if(!(Math.abs(u)>n)){f=!1;break}for(s=i;s<=r;s++)a=e[i][s],e[i][s]=e[o][s],e[o][s]=a;for(o=i+1;o<r;o++){a=e[o][i]/e[i][i],e[o][i]=0;for(s=i+1;s<=r;s++)e[o][s]-=a*e[i][s]}}if(f)for(i=r-1;i>=0;i--){t[i]=e[i][r];for(s=i+1;s<r;s++)t[i]-=e[i][s]*t[s];t[i]=t[i]/e[i][i]}return f},e.normalizeAndSolveGauss=function(t,n,r,i,s){var o=new Array(n);for(var u=0;u<n;u++)o[u]=e.createArray(n+1,0);e.computeNormalEquations(t,n,r,i,o);if(!e.solveGauss(o,s,0))throw"Incompatible data: No solution"},e.computeNormalEquations=function(e,t,n,r,i){var s;for(var o=0;o<t;o++){s=0;for(var u=0;u<e;u++)s+=r[u]*n[u][o];i[o][t]=s;for(var a=o;a<t;a++){s=0;for(var u=0;u<e;u++)s+=n[u][a]*n[u][o];i[a][o]=s,i[o][a]=s}}},e.solveLeastSquares=function(t,n,r,s,o,u,a){var f=0,l,c,h=new Array(t);if(u==i.strExponent||u==i.strLogarithmic||u==i.strPower){s=2,l=e.createArray(t,0),c=e.createArray(t,0);switch(u){case i.strPower:f=e.powerTransform(t,n,r,l,c);break;case i.strExponent:f=e.expoTransform(t,n,r,l,c);break;case i.strLogarithmic:f=e.logTransform(t,n,r,l,c)}}else l=n,c=r;a&&u==i.strPolynom&&(f=o[0],s--);for(var p=0;p<t;p++)h[p]=e.createArray(s,0);e.createBasis(t,l,c,s,o,h,u,a),e.normalizeAndSolveGauss(t,s,h,c,o);switch(u){case i.strPower:o[0]=f*Math.exp(o[0]);break;case i.strExponent:o[0]=f*Math.exp(o[0]);break;case i.strLogarithmic:o[1]=f*Math.exp(o[1]/o[0]);break;case i.strPolynom:if(a){for(var p=o.length-1;p>0;p--)o[p]=o[p-1];o[0]=f}}},e.aproximate=function(e,t,n){var r=0;switch(e){case i.strPolynom:var s=1;for(var o=0;o<t.length;o++)o>0&&(s*=n),r+=t[o]*s;break;case i.strPower:r=t[0]*Math.pow(n,t[1]);break;case i.strExponent:r=t[0]*Math.exp(n*t[1]);break;case i.strLogarithmic:r=t[0]*Math.log(n*t[1]);break;case i.strFourier:r=t[0];for(var o=1;o<t.length;o++){var u=Math.ceil((o+1)/2);o%2==1?r+=t[o]*Math.cos(u*n):r+=t[o]*Math.sin(u*n)}}return r},e.processSimpleValues=function(e,t,n){var r=e.length,s=e[0],o=s,u=t[0],a=u,f=0,l=0,c=[],h=[];for(var p=0;p<r;p++)s>e[p]&&(s=e[p]),o<e[p]&&(o=e[p]),u>t[p]&&(u=t[p]),a<t[p]&&(a=t[p]),f+=e[p],l+=t[p];f=f*1/r,l=l*1/r;switch(n){case i.strMinX:c=[].concat([s,s]),h=[].concat([u,a]);break;case i.strMaxX:c=[].concat([o,o]),h=[].concat([u,a]);break;case i.strMinY:c=[].concat([s,o]),h=[].concat([u,u]);break;case i.strMaxY:c=[].concat([s,o]),h=[].concat([a,a]);break;case i.strAverageX:c=[].concat([f,f]),h=[].concat([u,a]);break;case i.strAverageY:c=[].concat([s,o]),h=[].concat([l,l])}return{x:c,y:h}},e.getNumberSeriesData=function(e,t,r,i){var s=o.getNumberValues(e),u=o.getNumberValues(t),a=[],f=[];return n.each(t,function(e,t){if(e===s.length)return!1;if(o.isHolefunction(t,i)){if(r==="excludeHole")return!0;if(!!o.isHolefunction(i,undefined)||t!==i)return!0;if(s[e]===undefined)return!1;a.push(s[e]),f.push(u[e])}else a.push(s[e]),f.push(u[e])}),{x:a,y:f}},e.createArray=function(e,t){var n=[];for(var r=0;r<e;r++)n.push(t);return n},e.processValues=function(t,n,r,s,o,u,f,l,c,h,p){var d,v,m,g,y=[],b=[],w,E;if(l===null||l===undefined)l=2;else{if(typeof l!="number")return;if(l<1)return}if(c===null||c===undefined)c=100;else{if(typeof c!="number")return;if(c<1)return}if(r===null||r===undefined)r=i.strPolynom;if(!a.validateType(r))return;E=e.getNumberSeriesData(t,n,h,p);if(!E.x.length||!E.y.length)return;if(r==i.strMinX||r==i.strMaxX||r==i.strMinY||r==i.strMaxY||r==i.strAverageX||r==i.strAverageY)return e.processSimpleValues(E.x,E.y,r);m=E.x.length;for(var S=0;S<m;S++)S==0?(d=E.x[S],v=d):(d>E.x[S]&&(d=E.x[S]),v<E.x[S]&&(v=E.x[S]));l=Math.min(l,m),w=e.createArray(l,0),e.solveLeastSquares(m,E.x,E.y,l,w,r,!1),!s&&d<u&&(d=u),!o&&v>f&&(v=f),g=(v-d)/(c-1);for(var S=0;S<c;S++){var x=d+g*S;y.push(x),b.push(e.aproximate(r,w,x))}return{x:y,y:b}},e.tmInc={tickf7:-7e3,tickf6:-6e3,tickf5:-5e3,tickf4:-4e3,tickf3:-3e3,tickf2:-2e3,tickf1:-1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month28:24192e5,month29:25056e5,month30:2592e6,month:26784e5,year:31536e6,maxtime:2147483647},e}();t.ChartDataUtil=u;var a=function(){function e(e,t){var n,r=this;r.options=t,r.element=e,t&&t.bounds&&(n=t.bounds,r.width=n.endX-n.startX,r.height=n.endY-n.startY)}return e.prototype.render=function(){var t=this.element,r=this.options,i=r.wijCSS,s=r.bounds,o=r.widgetName,u=r.canvas,a=r.animation,f=r.seriesTransition,l=r.mouseDown,c=r.mouseUp,h=r.mouseOver,p=r.mouseOut,d=r.mouseMove,v=r.click,m=[],g=[],y=[],b=r.disabled,w=u.set(),E=r.aniPathsAttr,S=[],x,T=t.data("fields")||{},N=[],C=r.widget,k=r.extremeValue;this.widget=C,this.renderTrendLineChart(r,S,E,g,y,w,m,N),e.playAnimation(a.enabled,a.duration,a.easing,f,s,g,E,r.axis,k),E.length=0,n.each(S,function(e,t){E.push(t)}),e.unbindLiveEvents(t,o,i),e.bindLiveEvents(t,o,l,c,h,p,d,v,b,i,!1),x={trendLines:g,trendLineShadows:y,trendLineAnimationSet:w},T.chartElements||(T.chartElements={}),T.seriesEles=N,n.extend(!0,T.chartElements,x),t.data("fields",T)},e.setClipRect=function(e,t,n){var r=n.endX-n.startX-e.left+e.right,i=n.endY-n.startY-e.top+e.bottom;t.wijAttr("clip-rect",Raphael.format("{0} {1} {2} {3}",n.startX+e.left,n.startY+e.top,r,i))},e.playAnimation=function(t,r,i,s,o,u,a,f,l){n.each(u,function(u,c){var h=c.data("yAxis"),p=n.isArray(f.y)?f.y[h]:f.y,d=l.y[h],v={enable:!1,left:-10,top:-10,right:10,bottom:10},m,g;if(!p||!d)return!0;!f.x.autoMax&&f.x.max<l.txx&&(v.enable=!0,v.right=0),!f.x.autoMin&&f.x.min>l.txn&&(v.enable=!0,v.left=0),!p.autoMax&&p.max<d.tyx&&(v.enable=!0,v.top=0),!p.autoMin&&p.min>d.tyn&&(v.enable=!0,v.bottom=0),a&&a.length&&s.enabled&&(r=s.duration,i=s.easing),c.tracker&&c.tracker.hide(),m=o.endX-o.startX-v.left+v.right,g=o.endY-o.startY-v.top+v.bottom,t||s.enabled?(c.wijAttr("clip-rect",Raphael.format("{0} {1} 0 {2}",o.startX+v.left,o.startY+v.top,g)),e.playPathAnimation(r,i,o,c,v,m,g)):e.setClipRect(v,c,o)})},e.playPathAnimation=function(e,t,r,i,s,o,u){var a=s.enable;i.wijAnimate({"clip-rect":Raphael.format("{0} {1} {2} {3}",r.startX+s.left,r.startY+s.top,o,u)},e,t,function(){this.tracker&&this.visible!==!1&&this.tracker.show();if(Raphael.vml&&!a){var e=null,t=null,r=this.node;r&&r.clipRect&&(e=this.attrs,delete e["clip-rect"],r.clipRect=null,t=n(r).parent(),t.before(r),t.remove(),this.attr(e),e.src&&e.src.length&&this.attr({src:e.src}),e.gradient&&e.gradient.length&&e.fill==="none"&&this.attr({fill:e.gradient}))}})},e.validateType=function(e){var t=!1;return e?(n.each(i,function(n,r){if(r===e)return t=!0,!1}),t):!0},e.renderSingleTrendLine=function(t,r,s,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x){var T=a.x,N,C,k=!1,L,A,O,M,_,D,P=[],H=[];if(!t.isValid||!t.innerData)return;L=n.extend(!0,{display:"show",fitType:i.strPolynom,order:2,sampleCount:100,visible:!0},t),A=n.extend(!0,{stroke:"black",opacity:1,fill:"none","stroke-linejoin":"round","stroke-linecap":"round"},r);if(f!==undefined){M=[].concat(L.data.x),_=[].concat(L.data.y);try{D=u.processValues(M,_,L.fitType,T.autoMin,T.autoMax,T.min,T.max,L.order,L.sampleCount,L.display,f)}catch(B){return}M=D.x,_=D.y}else M=[].concat(t.innerData.x),_=[].concat(t.innerData.y);if(l.length<=p||c.enabled&&!h.enabled)k=!0;return k&&_.length>0&&(N=o.getFirstValidListValue(S?M:_),C=o.getLastValidListValue(S?M:_)),n.each(_,function(t,n){P=e.renderPoint(d,H,P,k,N,C,M[t],n,a,t,S)}),e.renderPath(v,d,L,m,g,s,y,P,b,H,A,p,w,a,null,x),O=m[m.length-1],E.push({path:O,shadowPath:g[g.length-1],isTrendline:!0}),O.tracker&&O.tracker.toFront(),O.data("yAxis",t.yAxis?t.yAxis:0),O},e.prototype.renderTrendLineChart=function(t,r,i,s,u,a,f,l){var c=t.wijCSS,h=t.bounds,p=t.canvas,d=t.axis,v=t.animation,m=t.hole,g=t.seriesTransition,y=!1,b=t.seriesList,w=t.seriesStyles,E=t.seriesHoverStyles,S=this;S.annoPoints={},n.each(b,function(t,f){var y=e.renderSingleTrendLine(f,w[t],E[t],d,m,i,v,g,t,h,p,s,u,a,r,c,l),b,x;if(!y)return!0;b=o.getNumberValues(f.data.x),x=o.getNumberValues(f.data.y),S.annoPoints[t]==null&&(S.annoPoints[t]={}),n.each(b,function(e,n){S.annoPoints[t][e]=T.calculateDataPosition(n,x[e],S)})})},e.renderPath=function(t,r,i,u,a,f,l,c,h,p,d,v,m,g,y,b){var w,E,S,x,T,N,C,k,L=g.y.origin;k=r.endY,g&&g.y&&L!==null&&L!==undefined&&!isNaN(L)&&(k=e.calculatePoint(L,"y",g,r,y)),w=t.path(c.join(" ")),w.straight=p.join(" "),b!==!1&&o.paintShadow(w,1,"#cccccc"),v===0&&(c.length>1?(E=c[1],S=c[c.length-2]):(E=r.startX,S=r.endX)),x=t.path(c.join(" ")),w.tracker=x,d["stroke-width"]?T=10+parseFloat(d["stroke-width"]):T=10,x.attr({"stroke-width":T,stroke:"#C0C0C0",opacity:.01}),n.wijraphael.addClass(n(x.node),Raphael.format("{0} {1} {2}",m.canvasObject,m.trendlineElement,m.trendlineTracker)),n(x.node).data("owner",n(w.node)),C=n.extend(!0,{},d),C.fill&&delete C.fill,w.wijAttr(C),f.fill&&delete f.fill,h.push({path:n.extend(!0,{},w.attr())}),u||(u=[]),u.push(w),w.shadow&&(a[v]=w.shadow),l.push(w);if(!i.visible||i.display==="hide")w.hide(),w.tracker&&w.tracker.hide(),w.shadow&&w.shadow.hide(),w.visible=!1;i.index=v,i.type=s.strTrendline,i.path=w,i.lineStyle=d,i.lineHoverStyle=f,n.wijraphael.addClass(n(w.node),Raphael.format("{0} {1}",m.canvasObject,m.trendlineElement)),n(w.node).data("wijchartDataObj",i)},e.calculatePoint=function(e,t,n,r,i){var s=n[t].min,o=n[t].max,u,a,f,l;return i&&(t==="x"?t="y":t="x"),t==="x"?(a=(r.endX-r.startX)/(o-s),r.startX+(e-s)*a):(a=(r.endY-r.startY)/(o-s),r.endY-(e-s)*a)},e.renderPoint=function(t,n,r,i,s,o,u,a,f,l,c){var h=(c?t.endX:t.endY)-(c?t.startX:t.startY),p=c?f.y.min:f.x.min,d=c?f.x.min:f.y.min,v=c?f.y.max:f.x.max,m=c?f.x.max:f.y.max,g=h/(m-d),y=0,b,w,E;return y=e.calculatePoint(u,"x",f,t,c),b=e.calculatePoint(a,"y",f,t,c),c&&(w=y,y=b,b=w),i&&(E=s+(o-s)/(v-p)*((c?a:u)-p),E=(c?t.endX:t.endY)-(E-d)*g,n.push(l?"L":"M"),n.push(y),n.push(E)),r=r.concat([l?"L":"M",y,b]),r},e.bindLiveEvents=function(e,t,r,i,o,u,a,f,l,c,h){var p="",d={element:e,mousedown:function(t){if(l)return;var i=n(t.target),s,o=null;i.data("owner")&&(i=i.data("owner")),s=i.data("wijchartDataObj"),r.call(e,t,s)},mouseup:function(t){if(l)return;var r=n(t.target),s,o=null;r.data("owner")&&(r=r.data("owner")),s=r.data("wijchartDataObj"),i.call(e,t,s)},mouseover:function(t){if(l)return;var r=n(t.target),i,u=null,a;r.data("owner")&&(r=r.data("owner")),i=r.data("wijchartDataObj"),!h&&i&&i.type===s.strTrendline&&(a=i.path,a&&!a.removed&&i.lineHoverStyle&&a.wijAttr(i.lineHoverStyle)),o.call(e,t,i)},mouseout:function(t){if(l)return;var r=n(t.target),i,o=null,a;r.data("owner")&&(r=r.data("owner")),i=r.data("wijchartDataObj"),!h&&i&&i.type===s.strTrendline&&(a=i.path,a&&!a.removed&&i.lineStyle&&(i.lineStyle.fill&&delete i.lineStyle.fill,a.wijAttr(i.lineStyle))),u.call(e,t,i)},mousemove:function(t){if(l)return;var r=n(t.target),i,s=null;r.data("owner")&&(r=r.data("owner")),i=r.data("wijchartDataObj"),a.call(e,t,i)},click:function(t){if(l)return;var r=n(t.target),i,s=null;r.data("owner")&&(r=r.data("owner")),i=r.data("wijchartDataObj"),f.call(e,t,i)}};n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(p="wij"),e.on(p+"mousedown."+t,"."+c.trendlineElement,n.proxy(d.mousedown,d)).on(p+"mouseup."+t,"."+c.trendlineElement,n.proxy(d.mouseup,d)).on(p+"mouseover."+t,"."+c.trendlineElement,n.proxy(d.mouseover,d)).on(p+"mouseout."+t,"."+c.trendlineElement,n.proxy(d.mouseout,d)).on(p+"mousemove."+t,"."+c.trendlineElement,n.proxy(d.mousemove,d)).on(p+"click."+t,"."+c.trendlineElement,n.proxy(d.click,d))},e.unbindLiveEvents=function(e,t,n){e.off("."+t,"."+n.trendlineElement)},e.paintLegendIcon=function(e,t,r,i,s,o,u,a,f,l,c){var h,p;return p=o.path(Raphael.format("M{0},{1}L{2},{3}",e,t+i/2,e+r,t+i/2)),n(p.node).data("legendIndex",f).data("index",l),a.push(p),s&&(u&&u.height&&(h=u.height),p.attr(n.extend(!0,{},s,{"stroke-width":h}))),n.wijraphael.addClass(n(p.node),c),p},e.showSerieEles=function(e){e.path&&(e.path.show(),e.path.shadow&&e.path.shadow.show(),e.path.tracker&&e.path.tracker.show())},e.hideSerieEles=function(e){e.path&&(e.path.hide(),e.path.shadow&&e.path.shadow.hide(),e.path.tracker&&e.path.tracker.hide())},e.getSeriesChartType=function(e){if(!e)return;return e.isTrendline?s.strTrendline:e.type},e}();t.TrendlineRender=a,Raphael.fn.closeBtn=function(e,t,n){var r=Math.cos(45*Math.PI/180)*n,i=this.set(),s=["M",e-r,t-r,"L",e+r,t+r,"M",e-r,t+r,"L",e+r,t-r],o=this.path(s.join(" ")),u=null;return o.attr({cursor:"pointer"}),i.push(o),u=this.rect(e-n,t-n,n*2,n*2),u.attr({fill:"white","fill-opacity":0,cursor:"pointer",stroke:"none"}),i.push(u),i};var f=function(){function e(e,t,r){this.options={content:"",contentStyle:{},title:"",titleStyle:{},style:{fill:"white","fill-opacity":.5},closeBehavior:"auto",mouseTrailing:!0,triggers:"hover",animated:"fade",showAnimated:null,hideAnimated:null,duration:500,showDuration:500,hideDuration:500,easing:null,showEasing:null,hideEasing:null,showDelay:150,hideDelay:150,relativeTo:"mouse",compass:"east",offsetX:0,offsetY:0,showCallout:!0,calloutFilled:!1,calloutFilledStyle:{fill:"black"},calloutLength:12,calloutOffset:0,calloutAnimation:{easing:null,duration:500},windowCollisionDetection:"flip",calloutSide:null,width:null,height:null,beforeShowing:null},this.paper=e,this.targets=t,n.extend(this.options,r),this.init()}return e.prototype.init=function(){var e=this.options;n.browser.msie&&document.documentMode<=8&&(e.style.fill&&(this.fillColorForIE8=o.toHexColor(e.style.fill)),e.style.stroke&&(this.strokeColorForIE8=o.toHexColor(e.style.stroke))),this.calloutOffset=e.calloutOffset,this.offsetLength=0,this.gapLength=e.calloutLength/2,this.width=e.width,this.height=e.height,this.offset={x:0,y:0},this.toolTipShown=!1,this.targets&&this._bindLiveEvent(this.targets),this.selector&&this._bindLiveEventBySelector(this.selector),this.isContentHtml=!1,n(this.paper.canvas).wijtooltip&&(this.isContentHtml=e.isContentHtml),this._initializeHTMLToolTips()},e.prototype._initializeHTMLToolTips=function(){var e=this;if(!this.isContentHtml)return;var t=this.options,r,i,s,o,u,a,f,l,c;this.toolTipTarget=n(this.paper.canvas),l=this._getHTMLTooltipPositionMY(t.compass),f=t.closeBehavior==="sticky"?"sticky":"none",r=t.showAnimated||t.animated,i=t.showDuration||t.duration,s=t.showEasing||t.easing,o=t.hideAnimated||t.animated,u=t.hideDuration||t.duration,a=t.hideEasing||t.easing,c={triggers:"custom",closeBehavior:f,showCallout:t.showCallout,position:{my:l,at:"center center"},animation:null,showDelay:t.showDelay,hideDelay:t.hideDelay,showAnimation:{animated:r,duration:i,easing:s},hideAnimation:{animated:o,duration:u,easing:a},shown:function(t,n){e._setHTMLToolTipMovingDuration(),e.toolTipShown=!0},hidden:function(t,n){e._revoverHTMLToolTipShowingDuration(),e.toolTipShown=!1}},this.toolTipTarget.wijtooltip(c)},e.prototype._setHTMLToolTipMovingDuration=function(){if(!this.isContentHtml)return;var e=this.options,t=this.toolTipTarget,r;this.toolTipShown||(r=t.wijtooltip("option","showAnimation"),r=n.extend(r,{duration:250}),t.wijtooltip("option","showAnimation",r))},e.prototype._revoverHTMLToolTipShowingDuration=function(){if(!this.isContentHtml)return;var e=this.options,t=this.toolTipTarget,r;this.toolTipShown&&(r=t.wijtooltip("option","showAnimation"),r=n.extend(r,{duration:e.showDuration||e.duration}),t.wijtooltip("option","showAnimation",r))},e.prototype._getHTMLTooltipPositionMY=function(e){var t="center bottom";switch(e){case"north":t="center bottom";break;case"south":t="center top";break;case"east":t="left center";break;case"west":t="right center";break;case"eastnorth":t="bottom left";break;case"northeast":t="left bottom";break;case"westnorth":t="bottom right";break;case"northwest":t="right bottom";break;case"eastsouth":t="top left";break;case"southeast":t="left top";break;case"westsouth":t="top right";break;case"southwest":t="right top"}return t},e.prototype._getShowPoint=function(e,t){var n=e.getBBox(),r={x:0,y:0};switch(t.toLowerCase()){case"east":r.x=n.x+n.width,r.y=n.y+n.height/2;break;case"eastnorth":r.x=n.x+n.width,r.y=n.y;break;case"eastsouth":r.x=n.x+n.width,r.y=n.y+n.height;break;case"west":r.x=n.x,r.y=n.y+n.height/2;break;case"westnorth":r.x=n.x,r.y=n.y;break;case"westsouth":r.x=n.x,r.y=n.y+n.height;break;case"north":r.x=n.x+n.width/2,r.y=n.y;break;case"northeast":r.x=n.x+n.width,r.y=n.y;break;case"northwest":r.x=n.x,r.y=n.y;break;case"south":r.x=n.x+n.width/2,r.y=n.y+n.height;break;case"southeast":r.x=n.x+n.width,r.y=n.y+n.height;break;case"southwest":r.x=n.x,r.y=n.y+n.height}return r},e.prototype._clearIntentTimer=function(e){e&&(window.clearTimeout(e),e=null)},e.prototype._removeSVGTooltip=function(t){var n=this,r=this,i=this.elements,s=r.options,o,u,a;if(i){if(s.hideAnimated||s.animated)o=s.hideAnimated,o||(o=s.animated),o&&e.animations[o]&&(a={animated:o,duration:s.hideDuration||s.duration,easing:s.hideEasing||s.easing,context:i,show:!1},e.animations[o](a));u=s.hideDuration||s.duration,t&&(u=t),window.setTimeout(function(){var e,t;n.content&&(n.content.wijRemove(),n.content=null),n.title&&(n.title.wijRemove(),n.title=null),n.container&&(n.container.wijRemove(),n.container=null);if(n.closeBtn){for(e=0,t=n.closeBtn.length;e<t;e++)n.closeBtn[e].unclick();n.closeBtn.wijRemove(),n.closeBtn=null}n.callout&&(n.callout.wijRemove(),n.callout=null),r.lastPoint=null,i=null},u)}},e.prototype._removeHTMLTooltip=function(){var e=this.options;e.closeBehavior!=="sticky"&&this.toolTipTarget.wijtooltip("hide")},e.prototype._removeTooltip=function(e){this.isContentHtml?this._removeHTMLTooltip():this._removeSVGTooltip(e)},e.prototype._clearTimers=function(){this.intentShowTimer&&this._clearIntentTimer(this.intentShowTimer),this.intentHideTimer&&this._clearIntentTimer(this.intentHideTimer)},e.prototype._hide=function(e){var t=this;t._clearTimers(),t.options.hideDelay?t.intentHideTimer=window.setTimeout(function(){t._removeTooltip()},t.options.hideDelay):t._removeTooltip()},e.prototype._convertCompassToPosition=function(e){var t="",n={x:0,y:0};switch(e.toLowerCase()){case"east":t="right-middle",n.x=2,n.y=0;break;case"eastnorth":t="right-top",n.x=2,n.y=-2;break;case"eastsouth":t="right-bottom",n.x=2,n.y=2;break;case"west":t="left-middle",n.x=-2,n.y=0;break;case"westnorth":t="left-top",n.x=-2,n.y=-2;break;case"westsouth":t="left-bottom",n.x=-2,n.y=2;break;case"north":t="top-middle",n.x=0,n.y=-2;break;case"northeast":t="top-right",n.x=2,n.y=-2;break;case"northwest":t="top-left",n.x=-2,n.y=-2;break;case"south":t="bottom-middle",n.x=0,n.y=2;break;case"southeast":t="bottom-right",n.x=2,n.y=2;break;case"southwest":t="bottom-left",n.x=-2,n.y=2}return this.offset=n,t},e.prototype._getCalloutArr=function(e,t){var n=[],r=this.options,i=r.compass;r.calloutSide&&(i=r.calloutSide);switch(i.toLowerCase()){case"east":case"eastsouth":case"eastnorth":n=["M",e.x+t,e.y+t,"l",-t,-t,"l",t,-t,"Z"];break;case"west":case"westsouth":case"westnorth":n=["M",e.x-t,e.y-t,"l",t,t,"l",-t,t,"Z"];break;case"north":case"northeast":case"northwest":n=["M",e.x-t,e.y-t,"l",t,t,"l",t,-t,"Z"];break;case"south":case"southeast":case"southwest":n=["M",e.x-t,e.y+t,"l",t,-t,"l",t,t,"Z"]}return n},e.prototype._getFuncText=function(e,t){if(n.isFunction(e)){var r=null,i,s={target:null,fmt:e},o;if(t&&t.target){o=t.target;if(!o.raphael||!o.raphaelid)o=o.parentNode;o.raphael&&o.raphaelid?(i=this.paper.getById(o.raphaelid),s.target=i):s.target=t.target}return r=n.proxy(s.fmt,s),r().toString()}return e},e.prototype._translateCallout=function(e){var t=this.options,n=this.width,r=this.height,i=this.gapLength,s=this.offsetLength,o=this.calloutOffset,u=this.tooltipElements.callout;if(t.calloutSide){var a=i||s;switch(t.calloutSide){case"south":case"north":e?u.animate({translation:-n/2+a+o+",0"},e):u.translate(-n/2+a+o,0);break;case"east":case"west":e?u.animate({translation:"0,"+(-r/2+a+o)},e):u.translate(0,-r/2+a+o)}}},e.replacer=function(e,t,n){var r=n,i=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;return t.replace(i,function(e,t,n,i,s){t=t||i,r&&(r[t]!=="string"&&(r=r[t]),typeof r=="function"&&s&&(r=r()))}),r=(r===null||r===n?e:r).toString(),r},e.fill=function(t,n){var r=/\{([^\}]+)\}/g;return String(t).replace(r,function(t,r){return e.replacer(t,r,n)})},e.prototype._createPath=function(t,n,r){var i=n.split("-"),s=5,o=r.getBBox(),u=this.options,a=u.padding,f=this.gapLength,l=this.offsetLength,c=a&&!isNaN(a)?parseInt(a):0,h=Math.round(o.width+c*2),p=Math.round(o.height+c*2),d=Math.round(o.x-c)-s,v=Math.round(o.y-c)-s,m=0,g=0,y=0,b=0,w=null,E=null,S=null;u.width&&(h=h>u.width?h:u.width),u.height&&(p=p>u.height?p:u.height),this.width=h,this.height=p,m=Math.min(p/4,h/4,f),l&&(l=Math.min(p/4,h/4,l)),l?(g=l,w={top:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}l-{right},0-{offset},0,-{left},0a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",bottom:"M{x},{y}l{left},0,{offset},0,{right},0a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",right:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}l0-{bottom},0-{offset},0-{top}a{r},{r},0,0,1,{r}-{r}z",left:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}l0,{top},0,{offset},0,{bottom}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z"}):w={top:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}l-{right},0-{gap},{gap}-{gap}-{gap}-{left},0a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",bottom:"M{x},{y}l{left},0,{gap}-{gap},{gap},{gap},{right},0a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",right:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}l0-{bottom}-{gap}-{gap},{gap}-{gap},0-{top}a{r},{r},0,0,1,{r}-{r}z",left:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}l0,{top},{gap},{gap}-{gap},{gap},0,{bottom}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z"},E=[{x:d+s,y:v,w:h,w4:h/4,h4:p/4,left:0,right:h-m*2-g*2,top:0,bottom:p-m*2-g*2,r:s,h:p,gap:m,offset:g*2},{x:d+s,y:v,w:h,w4:h/4,h4:p/4,left:h/2-m-g,right:h/2-m-g,top:p/2-m-g,bottom:p/2-m-g,r:s,h:p,gap:m,offset:g*2},{x:d+s,y:v,w:h,w4:h/4,h4:p/4,right:0,left:h-m*2-g*2,bottom:0,top:p-m*2-g*2,r:s,h:p,gap:m,offset:g*2}][i[1]==="middle"?1:(i[1]==="left"||i[1]==="top"?1:0)*2],S=this.paper.path(e.fill(w[i[0]],E));switch(i[0]){case"top":y=t.x-(d+s+E.left+m+l),b=t.y-(v+s+p+s+m+l);break;case"bottom":y=t.x-(d+s+E.left+m+l),b=t.y-(v-m-l);break;case"left":y=t.x-(d+s+h+s+m+l),b=t.y-(v+s+E.top+m+l);break;case"right":y=t.x-(d-m-g),b=t.y-(v+s+E.top+m+g)}return S.translate(y,b),r.transform(Raphael.format("...t{0},{1}",y,b)),S},e.prototype._isWindowCollision=function(e,t,r,i,s,o,u){var a=e.getBBox(),f=0,l=t.toLowerCase(),c=a.x+s,h=a.y+o,p=this.paper.width,d=this.paper.height,v=r,m=i,g=e.attr("stroke-width"),y=u===!0||u==="flip";return Raphael.vml&&(p=n(this.paper.canvas).width(),d=n(this.paper.canvas).height()),c-g<0&&(y?l.toLowerCase().indexOf("west")===-1?c+a.width/2+a.width-r<=p&&(f++,l=l.toLowerCase()+"east",v=0-r):c+a.width+a.width-r<=p&&(f++,l=l.toLowerCase().replace("west","east"),v=0-r):(f++,v=0-c+g+r)),h-g<0&&(y?l.toLowerCase().indexOf("north")===-1?h+a.height/2+a.height-i<=d&&(f++,l=l.toLowerCase()+"south",m=0-i):h+a.height+a.height-i<=d&&(f++,l=l.toLowerCase().replace("north","south"),m=0-i):(f++,m=0-h+g+i)),c+a.width+g>p&&(y?l.toLowerCase().indexOf("east")===-1?c-a.width/2-r>=0&&(f++,l=l.toLowerCase()+"west",v=0-r):c-a.width-r>=0&&(f++,l=l.toLowerCase().replace("east","west"),v=0-r):(f++,v=p-(c+a.width+g)+r)),h+a.height+g>d&&(y?l.toLowerCase().indexOf("south")===-1?h-a.height/2-i>=0&&(f++,l=l.toLowerCase()+"north",m=0-i):h-a.height-i>=0&&(f++,l=l.toLowerCase().replace("south","north"),m=0-i):(f++,m=d-(h+a.height+g)+i)),f?{compass:l,offsetX:v,offsetY:m}:!1},e.prototype._createHTMLTooltipEles=function(e,t,n,r,i,s,o){var u=this.options,a,f,l=this.toolTipTarget,c,h,p,d,v="",m="",g;f=this._getPointOffset(i),c={x:0,y:0},c.x=l.parent().offset().left,c.y=l.parent().offset().top,a={},a.x=e.x+c.x+f.x+s,a.y=e.y+c.y+f.y+o,h="",t&&t.length>0&&(p=t.replace(/(?:\r\n|\n|\r)/g,"<br>"),u.titleStyle&&(v="color:"+u.titleStyle.fill+";font-size:"+u.titleStyle["font-size"]),h+="<div style='"+v+"'>"+p+"</div>"),n&&n.length>0&&(d=n.replace(/(?:\r\n|\n|\r)/g,"<br>"),u.contentStyle&&(m="color:"+u.contentStyle.fill+";font-size:"+u.contentStyle["font-size"]+";font-family:"+u.contentStyle["font-family"]),h+="<div style='"+m+"'>"+d+"</div>"),l.wijtooltip("option","content",h),l.wijtooltip("showAt",a)},e.prototype._getPointOffset=function(e){var t=2,n={x:0,y:0};switch(e){case"north":n.x=0,n.y=-t;break;case"south":n.x=0,n.y=t;break;case"east":n.x=t,n.y=0;break;case"west":n.x=-t,n.y=0;case"northeast":case"eastnorth":n.x=t,n.y=-t;break;case"northwest":case"westnorth":n.x=-t,n.y=-t;break;case"southeast":case"eastsouth":n.x=t,n.y=t;break;case"southwest":case"westsouth":n.x=-t,n.y=t}return n},e.prototype._createSVGTooltipEles=function(t,r,i,s,o,u,a){var f=this,l,c,h,p=this.paper.set(),d=null,v=null,m=this.options,g=this.closeBtnLength,y=this.calloutOffset,b=null,w=0,E=0,S=250,x=0,T=0,N,C={x:t.x,y:t.y},k=this.offset,L=null,A=null;n.wijraphael.clearRaphaelCache(),h=this._convertCompassToPosition(o),C.x+=u+k.x,C.y+=a+k.y,this.elements=this.paper.set(),this.title&&(n.each(this.title,function(e,t){n(t.node).unbind(".Rtooltip")}),this.title.wijRemove()),r&&r.length>0?(this.title=this.paper.htmlText(-1e3,-1e3,r,m.titleStyle),this.elements.push(this.title),l=this.title.getBBox()):l={left:-1e3,top:-1e3,width:0,height:0},this.content&&(n.each(this.content,function(e,t){n(t.node).unbind(".Rtooltip")}),this.content.wijRemove()),i&&i.length>0?(this.content=this.paper.htmlText(-1e3,-1e3,i,m.contentStyle),this.elements.push(this.content),c=this.content.getBBox()):c={left:-1e3,top:-1e3,width:0,height:0};if(this.closeBtn){for(x=0,T=this.closeBtn.length;x<T;x++)this.closeBtn[x].unclick();this.closeBtn.wijRemove()}this.content&&this.content.transform(Raphael.format("T0,{0}",l.height/2+c.height/2)),this.title&&this.title.transform(Raphael.format("T0,{0}",0)),m.closeBehavior==="sticky"&&(this.closeBtn=this.paper.closeBtn(-1e3,-1e3,g),this.elements.push(this.closeBtn),m.width&&m.width>l.width+g*2&&m.width>c.width+g*2?this.closeBtn.transform(Raphael.format("T{0},{1}",m.width-g,g)):l.width>=c.width-g*2?this.closeBtn.transform(Raphael.format("T{0},{1}",l.width+g,g)):this.closeBtn.transform(Raphael.format("T{0},{1}",c.width-g,g)),n.each(this.closeBtn,function(e,t){var n=f;t.click(function(e){n._hide(e)})})),this.title&&(p.push(this.title),m.relatedElement&&this.title.insertBefore(m.relatedElement)),this.content&&(p.push(this.content),m.relatedElement&&this.content.insertBefore(m.relatedElement)),this.closeBtn&&(p.push(this.closeBtn),m.relatedElement&&this.closeBtn.insertBefore(m.relatedElement)),m.showCallout||(this.gapLength=0);if(m.calloutSide||m.calloutFilled)this.gapLength=0,this.offsetLength=m.calloutLength/2,m.calloutSide&&(h=this._convertCompassToPosition(m.calloutSide));m.calloutSide&&p.length===0&&(this.content=this.paper.htmlText(-1e3,-1e3," "),p.push(this.content),m.relatedElement&&this.content.insertBefore(m.relatedElement)),this.callout&&(n(this.callout.node).unbind(".Rtooltip"),this.callout.wijRemove()),this.container&&(n(this.container.node).unbind(".Rtooltip"),this.container.wijRemove());if(this.lastPoint){m.showCallout&&(m.calloutSide||m.calloutFilled)&&(d=this._getCalloutArr(this.lastPoint,this.offsetLength),this.callout=this.paper.path(d.concat(" ")),m.relatedElement&&this.callout.insertBefore(m.relatedElement),m.calloutFilled&&this.callout.attr(m.calloutFilledStyle),m.calloutSide&&this._translateCallout(0)),this.container=this._createPath(this.lastPoint,h,p),m.relatedElement&&this.container.insertBefore(m.relatedElement);if(s){N=this._isWindowCollision(this.container,o,u,a,C.x-this.lastPoint.x,C.y-this.lastPoint.y,s);if(N){this._createTooltipEles(t,r,i,!1,N.compass,N.offsetX,N.offsetY);return}}this.elements.push(this.callout),this.elements.push(this.container),w=C.x-this.lastPoint.x,E=C.y-this.lastPoint.y,A=Raphael.format("...T{0},{1}",w,E),L=Raphael.animation({transform:A},S),this.container&&(m.showAnimated||m.animated?this.container.animate(L):this.container.attr("transform",A)),this.title&&(m.showAnimated||m.animated?this.title.animate(L):this.title.attr("transform",A)),this.content&&(m.showAnimated||m.animated?this.content.animate(L):this.content.attr("transform",A)),this.closeBtn&&(m.showAnimated||m.animated?this.closeBtn.animate(L):this.closeBtn.attr("transform",A)),this.callout&&(m.showAnimated||m.animated?this.callout.animate(L):this.callout.attr("transform",A))}else{m.showCallout&&(m.calloutSide||m.calloutFilled)&&(d=this._getCalloutArr(C,this.offsetLength),this.callout=this.paper.path(d.concat(" ")),m.relatedElement&&this.callout.insertBefore(m.relatedElement),m.calloutFilled&&this.callout.attr(m.calloutFilledStyle),m.calloutSide&&this._translateCallout(0)),this.container=this._createPath(C,h,p),m.relatedElement&&this.container.insertBefore(m.relatedElement);if(s){N=this._isWindowCollision(this.container,o,u,a,0,0,s);if(N){this._createTooltipEles(t,r,i,!1,N.compass,N.offsetX,N.offsetY);return}}this.elements.push(this.callout),this.elements.push(this.container);if(m.showAnimated||m.animated)v=m.showAnimated,v||(v=m.animated),v&&e.animations[v]&&(b={animated:v,duration:m.showDuration||m.duration,easing:m.showEasing||m.easing,context:this.elements,show:!0},e.animations[v](b))}this.lastPoint=C,n.browser.msie&&document.documentMode<=8?this.container.attr(n.extend({},m.style,{fill:this.fillColorForIE8,stroke:this.strokeColorForIE8})):this.container.attr(m.style),m.relatedElement?(this.title&&this.title.insertBefore(m.relatedElement),this.content&&this.content.insertBefore(m.relatedElement),this.closeBtn&&this.closeBtn.insertBefore(m.relatedElement)):p.toFront()},e.prototype._createTooltipEles=function(e,t,n,r,i,s,o){this.isContentHtml?this._createHTMLTooltipEles(e,t,n,r,i,s,o):this._createSVGTooltipEles(e,t,n,r,i,s,o)},e.prototype._createTooltip=function(e,t){var r=null,i=null,s=null,o=null,u=this.options,a,f;if(n.isFunction(u.beforeShowing)){s=null,o={target:null,options:u,fmt:u.beforeShowing};if(t&&t.target){f=t.target;if(!f.raphael||!f.raphaelid)f=f.parentNode;f.raphael&&f.raphaelid?(a=this.paper.getById(f.raphaelid),o.target=a):(a=t.target,o.target=a)}s=n.proxy(o.fmt,o);if(s()===!1)return}r=u.title,i=u.content,r=this._getFuncText(r,t),i=this._getFuncText(i,t);if(!r&&!i)return;this._createTooltipEles(e,r,i,u.windowCollisionDetection,u.compass,u.offsetX,u.offsetY)},e.prototype._showAt=function(e,t){var n=this.options,r=this;this._clearTimers(),n.showDelay?this.intentShowTimer=window.setTimeout(function(){r._createTooltip(e,t)},n.showDelay):this._createTooltip(e,t)},e.prototype._show=function(e){var t=n(this.paper.canvas.parentNode).offset(),r=t.left,i=t.top,s=this.options,o=s.relativeTo,u={x:0,y:0},a=null,f=e.target;switch(o){case"mouse":u.x=e.pageX-r,u.y=e.pageY-i;break;case"element":if(!f.raphael||!f.raphaelid)f=f.parentNode;f.raphael&&f.raphaelid&&(a=this.paper.getById(f.raphaelid),u=this._getShowPoint(a,s.compass))}this._showAt(u,e)},e.prototype._bindEvent=function(e){var t=this.options,r=this;switch(t.triggers){case"hover":n(e.node).bind("mouseover.Rtooltip",function(e){r._show(e)}).bind("mouseout.Rtooltip",function(e){t.closeBehavior==="auto"&&r._hide(e)}),t.mouseTrailing&&t.relativeTo==="mouse"&&n(e.node).bind("mousemove.Rtooltip",function(e){r._show(e)});break;case"click":n(e.node).bind("click.Rtooltip",function(e){r._show(e)});break;case"custom":}},e.prototype._bindLiveEvent=function(e){var t,n;if(e)if(e.length)for(t=0,n=e.length;t<n;t++)this._bindEvent(e[t]);else this._bindEvent(e)},e.prototype._bindLiveEventBySelector=function(e){var t=this.options,n=this;if(e)switch(t.triggers){case"hover":e.on("mouseover.Rtooltip",function(e){n._show(e)}).on("mouseout.Rtooltip",function(e){t.closeBehavior==="auto"&&n._hide(e)}),t.mouseTrailing&&t.relativeTo==="mouse"&&e.on("mousemove.Rtooltip",function(e){n._show(e)});break;case"click":e.on("click.Rtooltip",function(e){n._show(e)});break;case"custom":}},e.prototype._unbindLiveEvent=function(e,t){var r,i;if(e)if(e.length)for(r=0,i=e.length;r<i;r++)n(e[r].node).unbind(".Rtooltip");else n(e.node).unbind(".Rtooltip");t&&t.off("Rtooltip").off(".Rtooltip")},e.prototype._destroy=function(){this._unbindLiveEvent(this.targets,this.selector),this._removeTooltip(0),this.isContentHtml&&n(this.paper.canvas).wijtooltip("destroy")},e.prototype.hide=function(e){typeof e=="undefined"&&(e=!1);var t=this,n=t.options,r=n.hideDelay,i=n.hideDuration;e?(n.hideDelay=0,n.hideDuration=0,t._hide(),n.hideDelay=r,n.hideDuration=i):t._hide()},e.prototype.showAt=function(e,t){this._showAt(e,t)},e.prototype.resetCalloutOffset=function(e){var t=this.options,n=t.calloutOffset,r=t.calloutSide,i=t.calloutAnimation,s=this.tooltipElements;s.callout&&(r==="south"||r==="north"?s.callout.animate({translation:e-n+",0"},i.duration,i.easing):(r==="east"||r==="west")&&s.callout.animate({translation:"0,"+(e-n)},i.duration,i.easing)),t.calloutOffset=e},e.prototype.destroy=function(){this._destroy()},e.prototype.getOptions=function(){return this.options},e.prototype.setTargets=function(e){this.targets=e,this._bindLiveEvent(e)},e.prototype.setSelector=function(e){this.selector=e,this._bindLiveEventBySelector(e)},e.prototype.setOptions=function(e){n.extend(!0,this.options,e)},e.animations={fade:function(e){var t=e.context;e.show?(t.attr({opacity:0}),t.wijAnimate({opacity:1},e.duration,e.easing)):t.wijAnimate({opacity:0},e.duration,e.easing)}},e}();t.ChartTooltip=f,Raphael.fn.tooltip={animations:f.animations};var l=function(){function e(e){this.labels=[],this.crossLabels={},this.bBox=e}return e.prototype.push=function(e){var t=e.wijGetBBox();this.labels.push({ele:e,x:t.x,y:t.y,width:t.width,height:t.height,overlaps:[],bakBBox:t})},e.prototype.pushCross=function(e,t){var n,r,i,s,o;!this.crossLabels[Raphael.format("{0}-{1}",e,t)]&&!this.crossLabels[Raphael.format("{0}-{1}",t,e)]&&(n=this.labels[e],r=this.labels[t],this.crossLabels[Raphael.format("{0}-{1}",e,t)]={label1:n,label2:r,dx:this._getAdjust(n,r,"h"),dy:this._getAdjust(n,r,"v")})},e.prototype._detect=function(e,t){return(e.x+e.width>t.x&&e.x<t.x||t.x+t.width>e.x&&t.x<e.x)&&(e.y+e.height>t.y&&e.y<t.y||t.y+t.height>e.y&&t.y<e.y)},e.prototype._resetOverlaps=function(){this.crossLabels={}},e.prototype._detects=function(){var e=this.labels.length,t,n;for(var r=0;r<e;r++)for(var i=r+1;i<e;i++)t=this.labels[r],n=this.labels[i],this._detect(t,n)&&this.pushCross(r,i)},e.prototype._getAdjust=function(e,t,n){var r={dx:0,needRevert:!1};return n==="h"?e.x<t.x?r.dx=e.x+e.width-t.x:(r.dx=t.x+t.width-e.x,r.needRevert=!0):e.y<t.y?r.dx=e.y+e.height-t.y:(r.dx=t.y+t.height-e.y,r.needRevert=!0),r},e.prototype._adjustlabel=function(e,t,n,r){r==="h"?(e.x-=n/2,t.x+=n/2,this.bBox&&(e.x<this.bBox.x?(e.x=this.bBox.x,t.x=t.x+(this.bBox.x-e.x)):t.x>this.bBox.x+this.bBox.width&&(t.x=this.bBox.x+this.bBox.width,e.x-=t.x-this.bBox.x+this.bBox.width))):(e.y-=n/2,t.y+=n/2,this.bBox&&(e.y<this.bBox.y?(e.y=this.bBox.y,t.y=t.y+(this.bBox.y-e.y)):t.y>this.bBox.y+this.bBox.height&&(t.y=this.bBox.y+this.bBox.height,e.y-=t.y-this.bBox.y+this.bBox.height)))},e.prototype._adjustInternal=function(){var e=this;n.each(this.crossLabels,function(t,n){var r=n.label1,i=n.label2,s=n.dx,o=n.dy;s.dx<o.dx?o.needRevert?e._adjustlabel(i,r,o.dx,"v"):e._adjustlabel(r,i,o.dx,"v"):s.needRevert?e._adjustlabel(i,r,s.dx,"h"):e._adjustlabel(r,i,s.dx,"h")})},e.prototype._adjustTheEdge=function(){var e=this;this.bBox&&n.each(this.labels,function(t,n){n.x<e.bBox.x?n.x=e.bBox.x:n.x+n.width>e.bBox.x+e.bBox.width&&(n.x=e.bBox.x+e.bBox.width-n.width),n.y<e.bBox.y?n.y=e.bBox.y:n.y+n.height>e.bBox.y+e.bBox.height&&(n.y=e.bBox.y+e.bBox.height-n.height)})},e.prototype._translateLabels=function(){n.each(this.labels,function(e,t){t.x!==t.bakBBox.x&&(t.ele.attr("x",t.x+t.width/2),t.bakBBox.x=t.x),t.y!==t.bakBBox.y&&(t.ele.attr("y",t.y+t.height/2),t.bakBBox.y=t.y)})},e.prototype.adjust=function(){var e=1e3;while(e>0){this._resetOverlaps(),this._adjustTheEdge(),this._detects();if(n.isEmptyObject(this.crossLabels))break;e--,this._adjustInternal()}this._translateLabels()},e}();t.AdjustLabel=l;var c=function(e){function t(){e.apply(this,arguments),this.innerState={}}return __extends(t,e),t.prototype._setOption=function(r,i){var s=this,o=s.options,u=null,a=0,f=0,l=o.axis.x.tickMajor.factor,c=o.axis.x.tickMinor.factor,h,p,d,v,m,g=t.prototype.options.axis,y,b;if(r==="dataSource")s.seriesTransition=!0,o.dataSource=i,s.seriesList&&(o.seriesList=n.arrayClone(s.seriesList)),s._init();else if(r==="data")s.seriesTransition=!0,o.data=i,s.seriesList&&(o.seriesList=n.arrayClone(s.seriesList)),s._init();else if(r==="seriesList"){i||(i=[]),u=n.Event("beforeserieschange");if(s._trigger("beforeSeriesChange",u,{oldSeriesList:o.seriesList,newSeriesList:i})===!1)return!1;o.seriesList=i,s.seriesList=n.arrayClone(i),s._trigger("seriesChanged",null,i),s.seriesTransition=!0,s._seriesListSeted(),s._init()}else n.isPlainObject(o[r])?(r==="axis"&&(n.isArray(o.axis.y)?d=n.arrayClone([].concat(o.axis.y)):d=n.extend(!0,{},o.axis.y)),r==="axis"?(b=n.extend(!0,{},i),s._verifyAxisAutoMinMax(b),n.extend(!0,o.axis.x,b.x||{}),n.isArray(o.axis.y)||n.isArray(b.y)?y={}:y=o.axis.y,n.isArray(b.y)?(n.each(b.y,function(e,t){b.y[e]=n.extend(!0,{},g.y,y,t)}),o.axis.y=b.y):o.axis.y=n.extend(!0,{},g.y,y,b.y)):n.extend(!0,o[r],i),r==="indicator"&&(this._unbindCanvasEvents(),this._bindCanvasEvents()),r==="axis"&&(v=o.axis.y,o.axis.x.tickMajor.factor<0&&(o.axis.x.tickMajor.factor=l),o.axis.x.tickMinor.factor<0&&(o.axis.x.tickMinor.factor=c),n.isArray(v)?(n.isArray(d)||(d=[d]),n.each(v,function(e,t){var n=d[e]||{};n.tickMajor&&n.tickMajor.factor&&t.tickMajor&&t.tickMajor.factor&&t.tickMajor.factor<0&&(t.tickMajor.factor=n.tickMajor.factor),n.tickMinor&&n.tickMinor.factor&&t.tickMinor&&t.tickMinor.factor&&t.tickMinor.factor<0&&(t.tickMinor.factor=n.tickMinor.factor)})):(n.isArray(d)?(h=d[0].tickMajor.factor,p=d[0].tickMinor.factor):(l=d.tickMajor.factor,c=d.tickMinor.factor),o.axis.y.tickMajor&&o.axis.y.tickMajor.factor!==undefined&&o.axis.y.tickMajor.factor<0&&(o.axis.y.tickMajor.factor=h),o.axis.y.tickMinor&&o.axis.y.tickMinor.factor!==undefined&&o.axis.y.tickMinor.factor<0&&(o.axis.y.tickMinor.factor=p)))):e.prototype._setOption.call(this,r,i);r==="autoResize"&&(s._unbindResizeEvent(),s._bindResizeEvent());if(r==="seriesTransition"||r==="animation")return;if(r==="hint"){s._resetTooltip();return}a=o.seriesList.length;if(r==="seriesList"||r==="seriesStyles"||r==="seriesHoverStyles")r!=="seriesList"&&s._handleChartStyles(),s.styles={style:[].concat(o.seriesStyles.slice(0,o.seriesStyles.length)),hoverStyles:[].concat(o.seriesHoverStyles.slice(0,o.seriesHoverStyles.length))},s._initStyles();if(r==="seriesList"||r==="seriesHoverStyles"){m=o.seriesHoverStyles.length;for(f=m;f<a;f++)o.seriesHoverStyles[f]=o.seriesHoverStyles[f%m]}(r==="height"||r==="width")&&s.chartElement[r](i);if(r==="culture"||r==="cultureCalendar")s._innerCulture=null,s._resetCulture();s.redraw()},t.prototype._innerDisable=function(){e.prototype._innerDisable.call(this),this._handleDisabledOption(!0,this.chartElement)},t.prototype._innerEnable=function(){e.prototype._innerEnable.call(this),this._handleDisabledOption(!1,this.chartElement)},t.prototype._toggleDisable=function(){var e=this,t=e.element;e._isDisabled()?(e._opacityHolder=t.css("opacity"),t.css("opacity",r)):t.css("opacity",e._opacityHolder)},t.prototype._isTrendline=function(e){return e.isTrendline||e.type===s.strTrendline?!0:!1},t.prototype._preHandleSeriesData=function(){var e=this,t=e.options,r=t.seriesList,i=t.axis;n.each(r,function(t,r){var s=r.data,o=[],a=[],f,l,c;if(!e._isTrendline(r))return!0;if(s.xy&&n.isArray(s.xy)&&s.xy.length){f=s.xy.length;while(l<f)o.push(s.xy[l++]),a.push(s.xy[l++]);s.x=o,s.y=a}else s.x||(o=[],n.each(a,function(e){o.push(e)}),s.x=o);try{c=u.processValues(s.x,s.y,r.fitType,i.x.autoMin,i.x.autoMax,i.x.min,i.x.max,r.order,r.sampleCount,r.display,undefined)}catch(h){c=undefined}c===undefined?r.isValid=!1:(r.isValid=!0,r.innerData=c)})},t.prototype._seriesListSeted=function(){},t.prototype._initStyles=function(){var e=this.options,t=e.seriesStyles,n=e.seriesHoverStyles,r,i,s,o;e.seriesList&&(i=e.seriesList.length||0),e.seriesStyles&&(r=e.seriesStyles.length||0),e.seriesHoverStyles&&(s=e.seriesHoverStyles.length||0);if(i>r&&r)for(o=r;o<i;o++)t[o]=t[o%r];if(i>s&&s)for(o=s;o<i;o++)n[o]=n[o%s]},t.prototype._verifyAxisAutoMinMax=function(e){var t=function(e){return e===null||typeof e=="undefined"};e.x&&(t(e.x.min)?e.x.autoMin=!0:e.x.autoMin=!1,t(e.x.max)?e.x.autoMax=!0:e.x.autoMax=!1);if(e.y)if(n.isArray(e.y))n.each(e.y,function(e,n){t(n.min)?n.autoMin=!0:n.autoMin=!1,t(n.max)?n.autoMax=!0:n.autoMax=!1});else{var r=e.y;t(r.min)?r.autoMin=!0:r.autoMin=!1,t(r.max)?r.autoMax=!0:r.autoMax=!1}},t.prototype._addChartVisibilityObserver=function(){var e=this,t=e.element;if(t.is(":hidden")&&t.wijAddVisibilityObserver){if(t.hasClass("wijmo-wijobserver-visibility"))return;t.wijAddVisibilityObserver(function(){e.redraw(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijchart")}},t.prototype._create=function(){var t=this,r=t.options,i=r.width||t.element.width(),s=r.height||t.element.height(),o=null,u;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),t._verifyAxisAutoMinMax(r.axis),t.updating=0,t.innerState={},t.axisCompass={},t._addChartVisibilityObserver(),n.isFunction(window.wijmoASPNetParseOptions)&&window.wijmoASPNetParseOptions(r),t.styles={style:[].concat(r.seriesStyles.slice(0,r.seriesStyles.length)),hoverStyles:[].concat(r.seriesHoverStyles.slice(0,r.seriesHoverStyles.length))},r.hint&&typeof r.hint.content=="string"&&window[r.hint.content]&&(r.hint.content=window[r.hint.content]),r.hint&&typeof r.hint.title=="string"&&window[r.hint.title]&&(r.hint.title=window[r.hint.title]),t.legendEles=[],t.axisEles=[],t.legends=[],t.legendIcons=[],t.legendDots=[],t.chartLabelEles=[],t.seriesEles=[];if(t.element.length>0){t.element.is("table")?(t._parseTable(),o=n("<div></div>"),i&&o.css("width",i),s&&o.css("height",s),t.element.after(o),t.chartElement=o):t.chartElement=t.element,t.chartElement.addClass("ui-widget");try{u=Raphael(t.chartElement[0],i,s)}catch(a){var f=t.chartElement.css("display");o=n("<div></div>").insertBefore(t.chartElement).append(t.chartElement),t.chartElement.addClass("ui-helper-hidden-accessible").appendTo(n("body")),f==="none"&&t.chartElement.css("display","block"),u=Raphael(t.chartElement[0],i,s),t.chartElement.appendTo(o).unwrap().removeClass("ui-helper-hidden-accessible"),f==="none"&&t.chartElement.css("display","none")}t.canvas=u,s===0&&r.height!==0&&t.element.height(u.height),u.customAttributes.rotation=function(e){this.transform("...R"+e)},u.customAttributes.scale=function(e){this.transform("...S"+e)},u.customAttributes.translation=function(e,t){this.transform(Raphael.format("...T{0},{1}",e,t))},t._bindLiveEvents(),e.prototype._create.call(this)}},t.prototype._handleChartStyles=function(){this._extendArrayFromBase("seriesStyles"),this._extendArrayFromBase("seriesHoverStyles");var e=this.options,t=this._getDefFill();n.each(e.seriesStyles,function(e,n){n.fill||(n.fill=t[e])})},t.prototype._extendArrayFromBase=function(e){var r=n.extend(!0,[],t.prototype.options[e],this.options[e]);this.options[e]=r},t.prototype._getDefFill=function(){var e=["#00cc00","#0099cc","#0055cc","#2200cc","#8800cc","#d9007e","#ff0000","#ff6600","#ff9900","#ffcc00","#ffff00","#ace600"];return e},t.prototype._getCulture=function(e){return this._innerCulture||this._resetCulture(e),this._innerCulture},t.prototype._resetCulture=function(e){var t=n.wijGetCulture(e||this.options.culture,this.options.cultureCalendar);this._innerCulture=t},t.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},t.prototype._createDisabledDiv=function(e){var t=this,r=t.options,i=e||t.element,s=i.offset(),o=r.width||i.outerWidth(),u=r.height||i.outerHeight(),a;return a=n("<div></div>").css({"z-index":"99999",position:"absolute",width:o,height:u,left:s.left,top:s.top}),Raphael.vml&&a.addClass(r.wijCSS.stateDisabled).css("background-color","#fff"),a},t.prototype._bindData=function(){var e=this,t=this,r=t.options,i=r.dataSource,s=r.seriesList,o=r.data,u={};n.each(s,function(t,n){var r=n.dataSource||i;(r&&n.data||n.type==="sharedPie")&&e._bindSeriesData(r,n,u)})},t.prototype._bindSeriesData=function(e,t,n){var r=t.data,i=r.x,s=r.y,o=this.options.data;i&&i.bind?(r.xField=i.bind,r.x=this._getBindData(e,r.xField)):o&&o.x&&o.x.bind&&(n.sharedXList===undefined&&(n.sharedXList=this._getBindData(e,o.x.bind)),r.x=n.sharedXList),s&&s.bind&&(r.y=this._getBindData(e,s.bind))},t.prototype._getBindData=function(e,t){if(n.isArray(e)){var r=[];return n.each(e,function(e,n){n&&n[t]!==undefined&&r.push(n[t])}),r}return null},t.prototype._hanldSharedXData=function(){var e=this,t=e.options,r=t.seriesList,i=t.data;i&&n.each(r,function(e,t){var r=t.data;if(r.x===undefined||r.x===null&&n.isArray(i.x))r.x=i.x})},t.prototype._init=function(){var e=this,t=e.options,r;e.rendered||(e.seriesList=n.arrayClone(t.seriesList)),e._bindData(),e._hanldSharedXData(),r=t.seriesList.concat(),n.each(r,function(e,r){var i=r.data,s;if(typeof i=="undefined"||i===null)s=n.inArray(r,t.seriesList),t.seriesList.splice(s,1)}),r=null,!e.rendered&&!e.updating&&e._paint()},t.prototype.destroy=function(){var t=this,r=t.options;t._unbindLiveEvents(),t._clearChartElement(),t.chartElement.removeClass("ui-widget"),n("."+r.wijCSS.canvasObject,t.chartElement[0]).off(t.widgetName).off("."+t.widgetName),t.element!==t.chartElement&&t.chartElement.remove(),t.element.empty(),t.styles&&(t.styles=null),t.disabledDiv&&(t.disabledDiv.remove(),t.disabledDiv=null),t.chartHeader&&(t.chartHeader.destroy(),t.chartHeader=null),t.chartFooter&&(t.chartFooter.destroy(),t.chartFooter=null),t.chartXAxis&&(t.chartXAxis.destroy(),t.chartXAxis=null),t.chartYAxis&&(n.each(t.chartYAxis,function(e,t){t.destroy(),t=null}),t.chartYAxis=null),t.chartLegend&&(t.chartLegend.destroy(),t.chartLegend=null),e.prototype.destroy.call(this)},t.prototype.getCanvas=function(){return this.canvas},t.prototype.exportChart=function(e,t,n,r,i){},t.prototype.addSeriesPoint=function(e,t,n){var r=this.options.seriesList,i=null,s=null;if(e>=r.length)return;i=r[e],s=i.data||[],s.x.push(t.x),s.y.push(t.y),n&&(s.x.shift(),s.y.shift()),this._setOption("seriesList",r)},t.prototype.beginUpdate=function(){var e=this;e.updating++},t.prototype.endUpdate=function(){var e=this;e.updating--,e.redraw()},t.prototype.redraw=function(e){var t=this,n=t.options,r=0,i=0;if(t.updating>0)return;if(e&&t.rendered)return;r=n.width||t.element.width(),i=n.height||t.element.height();if(r<1||i<1)return;t.element.is(":hidden")?t._addChartVisibilityObserver():(t.canvas.setSize(r,i),t._paint())},t.prototype._parseTable=function(){if(!this.element.is("table"))return;var e=this,t=e.element,r=e.options,i=n("caption",t),s=n("thead th",t),o=[],u=n("tbody tr",t);i.length&&(r.header=n.extend({visible:!0,text:n.trim(n(i[0]).text())},r.header),i.length>1&&(r.footer=n.extend({visibel:!0,text:n.trim(n(i[1]).text())},r.footer))),r.legend=n.extend({visible:!0},r.legend),e._getSeriesFromTR(s,u,o),e.options.seriesList=o},t.prototype._getSeriesFromTR=function(e,t,r){var i=[],s=null,o=null;e.length&&e.each(function(){s=n.trim(n(this).text()),i.push(s)}),t.length&&t.each(function(){var e=n("th",n(this)),t=n.trim(e.text()),s=[],u=n("td",n(this));u.length&&u.each(function(e,t){var r=n(this);s.push(parseFloat(n.trim(r.text())))}),o={label:t,legendEntry:!0,data:{x:i,y:s}},r.push(o)})},t.prototype._destroyRaphaelArray=function(e){if(!e)return;var t=e.length,r=0,i,s;for(;t&&r<t;r++)i=e[r],i&&i[0]&&(s=n(i.node),s.unbind().removeData(),i.wijRemove(),s.remove(),s=null),e[r]=null},t.prototype._clearChartElement=function(){var e=this,t=e.chartElement.data("fields");e._destroyRaphaelArray(e.breakLineEles),e._destroyRaphaelArray(e.chartLabelEles),e.tooltip&&(e.tooltip.destroy(),e.tooltip=null),e.dataPoints=null,e.pointXs=null,t&&t.trackers&&(e._destroyRaphaelArray(t.trackers),t.trackers=null),e.breakLineEles=[],e.chartLabelEles=[],t&&t.chartElements&&(n.each(t.chartElements,function(t,n){e._destroyRaphaelArray(n)}),t.chartElements=null),t&&t.seriesEles&&(t.seriesEles=null),e.seriesEles&&(e.seriesEles=[]),e.canvas.clear(),e.innerState=null,e.axisInfo=null,e.seriesGroup=null,e.lastAxisOffset=null,e.innerState={}},t.prototype._text=function(e,t,n){var r=this.canvas.text(e,t,n);return this.options.disableDefaultTextStyle&&(r.node.style.cssText=""),r},t.prototype._paint=function(){var e=this,t=e.options,n=e.element,r=n.css("display")==="none"||n.css("visibility")==="hidden",i,s=null;r&&(i=n.css("left"),s=n.css("position"),n.css("left","-10000px"),n.css("position","absolute"),n.show());if(n.is(":hidden")){r&&(n.css("left",i),n.css("position",s),n.hide());return}e._clearChartElement();if(e._trigger("beforePaint")===!1)return;e._initStyles(),e._preHandleSeriesData(),e.canvasBounds={startX:0,endX:t.width||n.width(),startY:0,endY:t.height||n.height()},e._paintHeader(),e._paintFooter(),e._paintChartLegend(),e._paintChartArea(),t.indicator&&t.indicator.visible&&this.pointXs&&(this.pointXs=this.pointXs.sort(function(e,t){return e-t})),e._paintTooltip(),e._trigger("painted"),e.rendered=!0,e.styles&&(t.seriesStyles=e.styles.style,t.seriesHoverStyles=e.styles.hoverStyles),t.axis&&t.axis.x&&e.axisInfo&&e.axisInfo.x&&(t.axis.x.max=e.axisInfo.x.originalMax,t.axis.x.min=e.axisInfo.x.originalMin),r&&(n.css("left",i),n.css("position",s),n.hide())},t.prototype._paintIndicater=function(){},t.prototype._calculatePosition=function(e,t,n){var r={x:0,y:0},i=5,s=5,o=this.canvasBounds;switch(e){case"north":r.x=(o.endX-o.startX)/2,r.y=o.startY+n/2+s,o.startY=o.startY+s*2+n;break;case"south":r.x=(o.endX-o.startX)/2,r.y=o.endY-n/2-s,o.endY=o.endY-s*2-n;break;case"east":r.x=o.endX-t/2-i,r.y=(o.endY-o.startY)/2,o.endX=o.endX-i*2-t;break;case"west":r.x=o.startX+t/2+i,r.y=(o.endY-o.startY)/2,o.startX=o.startX+i*2+t}return r},t.prototype._paintHeader=function(){var e=this,t=e.options,r={text:t.header.text,textStyle:n.extend(!0,{},t.textStyle,t.header.textStyle),textCSS:t.wijCSS.headerText,containerStyle:t.header.style,containerCSS:t.wijCSS.headerContainer,compass:t.header.compass,visible:t.header.visible,canvasBounds:e.canvasBounds,disableDefaultTextStyle:t.disableDefaultTextStyle},i;e.chartHeader?e.chartHeader.redraw(r):(e.chartHeader=new y(this.canvas,r),e.chartHeader.render()),e.canvasBounds=e.chartHeader.updatedCanvasBounds},t.prototype._paintFooter=function(){var e=this,t=e.options,r={text:t.footer.text,textStyle:n.extend(!0,{},t.textStyle,t.footer.textStyle),textCSS:t.wijCSS.footerText,containerStyle:t.footer.style,containerCSS:t.wijCSS.footerContainer,compass:t.footer.compass,visible:t.footer.visible,canvasBounds:e.canvasBounds,disableDefaultTextStyle:t.disableDefaultTextStyle},i;e.chartFooter?e.chartFooter.redraw(r):(e.chartFooter=new y(this.canvas,r),e.chartFooter.render()),e.canvasBounds=e.chartFooter.updatedCanvasBounds},t.prototype._getRotationByCompass=function(e){var t=0;return e==="east"?t=90:e==="west"&&(t=-90),t},t.prototype._getLegendStyle=function(e){return e},t.prototype._paintChartLegend=function(){var e=this._getLegendRendererOptions();this.options.legend.visible&&(this.chartLegend?this.chartLegend.redraw(e):(this.chartLegend=new w(this.canvas,e),this.chartLegend.render()),this.canvasBounds=this.chartLegend.updatedCanvasBounds)},t.prototype._getLegendRendererOptions=function(){var e=this,t=e.options,r=t.legend,i=t.seriesList,s=t.seriesStyles,o;return o=e._getLegendbasicInfo(),o.legendInfoList=e._getLegendSeriesInfoList(),r.reversed&&(o.legendInfoList=o.legendInfoList.reverse()),n.each(o.legendInfoList,function(e,t){t.legendIdx=e}),o},t.prototype._getLegendbasicInfo=function(){var e=this,t=e.options,r=t.legend,i,s=t.seriesList,o=t.seriesStyles,u={disableDefaultTextStyle:t.disableDefaultTextStyle,canvasBounds:e.canvasBounds,disabled:e._isDisabled(),compass:r.compass,orientation:r.orientation,legendCSS:t.wijCSS.legendContainer,legendStyle:r.style,legendMargin:2,legendInfoList:[],title:r.text,titleStyle:n.extend(!0,{},t.textStyle,r.textStyle,r.titleStyle),titleCSS:t.wijCSS.legendTitle,labelStyle:n.extend(!0,{},t.textStyle,r.textStyle),labelWidth:r.textWidth,labelCSS:t.wijCSS.legendText+" "+t.wijCSS.legend,labelMargin:r.textMargin,labelCoverCSS:t.wijCSS.legendTextCover+" "+t.wijCSS.legend,iconSize:n.extend(!0,{width:22,height:10,r:0},r.size),iconCSS:t.wijCSS.legendIcon+" "+t.wijCSS.legend,markerCSS:Raphael.format("{0} {1} {2}",t.wijCSS.legend,t.wijCSS.legendDot,t.wijCSS.canvasObject),legendClickFunc:function(t){e._legendClickFunc(t)}};return u},t.prototype._legendClickFunc=function(e){var t=this,n=e.seriesIdx,r=t.chartElement.data("fields"),i=t.seriesEles,s;if(n===null||n===undefined)return;r&&r.seriesEles&&(i=r.seriesEles),s=i[n];if(!s)return;e.visible?t._hideSerieEles(i[n]):t._showSerieEles(i[n]),t._toggleDataBoundAnnotation(n,!e.visible)},t.prototype._toggleDataBoundAnnotation=function(e,t){var r=this.chartElement.data("fields"),i;r&&r.boundAnnotations&&r.boundAnnotations[e]&&(i=r.boundAnnotations[e],n.each(i,function(e,n){n.toggleVisibility(t)}))},t.prototype._getLegendSeriesInfoList=function(){var e=this,t=e.options,r,i=t.seriesList,s=t.seriesStyles,o,u=[],f=0;return n.each(i,function(t,n){o=e._getLegendStyle(s[t]),n.legendEntry!==!1&&(n.isTrendline?r=e._getTrendLineLegendInfoFromSeries(f,n,o):r=e._getLegendInfoFromSeries(f,n,o),r&&u.push(r)),(!n.isTrendline||a.validateType(n.fitType))&&f++}),u},t.prototype._getTrendLineLegendInfoFromSeries=function(e,t,r){var i,s=this.options.legend.size,o=this._getBasicLegendInfoFromSeries(e,t,r);return t.fitType&&!a.validateType(t.fitType)?undefined:(i=o.iconStyle,o.icon="line",o.iconSize=n.extend(!0,{},{width:22,height:1},this.options.legend.size),o)},t.prototype._getLegendInfoFromSeries=function(e,t,n){return this._getBasicLegendInfoFromSeries(e,t,n)},t.prototype._getBasicLegendInfoFromSeries=function(e,t,r){var i="rect",s,o=n.extend(!0,{fill:"none",opacity:1,stroke:"black"},r);return parseInt(o["stroke-width"])!==0&&(o=n.extend(o,{"stroke-width":1})),s={icon:i,iconStyle:o,label:t.label,markers:undefined,markerVisible:!1,markerStyle:undefined,seriesVisible:t.visible!==!1,legendIdx:0,seriesIdx:e,iconSize:undefined},s},t.prototype._hasAxes=function(){return this.widgetName==="wijpiechart"?!1:!0},t.prototype._applyAxisText=function(e,t){var r=this,i=e.text,s=null,o=null,u=null,a=0,f=0,l=t.bounds||r.canvasBounds;if(i!==null&&i!==undefined&&i.length>0){o=r._text(-100,-100,i),u=n.extend(!0,{},r.options.textStyle,e.textStyle),o.attr(u),s=o.wijGetBBox(),u["margin-left"]&&(f+=parseFloat(u["margin-left"])),u["margin-top"]&&(a+=parseFloat(u["margin-top"])),u["margin-right"]&&(f+=parseFloat(u["margin-right"])),u["margin-bottom"]&&(a+=parseFloat(u["margin-bottom"]));switch(e.compass){case"north":l.startY+=s.height+a;break;case"south":l.endY-=s.height+a;break;case"east":l.endX-=s.height+f;break;case"west":l.startX+=s.height+f}o.wijRemove(),o=null}return s},t.prototype._isSeriesListDataEmpty=function(){var e=this,t=this,r=t.options.seriesList,i=!0;return n.each(r,function(t,n){if(!e._checkSeriesDataEmpty(n))return i=!1,!1}),i},t.prototype._checkEmptyData=function(e){return!e||!n.isArray(e)?!0:!1},t.prototype._checkSeriesDataEmpty=function(e){var t=this._checkEmptyData,n=e.data;return!n||(t(n.x)||t(n.y))&&t(n.xy)?!0:this._isTrendline(e)&&(!e.isValid||!e.innerData)?!0:!1},t.prototype._setTooltipContent=function(e){var t=this,r,i,s,o=t.tooltip,u,a={},f=t.options.hint,l=n.isFunction;o&&(r=[],n.each(e,function(e,t){var i=t.valX,s=t.valY;i&&s?r.push(n.extend({},t,{x:i,y:s})):r.push(t)}),u=o.getOptions(),i=f.title,s=f.content,l(i)&&(a.title=function(){return i.call(r)}),l(s)&&(a.content=function(){return s.call(r)}),o.setOptions(a))},t.prototype._setTooltip=function(){var e=this,t=e.options,n=e.tooltip,r;n&&(r={closeBehavior:"none",style:{stroke:t.indicator.style.stroke},animated:!1,showDelay:0,hideDelay:0,windowCollisionDetection:"fit",beforeShowing:function(t,n){if(this.target&&e.indicatorLine)return!1}},t.horizontal&&(r.compass="east"),n.setOptions(r))},t.prototype._resetTooltip=function(){var e=this,t=e.options,r=t.hint,i=r.title,s=r.content,o=e.tooltip,u=n.isFunction,a=n.extend(!0,{},this.options.hint);o&&(a.animated=r.animated,a.showDelay=r.showDelay,a.hideDelay=r.hideDelay,a.title=r.title,a.content=r.content,a.closeBehavior=r.closeBehavior||"auto",a.windowCollisionDetection="fit",u(i)&&(a.title=function(){return e._getTooltipText(i,this.target)}),u(s)&&(a.content=function(){return e._getTooltipText(s,this.target)}),a.beforeShowing=function(){e._onBeforeTooltipShowing(this)},o.setOptions(a))},t.prototype._fotmatTooltip=function(e){var t=this;return t._isDate(e)?Globalize.format(e,"f",t._getCulture()):isNaN(e)?e:Globalize.format(parseFloat(e),"n",t._getCulture())},t.prototype._setDefaultTooltipText=function(e){var t=e.label;return e.lineSeries&&e.lineSeries.label&&(t=e.lineSeries.label),t+":"+this._fotmatTooltip(e.y)},t.prototype._paintTooltip=function(){var e=this,t=e.options,r=t.hint,i=!e._isDisabled()&&r.enable,s=r,o,u,a=n.isFunction;i&&!e.tooltip&&(s=n.extend(!0,{},r,{}),o=r.title,u=r.content,u||(u=r.content=function(){var t;if(n.isArray(this)){var r="";return n.each(this,function(t,n){r+=e._setDefaultTooltipText(n)+"\n"}),r}return e._setDefaultTooltipText(this)}),a(o)&&(s.title=function(){return e._getTooltipText(o,this.target)}),a(u)&&(s.content=function(){return e._getTooltipText(u,this.target)}),s.beforeShowing=function(){e._onBeforeTooltipShowing(this)},e.tooltip=new f(e.canvas,null,s))},t.prototype._getTooltipText=function(e,t){var r=n(t.node).data("wijchartDataObj"),i={data:r,label:r.label,x:r.x,y:r.y,target:t,fmt:e};return n.proxy(e,i)()},t.prototype._onBeforeTooltipShowing=function(e){var t=e.target,n=this.options.hint.style;t&&(e.options.style.stroke=n.stroke||t.attrs.stroke||t.attrs.fill)},t.prototype._paintChartArea=function(){var e=this,t=e.options,r=t.axis,i=2,s=null,o=null,u={},a=5,f=0,l=0,c=n.isArray(r.y),p=0,d,v,m,g,y,b,w,E;e._applyMargins(),e.isMultiYAxis=c;if(e._isSeriesListDataEmpty())return;c&&n.each(r.y,function(e,t){r.y[e]=n.extend(!0,(new h).axis.y,t)});if(e._hasAxes()){if(e.innerState.axisInfo)e.axisInfo=e.innerState.axisInfo,e.canvasBounds=e.innerState.canvasBounds;else{s=e._applyAxisText(r.x,{}),b={id:"x",tprec:0,isTime:!1,height:0,offset:0,vOffset:0,max:0,min:0,originalMax:0,originalMin:0,majorTickRect:null,minorTickRect:null,annoFormatString:null,textBounds:s,axisTextOffset:i,autoMax:!0,autoMin:!0,autoMajor:!0,autoMinor:!0,annoMethod:r.x.annoMethod,valueLabels:r.x.valueLabels||[],bounds:null},E=new Array,e.axisInfo={x:b,y:E},e.axisCompass[r.x.compass]=!0,c?n.each(r.y,function(t,n){o=e._applyAxisText(n,{}),w={id:"y"+t,height:0,tprec:0,isTime:!1,offset:0,vOffset:0,max:0,min:0,originalMax:0,originalMin:0,majorTickRect:null,minorTickRect:null,annoFormatString:null,textBounds:o,axisTextOffset:i,autoMax:!0,autoMin:!0,autoMajor:!0,autoMinor:!0,annoMethod:n.annoMethod,valueLabels:n.valueLabels||[],bounds:null},e.axisInfo.y[t.toString()]=w,e.axisCompass[n.compass]||(e.axisCompass[n.compass]=!0)}):(o=e._applyAxisText(r.y,{}),e.axisInfo.y[0]={id:"y",tprec:0,isTime:!1,offset:0,vOffset:0,max:0,min:0,originalMax:0,originalMin:0,majorTickRect:null,minorTickRect:null,annoFormatString:null,textBounds:o,axisTextOffset:i,autoMax:!0,autoMin:!0,autoMajor:!0,autoMinor:!0,annoMethod:r.y.annoMethod,valueLabels:r.y.valueLabels||[]},e.axisCompass[r.y.compass]||(e.axisCompass[r.y.compass]=!0)),e._getSeriesGroup(c),u=e._getDataExtreme(c),e.extremeValue=u,r.x.autoMin&&e.axisInfo.x.autoMin?(r.x.min=u.txn,g=r.x.origin,g!==null&&typeof g!="undefined"&&!e.axisInfo.x.isTime&&g<r.x.min&&(r.x.min=g)):r.x.min&&e._isDate(r.x.min)&&(r.x.min=n.toOADate(r.x.min)),r.x.autoMax&&e.axisInfo.x.autoMax?r.x.max=u.txx:r.x.max&&e._isDate(r.x.max)&&(r.x.max=n.toOADate(r.x.max)),n.each(u.y,function(e,t){p++});for(d=0;d<(r.y.length||1);d++){v=r.y[d]||r.y,m=d.toString(),v.autoMin&&e.axisInfo.y[m].autoMin&&u.y[m]?(v.min=u.y[m].tyn,y=v.origin,y!==null&&typeof y!="undefined"&&!e.axisInfo.y[m].isTime&&y<v.min&&(v.min=y)):v.min&&e._isDate(v.min)&&(v.min=n.toOADate(v.min)),v.autoMax&&e.axisInfo.y[m].autoMax&&u.y[m]?v.max=u.y[m].tyx||0:v.max&&e._isDate(v.max)&&(v.max=n.toOADate(v.max));do{l=e._autoPosition(e.axisInfo,r,"y",m),f=e._autoPosition(e.axisInfo,r,"x",m);if(l===e.axisInfo.y[m].offset&&f===e.axisInfo.x.offset){a=0;break}!isNaN(f)&&!isNaN(l)&&(l!==e.axisInfo.y[m].offset&&l!==0&&(e.axisInfo.y[m].offset=l,e.axisInfo.y[m].vOffset=f),f!==e.axisInfo.x.offset&&f!==0&&(e.axisInfo.x.offset=f,e.axisInfo.x.vOffset=l)),a--}while(a>0)}e._adjustPlotArea(r.x,e.axisInfo.x),e._adjustPlotArea(r.y,e.axisInfo.y,!0),e.innerState.axisInfo=e.axisInfo,e.innerState.canvasBounds=e.canvasBounds}e._paintAxes(),e._paintPlotArea()}else e._paintPlotArea()},t.prototype._getSeriesGroup=function(e){var t=this,r=t.options,i={};n.each(r.seriesList,function(t,n){n.yAxis&&e?i[n.yAxis.toString()]?i[n.yAxis.toString()].push(n):i[n.yAxis.toString()]=[n]:i[0]?i[0].push(n):i[0]=[n]}),t.seriesGroup=i},t.prototype._adjustPlotArea=function(e,t,r){var i=this.canvasBounds,s,o={east:Number.MIN_VALUE,west:Number.MIN_VALUE,south:Number.MIN_VALUE,north:Number.MIN_VALUE};if(r)n.each(t,function(e,t){s=e}),n.each(t,function(t,n){var r=e[t]||e,i=r.compass;r.max=n.max,r.min=n.min;switch(i){case"north":o.north=Math.max(n.offset,o.north);break;case"south":o.south=Math.max(n.offset,o.south);break;case"east":o.east=Math.max(n.offset,o.east);break;case"west":o.west=Math.max(n.offset,o.west)}}),o.north!==Number.MIN_VALUE&&(i.startY+=o.north),o.south!==Number.MIN_VALUE&&(i.endY-=o.south),o.east!==Number.MIN_VALUE&&(i.endX-=o.east),o.west!==Number.MIN_VALUE&&(i.startX+=o.west);else{e.max=t.max,e.min=t.min;switch(e.compass){case"north":i.startY+=t.offset;break;case"south":i.endY-=t.offset;break;case"east":i.endX-=t.offset;break;case"west":i.startX+=t.offset}}},t.prototype._autoPosition=function(e,t,n,r){return this._autoPositionCartesianAxis(e,t,n,r)},t.prototype._autoPositionCartesianAxis=function(e,t,r,i){var s=this,o=null,u,a,f,l,c,h,p,d,v=s.lastAxisOffset||{},m,g;r==="y"?(u=e.y[i],a=t.y[i]||t.y,l=t.x,f=e.x):(u=e.x,a=t.x,f=e.y[i],l=t.y[i]||t.y),c=a.compass,h=l.origin,p=f.max,d=f.min,h!==null&&s._isDate(h)&&(h=n.toOADate(h)),s._calculateParameters(u,a),o=s._getMaxExtents(u,a);switch(c){case"north":case"south":m=o.height,u.maxExtent=m;break;case"east":case"west":m=o.width,u.maxExtent=m}return r==="y"&&v[c]&&(n.each(v[c],function(e,t){e!==i&&(g=t)}),g&&!u.isPartAxis&&(u.preStartOffset=g,m+=g)),r==="y"&&(v[c]===undefined&&(v[c]={}),v[c][i]=m+s._getAxisLabelBox(a).width,s.lastAxisOffset=v),m},t.prototype._getAxisLabelBox=function(e){var t=this,r=t.options,i=e.text,s=0,o=0,u=0,a=0,f,l,c=t._isVertical(e.compass),h=n.extend(!0,{},r.textStyle,e.textStyle);return h["margin-top"]&&(s=parseFloat(h["margin-top"])),h["margin-left"]&&(u=parseFloat(h["margin-left"])),h["margin-right"]&&(o=parseFloat(h["margin-right"])),h["margin-bottom"]&&(a=parseFloat(h["margin-bottom"])),f=t._text(0,0,i),f.attr(h),c&&f.transform("...R-90"),l=f.wijGetBBox(),f.wijRemove(),f=null,{width:l.width+u+o,height:l.height+a+s}},t.prototype._getMaxExtents=function(e,t,r){var i=this,s=i.options,o=null,u={width:0,height:0},a=e.min,f=e.max,l=e.isTime,c=t.annoFormatString,h=s.is100Percent,p=0,d=t.compass,v=t.labels,m,g=!1,y=e.bounds||i.canvasBounds,b,w;e.majorTickRect=i._getTickRect(e,t,!0,!0,r),e.minorTickRect=i._getTickRect(e,t,!1,!0,r),o=i._getMajorTickValues(e,t);if(!t.textVisible)return u;if(!c||c.length===0)c=e.annoFormatString;return m=n.extend(!0,{},s.textStyle,t.textStyle,v.style),w=m.transform,g=w&&/r/i.test(w),m=n.extend(!0,m,e.textStyle),b=y.endX-y.startX-e.vOffset-e.axisTextOffset,o&&o.length&&(b/=o.length-1,n.each(o,function(t,r){var s,o,y;if(r<a||r>f)return!0;if(e.annoMethod==="valueLabels"){if(r<0)return!0;if(p>=e.valueLabels.length)return!1;r=e.valueLabels[p],r.text?r=r.text:typeof r.value!="undefined"&&(r=r.value,c&&c.length&&(r=Globalize.format(r,c,i._getCulture())))}else e.annoMethod==="values"&&(c&&c.length?(l&&(r=n.fromOADate(r)),r=Globalize.format(r,c,i._getCulture())):h&&e.id==="y"&&(r=Globalize.format(r,"p0",i._getCulture())));v.width?s=i.canvas.wrapText(-100,-100,r,v.width,v.textAlign,m):s=i._text(-100,-100,r).attr(m),o=s.wijGetBBox(),!i._isVertical(d)&&!g&&e.annoMethod==="valueLabels"&&o.width>b&&(s.attr({transform:"r-45"}),o=s.wijGetBBox(),t===0&&(m.transform="r-45",e.textStyle={transform:"r-45"},y=s.clone(),y.attr({transform:"r0"}),o=y.wijGetBBox(),Math.sqrt(2)*o.height>b&&(s.attr({transform:"r-90"}),m.transform="r-90",e.textStyle={transform:"r-90"}),y.wijRemove(),y=null,o=s.wijGetBBox())),s.wijRemove(),s=null,o.width>u.width&&(u.width=o.width),o.height>u.height&&(u.height=o.height),p++})),u.width<v.width&&(u.width=v.width),e.labelWidth=u.width,u},t.prototype._getMajorTickValues=function(e,t){var r=[],i=t.autoMajor,s=t.unitMajor,o,u,a=e.valueLabels;return a&&a.length>0&&n.each(a,function(e,t){if(typeof t.text!="undefined"||typeof t.value!="undefined")return!1;typeof t=="string"?a[e]={text:t,gridLine:!1}:a[e]={value:t,gridLine:!1}}),e.annoMethod==="valueLabels"&&a&&a.length>0&&typeof a[0].value!="undefined"?(r=this._getSortedDataValues(e,t),r):(e.id==="x"?(o=i?e.max:e.originalMax,u=i?e.min:e.originalMin):(o=e.max,u=e.min),r=this._getTickValues(o,u,s,e.tprec,!e.isTime,i),r)},t.prototype._getSortedDataValues=function(e,t){var r=this,i=[],s=e.valueLabels;return n.each(s,function(e,t){var s=t.value;r._isDate(s)?i.push(n.toOADate(s)):typeof s=="number"?i.push(s):i.push(e)}),i},t.prototype._getMinorTickValues=function(e,t){var n=[],r=t.autoMinor,i=t.unitMinor,s,o;return e.id==="x"?(s=r?e.max:e.originalMax,o=r?e.min:e.originalMin):(s=e.max,o=e.min),n=this._getTickValues(s,o,i,e.tprec,!e.isTime,r),n},t.prototype._getTickValues=function(e,t,r,i,s,o){var a=this,f=[],l,c=t,h=e,p=0,d=0,v=0,m=0,g=0,y=0;try{if(r===0)f=[e,t];else{o?(i+1<0?i=-1:i+1>15&&(i=14),y=n.round(u.signedCeiling(t/r)*r,i+1),y<e&&(t=y),v=parseInt(n.round(e/r,5).toString(),10),m=parseInt(n.round(t/r,5).toString(),10),g=parseInt((v-m+1).toString(),10),g>1&&(d=m*r,d<t&&(g--,t+=r),d=t+(g-1)*r,d>e&&g--),g<1&&(g=2,t=c,r=e-t)):(g=parseInt(((e-t)/r+1).toString(),10),g>1&&(d=t+(g-1)*r,d>e&&g--),g<1&&(g=2,r=e-t));for(p=0;p<g;p++)s?o?l=n.round(t+p*r,i+1):l=t+p*r:l=t+p*r,l<=h&&l>=c&&f.push(l)}}catch(b){}return f},t.prototype._getTickRect=function(e,t,n,r,i){var s=t.compass,o=0,u=null,a=3,f=2,l=2,c=t.tickMajor.factor,h=t.tickMinor.factor,p={x:0,y:0,width:0,height:0};n?(u=t.tickMajor.position,c=c>0?c:1,o=a*c):(u=t.tickMinor.position,h=h>0?h:1,o=f*h);if(u==="none"||u==="inside"&&r)o=0;return s==="east"||s==="west"?(p={x:0,y:-1,width:o*l,height:l},s==="east"&&(u==="outside"||u==="cross"&&r)||s==="west"&&u==="inside"?p.width+=2:r||(u==="cross"&&(p.width<<=1),p.width+=2)):(p={x:-1,y:0,width:l,height:o*l},s==="south"&&(u==="outside"||u==="corss"&&r)||s==="north"&&u==="inside"?p.height+=2:r||(u==="cross"&&(p.height<<=1),p.height+=2)),p},t.prototype._applyMargins=function(){var e=this,t=e.options,n=e.canvasBounds;n.startX+=t.marginLeft,n.endX-=t.marginRight,n.startY+=t.marginTop,n.endY-=t.marginBottom},t.prototype._paintAxes=function(){var e=this,t=e.options.axis,r=e.axisInfo,i=t.x,s=t.y,o=r.x,u=r.y,a,f;a=e._paintChartAxis(i,o,e.chartXAxis),e.chartXAxis||(e.chartXAxis=a.axisRenderer),f=a.movingElements,n.each(u,function(t,n){var r=s[t]||s;r.origin!==null&&e._translateAxisIfNeeded(f,i.compass,r.origin,r.compass,n.max,n.min)}),n.each(u,function(t,n){var r=s[t]||s;e.chartYAxis||(e.chartYAxis=[]),a=e._paintChartAxis(r,n,e.chartYAxis[t]),e.chartYAxis[t]||(e.chartYAxis[t]=a.axisRenderer),f=a.movingElements,i.origin!==null&&e._translateAxisIfNeeded(f,r.compass,i.origin,i.compass,o.max,o.min)})},t.prototype._getChartAxisRenderOptions=function(e,t){var r=this,i=r.options,s=t,o=e,u=o.compass,a=u==="east"||u==="west",f=o.annoFormatString,l;if(!f||f.length===0)f=s.annoFormatString;return l={disableDefaultTextStyle:i.disableDefaultTextStyle,canvasBounds:s.bounds||r.canvasBounds,axisStyle:o.style,axisCSS:i.wijCSS.axis,origin:o.origin,max:s.max,min:s.min,originalMax:s.originalMax,originalMin:s.originalMin,annoMethod:s.annoMethod,annoFormatString:f,visible:o.visible,compass:u,valueLabels:s.valueLabels,axisMaxLabelSize:s.maxExtent,axisOffset:!a||s.isPartAxis||!s.preStartOffset?0:s.preStartOffset,titleAlignment:o.alignment,titleVisible:o.textVisible,titleText:o.text,titleStyle:n.extend(!0,{},i.textStyle,o.textStyle),titleCSS:i.wijCSS.axisText,axisLabelOffset:s.axisTextOffset,labelCSS:i.wijCSS.axisLabel,labelStyle:n.extend(!0,{},i.textStyle,o.textStyle,o.labels.style,s.textStyle),labelOptions:{textAlign:o.labels.textAlign,width:o.labels.width?s.labelWidth:null},tickCSS:i.wijCSS.axisTick,gridCSS:i.wijCSS.axisGridLine,autoMajor:o.autoMajor,autoMinor:o.autoMinor,unitMajor:o.unitMajor,unitMinor:o.unitMinor,gridMajor:o.gridMajor,gridMinor:o.gridMinor,tickMajor:o.tickMajor,tickMinor:o.tickMinor,is100Percent:i.is100Percent&&s.id==="y",culture:i.culture,cultureCalendar:i.cultureCalendar,tprec:s.tprec,isTime:s.isTime},l},t.prototype._paintChartAxis=function(e,t,r){var i=this,s=[],o,u,a,f;return o=i._getChartAxisRenderOptions(e,t),r?r.redraw(o):(r=new S(i.canvas,o),r.render()),r.axisMainLineEle&&s.push(r.axisMainLineEle),n.each(r.axisDotGroupList,function(e,t){t.tick&&s.push(t.tick),t.label&&s.push(t.label)}),r.axisTitleEle&&s.push(r.axisTitleEle),t.isPartAxis&&!t.isLastAxis&&(a=r.startPoint.x,f=r.startPoint.y,u=i.canvas.path(["M",a.toString(),(f+t.vOffset/2).toString(),"H",(a+t.maxExtent*2).toString()].join()),s.push(u),i.breakLineEles||(i.breakLineEles=[]),i.breakLineEles.push(u)),{axisRenderer:r,movingElements:s}},t.prototype._translateAxisIfNeeded=function(e,t,r,i,s,o){var u=this,a=i==="west"||i==="east",f=u.canvasBounds,l=r,c;u._isDate(l)&&(l=n.toOADate(l)),a?(t==="south"?c=(o-l)/(s-o)*(f.endY-f.startY):c=(s-l)/(s-o)*(f.endY-f.startY),n.each(e,function(e,t){t.transform(Raphael.format("...T{0},{1}",0,c))})):(t==="west"?c=(l-o)/(s-o)*(f.endX-f.startX):c=(l-s)/(s-o)*(f.endX-f.startX),n.each(e,function(e,t){t.transform(Raphael.format("...T{0},{1}",c,0))}))},t.prototype._paintAxis=function(e,t){var r=this,i=r.options,s=t.bounds||r.canvasBounds,o={x:0,y:0},u={x:0,y:0},a=e.compass,f=2,l=!0,c=null,h=[],p=[],d=[],v=t.max,m=t.min,g=e.unitMajor,y=e.unitMinor,b=e.tickMajor.position,w=e.tickMinor.position,E=t.maxExtent,S=e.tickMajor.style,x=e.tickMinor.style,T=t.majorTickRect,N=t.minorTickRect,C=t.axisTextOffset,k=e.gridMajor,L=e.gridMinor,A=e.labels,O=0,M=[],_=0,D=e.annoFormatString,P=null,H=[];T=r._getTickRect(t,e,!0,!1),N=r._getTickRect(t,e,!1,!1);if(!D||D.length===0)D=t.annoFormatString;h=r._getMajorTickValues(t,e),p=r._getMinorTickValues(t,e),d=r._resetMinorTickValues(p,h);switch(a){case"south":o.x=s.startX,o.y=s.endY,u.x=s.endX,u.y=s.endY,l=!1;break;case"north":o.x=s.startX,o.y=s.startY-f,u.x=s.endX,u.y=s.startY-f,l=!1;break;case"east":o.x=s.endX-f,o.y=s.endY,u.x=s.endX-f,u.y=s.startY+r._getOffsetOfAxis(e),t.preStartOffset&&(o.x+=t.preStartOffset,u.x+=t.preStartOffset);break;case"west":o.x=s.startX,o.y=s.endY,u.x=s.startX,u.y=s.startY+r._getOffsetOfAxis(e),t.preStartOffset&&(o.x-=t.preStartOffset,u.x-=t.preStartOffset)}return e.visible&&(c=r.canvas.line(o.x,o.y,u.x,u.y).attr(e.style),n.wijraphael.addClass(n(c.node),i.wijCSS.axis),r.axisEles.push(c),H.push(c)),n.each(h,function(s,f){var l=f,c=t.isTime,h=i.is100Percent,p,d,y=!1,w={};if(f<m||f>v)return _++,!0;if(t.annoMethod==="valueLabels"){if(_>=t.valueLabels.length)return!1;l=t.valueLabels[_],y=l.gridLine,w=l.gridLineStyle,l.text?l=l.text:typeof l.value!="undefined"&&(l=l.value,D&&D.length&&(l=Globalize.format(l,D,r._getCulture())))}else t.annoMethod==="values"&&(t.id==="x"&&(l=r._getXTickText(l)),D&&D.length?(c&&(l=n.fromOADate(f)),l=Globalize.format(l,D,r._getCulture())):h&&t.id==="y"&&(l=Globalize.format(f,"p0",r._getCulture())));P=n.extend(!0,{},i.textStyle,e.textStyle,A.style,t.textStyle),p=r._paintMajorMinor(e.origin,v,m,f,b,g,T,a,o,u,E,C,S,l,k,e.textVisible,P,A.textAlign,A.width?t.labelWidth:null,y,w),p&&(p.elements&&(H=H.concat(p.elements)),d=p.textInfo),d&&(M.push(d),O<d.len&&(O=d.len)),_++}),A.width||n.each(M,function(e,t){var n=t.text,r=(t.len-O)/2;r=A.textAlign==="near"?r*-1:r,l?n.transform(Raphael.format("...T{0},{1}",r,0)):n.transform(Raphael.format("...T{0},{1}",0,r))}),n.each(d,function(n,i){var s;i>m&&i<v&&(s=r._paintMajorMinor(e.origin,v,m,i,w,y,N,a,o,u,E,C,x,null,L,e.textVisible,P,A.textAlign,A.width?t.labelWidth:null),s&&s.elements&&(H=H.concat(s.elements)))}),e.text&&e.text.length>0&&H.push(r._paintAxisText(e,t)),t.isPartAxis&&!t.isLastAxis&&H.push(r.canvas.path(["M",o.x.toString(),(o.y+t.vOffset/2).toString(),"H",(o.x+t.maxExtent*2).toString()].join())),H},t.prototype._paintAxisText=function(e,t){if(!e.text||e.text.length===0)return;var r=this,i=r.options,s=e.text,o=e.compass,u=e.alignment,a=t.bounds||r.canvasBounds,f=a.startX,l=a.startY,c=a.endX,h=a.endY,p=f,d=l,v=t.textBounds,m=r._isVertical(o),g=t.axisTextOffset,y=t.majorTickRect,b=e.tickMajor.position,w=m?y.width:y.height,E=null,S=null,x=0,T=0,N=0,C=0;E=n.extend(!0,{},r.options.textStyle,e.textStyle),E["margin-top"]&&(x=parseFloat(E["margin-top"])),E["margin-left"]&&(T=parseFloat(E["margin-left"])),E["margin-right"]&&(N=parseFloat(E["margin-right"])),E["margin-bottom"]&&(C=parseFloat(E["margin-bottom"])),b==="cross"?w/=2:b==="inside"&&(w=0);if(m){switch(u){case"near":d=h-v.width/2;break;case"center":d=(l+h)/2;break;case"far":d=l+v.width/2}o==="west"?p=f-(t.offset+g+w+v.height/2+N):p=c+t.offset+g+w+v.height/2+T}else{switch(u){case"near":p=f+v.width/2;break;case"center":p=(f+c)/2;break;case"far":p=c-v.width/2}o==="north"?d=l-(t.offset+g+w+v.height/2+C):d=h+t.offset+g+w+v.height/2+x}return S=r._text(p,d,s),n.wijraphael.addClass(n(S.node),i.wijCSS.axisText),r.axisEles.push(S),S.attr(E),m&&S.transform("...R-90"),S},t.prototype._resetMinorTickValues=function(e,t){var n=0,r=0,i=null,s=null;for(n=e.length-1;n>=0;n--){i=e[n];for(r=t.length-1;r>=0;r--)s=t[r],i===s&&e.splice(n,1)}return e},t.prototype._getXTickText=function(e){return e},t.prototype._adjustTickValuesForCandlestickChart=function(e){return e},t.prototype._paintMajorMinor=function(e,t,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E){var S=this,x=f.x,T=f.y,N=S.options,C=-1,k=-1,L=!0,A=S.canvasBounds,O=null,M=null,_=[],D=[],P=null,H={"stroke-width":2},B={text:null,len:0},j=null,F={},I=[],q=S.axisCompass;switch(a){case"south":s==="inside"?T-=u.height:s==="cross"&&(T-=u.height/2),b?k=T+h+u.height:k=T+h+u.height+c/2,L=!1;break;case"west":s==="outside"?x-=u.width:s==="cross"&&(x-=u.width/2),b?C=x-(h+c):C=x-(h+c/2);break;case"north":s==="outside"?T-=u.height:s==="cross"&&(T-=u.height/2),b?k=T-(h+c):k=T-(h+c/2),L=!1;break;case"east":s==="inside"?x-=u.width:s==="cross"&&(x-=u.width/2),b?C=x+h+u.width:C=x+h+u.width+c/2}return L?(T+=(i-r)/(t-r)*(l.y-f.y),D=["M",A.startX,T,"H",A.endX],v.visible&&((T!==A.startY||!q.north)&&(T!==A.endY||!q.south)||e!==i)&&(P=S.canvas.path(D.join(" ")),n.wijraphael.addClass(n(P.node),N.wijCSS.axisGridLine),P.attr(v.style),S.axisEles.push(P)),w&&((T!==A.startY||!q.north)&&(T!==A.endY||!q.south)||e!==i)&&(P=S.canvas.path(D.join(" ")),n.wijraphael.addClass(n(P.node),N.wijCSS.axisGridLine),P.attr(n.extend(!0,{},v.style,E)),S.axisEles.push(P)),k=T,s!=="none"&&(_=["M",x,T,"h",u.width],p["stroke-width"]=u.height)):(x+=(i-r)/(t-r)*(l.x-f.x),D=["M",x,A.startY,"V",A.endY],v.visible&&((x!==A.startX||!q.west)&&(x!==A.endX||!q.east)||e!==i)&&(P=S.canvas.path(D.join(" ")),n.wijraphael.addClass(n(P.node),N.wijCSS.axisGridLine),P.attr(v.style),S.axisEles.push(P)),w&&((x!==A.startX||!q.west)&&(x!==A.endX||!q.east)||e!==i)&&(P=S.canvas.path(D.join(" ")),n.wijraphael.addClass(n(P.node),N.wijCSS.axisGridLine),P.attr(n.extend(!0,{},v.style,E)),S.axisEles.push(P)),b?C=x-b/2:C=x,s!=="none"&&(_=["M",x,T,"v",u.height],p["stroke-width"]=u.width)),s!=="none"&&(M=S.canvas.path(_.join(" ")),n.wijraphael.addClass(n(M.node),N.wijCSS.axisTick),H=n.extend(H,p),M.attr(H),S.axisEles.push(M),I.push(M)),d!==null&&m&&(b?(B=S.canvas.wrapText(C,k,d.toString(),b,y,g),n.wijraphael.addClass(n(B.node),N.wijCSS.axisLabel)):(B=S._text(C,k,d.toString()),n.wijraphael.addClass(n(B.node),N.wijCSS.axisLabel),B.attr(g)),S.axisEles.push(B),I.push(B),m||B.hide(),y!=="center"&&(j=B.getBBox(),O={text:B,len:L?j.width:j.height})),F={textInfo:O,elements:I},F},t.prototype._paintPlotArea=function(){},t.prototype._paintChartLabels=function(){var e=this,t=e.options.chartLabels;t&&t.length&&n.each(t,function(t,r){var i;r=n.extend(!0,{compass:"east",attachMethod:"coordinate",attachMethodData:{seriesIndex:-1,pointIndex:-1,x:-1,y:-1},offset:0,visible:!1,text:"",connected:!1},r);if(r.visible){i=e._getChartLabelPointPosition(r);if(typeof i.x!="number"||typeof i.y!="number")return!1;e._setChartLabel(r,i)}})},t.prototype._getChartLabelPointPosition=function(e){},t.prototype._setChartLabel=function(e,t,r,i){var s=this,o=e.compass,u=s.options,a=n.extend(!0,{},u.textStyle,u.chartLabelStyle),f=s._text(0,0,e.text).attr(a),l=e.offset,c=0,h=0,p=null,d=null;n.wijraphael.addClass(n(f.node),u.wijCSS.labelText),s.chartLabelEles.push(f),p=s._getCompassTextPosition(o,f.wijGetBBox(),l,t,r),l&&e.connected&&(d=s.canvas.path("M"+t.x+" "+t.y+"L"+p.endPoint.x+" "+p.endPoint.y),n.wijraphael.addClass(n(d.node),u.wijCSS.labelConnect),d.attr(i),s.chartLabelEles.push(d)),c=p.endPoint.x+p.offsetX,h=p.endPoint.y+p.offsetY,f.transform(Raphael.format("...T{0},{1}",c,h)).toFront()},t.prototype._getCompassTextPosition=function(e,t,r,i,s){var o=0,u=0,a={x:0,y:0};switch(e.toLowerCase()){case"east":s=0;break;case"west":s=180;break;case"north":s=90;break;case"south":s=270;break;case"northeast":s=45;break;case"northwest":s=135;break;case"southeast":s=315;break;case"southwest":s=225}return s>=0&&s<22.5||s>337.5&&s<360?o=t.width/2:s>=22.5&&s<67.5?(o=t.width/2,u=-1*t.height/2):s>=67.5&&s<112.5?u=-1*t.height/2:s>=112.5&&s<157.5?(o=-1*t.width/2,u=-1*t.height/2):s>=157.5&&s<202.5?o=-1*t.width/2:s>=202.5&&s<247.5?(o=-1*t.width/2,u=t.height/2):s>=247.5&&s<292.5?u=t.height/2:(o=t.width/2,u=t.height/2),a=n.wijraphael.getPositionByAngle(i.x,i.y,r,s),{endPoint:a,offsetX:o,offsetY:u}},t.prototype._isTouchEnabled=function(){return n.support.isTouchEnabled&&n.support.isTouchEnabled()},t.prototype._mouseDown=function(e,t){this._trigger("mouseDown",e,t)},t.prototype._mouseUp=function(e,t){this._trigger("mouseUp",e,t)},t.prototype._mouseOver=function(e,t){this._trigger("mouseOver",e,t)},t.prototype._mouseOut=function(e,t){this._trigger("mouseOut",e,t)},t.prototype._mouseMove=function(e,t){this._trigger("mouseMove",e,t)},t.prototype._click=function(e,t){this._trigger("click",e,t)},t.prototype._mouseMoveInsidePlotArea=function(e,t){var r=this,i=r.options,s=i.indicator,o=r.canvas,u,a,f,l=0,c=[],h=i.horizontal;s&&s.visible&&this.isPlotAreaMouseDown&&(h?u=this._calculatePositionByX(t.top):u=this._calculatePositionByX(t.left),u&&this.indicatorLine&&u.x!==this.lastIndicatorPosition&&(n.each(u.data,function(e,t){t.visible&&c.push(t)}),c.length>0&&(a=r.canvasBounds,h?this.indicatorLine.transform("T0 "+u.x):this.indicatorLine.transform("T"+u.x+" 0"),this._setTooltipContent(c),this.tooltip&&(h?this.tooltip.showAt({x:a.endX,y:u.x}):this.tooltip.showAt({x:u.x,y:a.startY})),this.lastIndicatorPosition=u.x,r._indicatorLineShowing(c),this.lastIndicatorObjects=c)))},t.prototype._calculatePositionByX=function(e){var t=this,n=t.pointXs,r,i=t.dataPoints;return n&&n.length>0&&(r=this._calculatePositionByXInternal(e,n)),i?{x:r,data:i[r.toString()]}:null},t.prototype._calculatePositionByXInternal=function(e,t){var n=t.length,r,i;return n===1?t[0]:n===2?Math.abs(e-t[0])>Math.abs(e-t[1])?t[1]:t[0]:(r=parseInt((n/2).toString()),e>t[r]?i=t.slice(r):i=t.slice(0,r+1),this._calculatePositionByXInternal(e,i))},t.prototype._mouseMoveOutsidePlotArea=function(e,t){this.indicatorLine&&(this.indicatorLine.wijRemove(),this.indicatorLine=null,this.tooltip&&this.tooltip.hide(),this._resetTooltip())},t.prototype._mouseDownInsidePlotArea=function(e,t){this.isPlotAreaMouseDown=!0;var r=this,i=r.options,s=i.indicator,o=r.canvas,u,a,f,l=[],c=i.horizontal;s&&s.visible&&this.isPlotAreaMouseDown&&(r._setTooltip(),c?u=this._calculatePositionByX(t.top):u=this._calculatePositionByX(t.left),u&&(n.each(u.data,function(e,t){t.visible&&l.push(t)}),l.length>0&&(a=r.canvasBounds,c?f=["M",a.startX,0,"H",a.endX]:f=["M",0,a.startY,"V",a.endY],this.indicatorLine&&this.indicatorLine.wijRemove(),this.indicatorLine=o.path(f),this.indicatorLine.attr(s.style),c?this.indicatorLine.transform("T0 "+u.x):this.indicatorLine.transform("T"+u.x+" 0"),this._setTooltipContent(l),this.tooltip&&(c?this.tooltip.showAt({x:a.endX,y:u.x}):this.tooltip.showAt({x:u.x,y:a.startY})),this.lastIndicatorPosition=u.x,r._indicatorLineShowing(l),this.lastIndicatorObjects=l)),e.preventDefault())},t.prototype._indicatorLineShowing=function(e){this.lastIndicatorObjects&&this._removeIndicatorStyles(this.lastIndicatorObjects)},t.prototype._removeIndicatorStyles=function(e){},t.prototype._mouseUpInsidePlotArea=function(e,t){this.isPlotAreaMouseDown=!1,this.indicatorLine&&(this.indicatorLine.wijRemove(),this.indicatorLine=null,this.tooltip&&this.tooltip.hide(),this._resetTooltip()),this.lastIndicatorObjects&&(this._removeIndicatorStyles(this.lastIndicatorObjects),this.lastIndicatorObjects=null)},t.prototype._bindLiveEvents=function(){this._bindCanvasEvents(),this._bindResizeEvent()},t.prototype._bindResizeEvent=function(){var e=this;this.resizeIntent=250,this.options.autoResize&&this.chartElement.on("resize."+this.widgetName,function(){clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout(function(){e.redraw()},e.resizeIntent)})},t.prototype._unbindResizeEvent=function(){this.chartElement.off("resize."+this.widgetName)},t.prototype._bindCanvasEvents=function(){var e=this,t=e.chartElement,r="",i="."+this.widgetName;n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(window.navigator.pointerEnabled?t.css("touch-action","none"):window.navigator.msPointerEnabled&&t.css("-ms-touch-action","none")),n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(r="wij"),t.bind(r+"mousemove"+i,function(n){var r=t.offset(),i=e.canvasBounds,s={left:(document.compatMode==="CSS1Compat"?n.pageX:n.clientX)-r.left,top:(document.compatMode==="CSS1Compat"?n.pageY:n.clientY)-r.top},o=e._isDisabled();if(o||i===undefined)return;s.left>=i.startX&&s.left<=i.endX&&s.top>=i.startY&&s.top<=i.endY&&e._mouseMoveInsidePlotArea(n,s)}),t.bind(r+"mouseout"+i,function(n){var r=t.offset(),i=e.canvasBounds,s={left:(document.compatMode==="CSS1Compat"?n.pageX:n.clientX)-r.left,top:(document.compatMode==="CSS1Compat"?n.pageY:n.clientY)-r.top},o=e._isDisabled();if(o||i===undefined)return;if(s.left>=i.startX&&s.left<=i.endX&&s.top>=i.startY&&s.top<=i.endY)return;e._mouseMoveOutsidePlotArea(n,s)}),e.options.indicator&&e.options.indicator.visible&&t.bind(r+"mousedown"+i,function(n){var r=t.offset(),i=e.canvasBounds,s={left:(document.compatMode==="CSS1Compat"?n.pageX:n.clientX)-r.left,top:(document.compatMode==="CSS1Compat"?n.pageY:n.clientY)-r.top},o=e._isDisabled();if(o||i===undefined)return;s.left>=i.startX&&s.left<=i.endX&&s.top>=i.startY&&s.top<=i.endY&&e._mouseDownInsidePlotArea(n,s)}).bind(r+"mouseup"+i,function(n){var r=t.offset(),i=e.canvasBounds,s={left:(document.compatMode==="CSS1Compat"?n.pageX:n.clientX)-r.left,top:(document.compatMode==="CSS1Compat"?n.pageY:n.clientY)-r.top},o=e._isDisabled();if(o||i===undefined)return;s.left>=i.startX&&s.left<=i.endX&&s.top>=i.startY&&s.top<=i.endY&&e._mouseUpInsidePlotArea(n,s)})},t.prototype._unbindCanvasEvents=function(){n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(window.navigator.pointerEnabled?this.element.css("touch-action",""):window.navigator.msPointerEnabled&&this.element.css("-ms-touch-action","")),this.element.unbind("."+this.widgetName)},t.prototype._bindLegendEvents=function(){var e=this,t=e.chartElement;t.delegate("."+e.options.wijCSS.legend,"click.wijchartcore",function(t){if(e._isDisabled())return;var r=n(t.target);r[0].tagName&&r[0].tagName==="tspan"&&(r=r.parent()),e._legendClick(r)})},t.prototype._legendClick=function(e){if(typeof e.data("index")=="undefined")return;var t=this,r=t.options.legend,i=e.data("index"),s=e.data("legendIndex"),o=t.chartElement.data("fields"),u=t.seriesEles,a,f=t.legendIcons[s],l=t.legends[s],c=r.textWidth?n(l[0].node):n(l.node),h=i,p;o&&o.seriesEles&&(u=o.seriesEles),t.legendDots&&t.legendDots.length>i&&(p=t.legendDots[i]),r.reversed&&(h=t.legends.length-1-i),a=u[h],t.legends.length&&(c.data("hidden")?(a&&t._showSerieEles(a),l.attr("opacity",c.data("textOpacity")),f.attr("opacity",c.data("iconOpacity")),p&&p.attr("opacity",c.data("dotOpacity")),c.data("hidden",!1)):(a&&t._hideSerieEles(a),c.data("textOpacity")||(r.textWidth?c.data("textOpacity",l[0].attr("opacity")||1):c.data("textOpacity",l.attr("opacity")||1)),c.data("iconOpacity")||c.data("iconOpacity",f.attr("opacity")||1),p&&!c.data("dotOpacity")&&c.data("dotOpacity",f.attr("opacity")||1),l.attr("opacity","0.3"),f.attr("opacity","0.3"),p&&p.attr("opacity","0.3"),c.data("hidden",!0)))},t.prototype._showSerieEles=function(e){},t.prototype._hideSerieEles=function(e){},t.prototype._unbindLiveEvents=function(){var e=this,t=e.options,n=this.chartElement,r=e.widgetName;n.undelegate("."+t.wijCSS.legend,".wijchartcore").undelegate("."+t.wijCSS.legend,"wijchartcore"),this._unbindCanvasEvents(),this._unbindResizeEvent()},t.prototype._isBarChart=function(){return!1},t.prototype._isPieChart=function(){},t.prototype._validateSeriesData=function(e){return!1},t.prototype._getOffsetOfAxis=function(e){return 0},t.prototype._calculateParameters=function(e,t){var n=this,r=t.max,i=t.min,s=t.autoMax&&e.autoMax,o=t.autoMin&&e.autoMin,a=t.autoMajor&&e.autoMajor,f=t.autoMinor&&e.autoMinor,l=null,c=null,h=e.annoMethod==="valueLabels",p=0,d=0,v=0,m=0,g=0,y=e.isTime,b=n.options.adjustMinValue;s&&r!==Number.MIN_VALUE&&e.id!=="x"&&n._isBarChart()&&r<0&&.5*(r-i)>-r&&(r=0),o&&i!==Number.MAX_VALUE&&e.id!=="x"&&n._isBarChart()&&i>0&&.5*(r-i)>i&&(i=0),r===i&&(i!==0&&(i-=1),r+=1),m=r-i;if(y){l=t.annoFormatString;if(!l||l.length===0)l=u.getTimeDefaultFormat(r,i),e.annoFormatString=l;g=u.niceTimeUnit(0,l)}c=u.nicePrecision(m),e.tprec=c,s&&(y?(d=u.roundTime(r,g,!0),d<r?r=d+g:r=d):(d=u.precCeil(-c,r),typeof d=="number"&&(r=d))),o&&(y?(v=u.roundTime(i,g,!1),v>i?i=v-g:i=v):(v=u.precFloor(-c,i),typeof v=="number"&&(i=v))),e.max=r,e.min=i,e.originalMax=r,e.originalMin=i,e.annoFormatString=l,e.tinc=g;if(a||f)m=r-i,n._calculateMajorMinor(t,e),p=t.unitMajor,s&&p!==0&&!y&&!h&&(m=r-parseInt((r/p).toString(),10)*p,m!==0&&(r+=p-m,r=u.precCeil(-c,r))),o&&p!==0&&!y&&!h&&(m=i-parseInt((i/p).toString(),10)*p,m!==0&&(m<0&&(m+=p),i-=Math.abs(m),i=u.precFloor(-c,i))),o&&p!==0&&!h&&(typeof b=="undefined"||b===!1)&&o&&i===t.min&&i-p>=0&&e.id==="y"&&(i-=p);e.max=r,e.min=i,e.originalMax=r,e.originalMin=i},t.prototype._supportStacked=function(){return!1},t.prototype._getDataExtreme=function(e){var t={txx:0,txn:0,tyx:0,tyn:0},n;return n=this._getDataExtremes(t,e),n?(n.txn>n.txx&&(n.txn=0,n.txx=1),n):(t.txn>t.txx&&(t.txn=0,t.txx=1),t)},t.prototype._getDataExtremes=function(e,t){var r=this,i=r.options,s=i.seriesList,u=i.stacked&&r._supportStacked(),a=i.is100Percent,f=i.axis,l=r.axisInfo,c=[],h=[],p=[],d=[],v,m={y:{}},g=f.x.valueLabels,y=l.x.annoMethod,b=l.y.annoMethod,w=0;return!s||s.length===0?e:(n.each(s,function(e,t){var r=t.data,i=[],s=[],o,u=0;if(r.xy&&n.isArray(r.xy)){o=r.xy.length;while(u<o)i.push(r.xy[u]),s.push(r.xy[u+1]),u+=2;r.x=i,r.y=s}}),r.seriesGroup&&n.each(r.seriesGroup,function(t,i){var s=[],g=[],y=parseInt(t,10);n.each(i,function(t,i){var o,a=0,f=0,l,d,v,m,y,b,E;if(i.type==="pie"||i.type==="sharedPie")return!0;i=n.extend(!0,{display:"show"},i);if(i.display==="exclude")return!0;E=r._isTrendline(i),o=i.data,l=[].concat(o.xy),d=l.length,c=[].concat(o.x),s=[].concat(o.y);if(!E){if(o.xy&&d){c=[],s=[];while(f<d)c[a]=l[f],s[a]=l[f+1],f+=2,a++,o.x=c,o.y=s}else o.x||(c=[],n.each(s,function(e){c.push(e)}),o.x=c);u&&t>0&&n.each(s,function(e){s[e]+=p[e]}),p=s}else{if(!i.isValid||!i.innerData)return!0;h=i.innerData.x,g=i.innerData.y}v=r._getMinMaxValue(E?h:c),m=r._getMinMaxValue(E?g:s),t===0?(e.tyx=m.max,e.tyn=m.min):(e.tyx<m.max&&(e.tyx=m.max),e.tyn>m.min&&(e.tyn=m.min)),w===0?(e.txx=v.max,e.txn=v.min):(e.txx<v.max&&(e.txx=v.max),e.txn>v.min&&(e.txn=v.min)),w++}),a&&(e.tyx=1,e.tyn=0),m.y[t]={tyx:e.tyx,tyn:e.tyn},m.txx=e.txx,m.txn=e.txn,e.tyx=0,e.tyn=0;if(s.length){v=o.getFirstValidListValue(s);if(r._isDate(v))l.y[t].isTime=!0;else{if(typeof v=="undefined")return!0;typeof v!="number"&&(n.each(s,function(e,t){var n=f.y.annoFormatString,i=t;n&&n.length>0?i=Globalize.format(i,n,r._getCulture()):i=i.toString(),d.push({text:i,value:t,gridLine:!1})}),l.y[t].annoMethod="valueLabels",!f.y[y].valueLabels&&f.y[y].valueLabels.length===0?l.y[t].valueLabels=d:l.y[t].valueLabels=f.y[y].valueLabels,f.x.max=s.length-1,f.x.min=0,f.y[y].unitMajor=1,f.x.unitMinor=.5,l.y[t].autoMax=!1,l.y[t].autoMin=!1,l.y[t].autoMajor=!1,l.y[t].autoMinor=!1)}}}),r._getXAxisInfoValueLabels(l.x,f.x),c.length&&(v=o.getFirstValidListValue(c),g=l.x.valueLabels,r._isDate(v)?l.x.isTime=!0:typeof v!="number"&&(n.each(c,function(e,t){var i={},s,o;if(y==="valueLabels"&&g&&g.length&&e<g.length){s=g[e],o=typeof s;if(o==="string")s={text:s};else if(o==="number"||r._isDate(s))s={value:s}}i=n.extend({text:t,value:e,gridLine:!1},s),d.push(i)}),f.x.max=c.length-1,f.x.min=0,f.x.unitMajor=1,f.x.unitMinor=.5,l.x.annoMethod="valueLabels",l.x.valueLabels=d,l.x.autoMax=!1,l.x.autoMin=!1,l.x.autoMajor=!1,l.x.autoMinor=!1)),m)},t.prototype._getXAxisInfoValueLabels=function(e,t){var n=t.annoMethod,r=t.valueLabels;n==="valueLabels"&&r&&r.length>0&&(e.valueLabels=r)},t.prototype._isVertical=function(e){return e==="west"||e==="east"},t.prototype._isDate=function(e){return e?typeof e=="object"&&e.constructor===Date:!1},t.prototype._getMinMaxValue=function(e){var t=this,r={min:0,max:0},i=0,s;if(!e.length)return r;s=o.getFirstValidListValue(e);if(typeof s!="number"){if(!t._isDate(s))return r.min=0,r.max=e.length-1,r;r.min=s,r.max=s}else r.min=s,r.max=s;for(i=0;i<e.length;i++){if(e[i]===null||typeof e[i]=="undefined")continue;if(typeof e[i]=="number"&&isNaN(e[i]))continue;e[i]<r.min?r.min=e[i]:e[i]>r.max&&(r.max=e[i])}return t._isDate(r.min)&&(r.min=n.toOADate(r.min),r.max=n.toOADate(r.max)),r},t.prototype._getTickTextForCalculateUnit=function(e,t,r){var i=t.isTime,s=t.annoFormatString;return i?Globalize.format(n.fromOADate(e),s,this._getCulture()):n.round(e,r).toString()},t.prototype._calculateMajorMinor=function(e,t){var r=this,i=r.options,s=t.bounds||r.canvasBounds,o=e.autoMajor,a=e.autoMinor,f=t.max,l=t.min,c=t.isTime,h=t.tinc,p=t.annoFormatString,d=null,v=null,m=null,g=null,y=null,b=null,w=null,E=null,S=null,x=f-l,T=0,N=0,C=0,k=0;if(o){S=n.extend(!0,{},i.textStyle,e.textStyle,e.labels.style);if(!c){w=u.nicePrecision(x),E=w+1;if(E<0||E>15)E=0}d=this._getTickTextForCalculateUnit(f,t,w),v=this._getTickTextForCalculateUnit(l,t,w),y=r._text(-1e3,-1e3,d).attr(S),b=r._text(-1e3,-1e3,v).attr(S),m=y.wijGetBBox(),g=b.wijGetBBox(),y.wijRemove(),y=null,b.wijRemove(),b=null,m.width<g.width&&(m.width=g.width),m.height<g.height&&(m.height=g.height),r._isVertical(e.compass)?(N=s.endY-s.startY-t.vOffset-t.axisTextOffset,k=N/m.height,Number.POSITIVE_INFINITY===k?C=0:C=parseInt(k.toString(),10)):(T=s.endX-s.startX-t.vOffset-t.axisTextOffset,k=T/m.width,Number.POSITIVE_INFINITY===k?C=0:C=parseInt(k.toString(),10)),k=x,C>0&&(x/=C,c?x<h?k=h:k=u.niceTimeUnit(x,t.annoFormatString):(t.tprec=u.nicePrecision(x),k=u.niceNumber(2*x,-w,!0),k<x&&(k=u.niceNumber(x,-w+1,!1)),k<x&&(k=u.niceTickNumber(x)))),e.unitMajor=k}a&&e.unitMajor&&!isNaN(e.unitMajor)&&(e.unitMinor=e.unitMajor/2)},t}(e.wijmoWidget);t.wijchartcore=c;var h=function(){function e(){this.annotations=[],this.width=null,this.height=null,this.wijCSS=new p,this.culture="",this.cultureCalendar="",this.autoResize=!0,this.seriesList=[],this.seriesStyles=[{stroke:"#00cc00",opacity:.9,"stroke-width":1},{stroke:"#0099cc",opacity:.9,"stroke-width":1},{stroke:"#0055cc",opacity:.9,"stroke-width":1},{stroke:"#2200cc",opacity:.9,"stroke-width":1},{stroke:"#8800cc",opacity:.9,"stroke-width":1},{stroke:"#d9007e",opacity:.9,"stroke-width":1},{stroke:"#ff0000",opacity:.9,"stroke-width":1},{stroke:"#ff6600",opacity:.9,"stroke-width":1},{stroke:"#ff9900",opacity:.9,"stroke-width":1},{stroke:"#ffcc00",opacity:.9,"stroke-width":1},{stroke:"#ffff00",opacity:.9,"stroke-width":1},{stroke:"#ace600",opacity:.9,"stroke-width":1}],this.seriesHoverStyles=[{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5}],this.marginTop=25,this.marginRight=25,this.marginBottom=25,this.marginLeft=25,this.textStyle={fill:"#888","font-size":10,stroke:"none"},this.header={text:"",style:{fill:"none",stroke:"none"},textStyle:{"font-size":18,fill:"#666",stroke:"none"},compass:"north",visible:!0},this.footer={text:"",style:{fill:"#fff",stroke:"none"},textStyle:{fill:"#000",stroke:"none"},compass:"south",visible:!1},this.legend={text:"",textMargin:{left:2,top:2,right:2,bottom:2},style:{fill:"none",stroke:"none"},textWidth:null,textStyle:{fill:"#333",stroke:"none"},titleStyle:{"font-weight":"bold",fill:"#000",stroke:"none"},compass:"east",orientation:"vertical",visible:!0,reversed:!1,size:{}},this.axis={x:{alignment:"center",style:{stroke:"#999999","stroke-width":.5},visible:!0,textVisible:!0,text:"",textStyle:{fill:"#888","font-size":15,"font-weight":"bold"},labels:{style:{fill:"#333","font-size":11},textAlign:"near",width:null},compass:"south",autoMin:!0,autoMax:!0,min:null,max:null,origin:null,autoMajor:!0,autoMinor:!0,unitMajor:null,unitMinor:null,gridMajor:{visible:!1,style:{stroke:"#CACACA","stroke-dasharray":"- "}},gridMinor:{visible:!1,style:{stroke:"#CACACA","stroke-dasharray":"- "}},tickMajor:{position:"none",style:{fill:"black"},factor:1},tickMinor:{position:"none",style:{fill:"black"},factor:1},annoMethod:"values",annoFormatString:"",valueLabels:[]},y:{alignment:"center",style:{stroke:"#999999","stroke-width":.5},visible:!1,textVisible:!0,text:"",textStyle:{fill:"#888","font-size":15,"font-weight":"bold"},labels:{style:{fill:"#333","font-size":11},textAlign:"center",width:null},compass:"west",autoMin:!0,autoMax:!0,min:null,max:null,origin:null,autoMajor:!0,autoMinor:!0,unitMajor:null,unitMinor:null,gridMajor:{visible:!0,style:{stroke:"#999999","stroke-width":.5,"stroke-dasharray":"none"}},gridMinor:{visible:!1,style:{stroke:"#CACACA","stroke-dasharray":"- "}},tickMajor:{position:"none",style:{fill:"black"},factor:1},tickMinor:{position:"none",style:{fill:"black"},factor:1},annoMethod:"values",annoFormatString:"",valueLabels:[]}},this.hint={enable:!0,content:null,contentStyle:{fill:"#d1d1d1","font-size":16},title:null,titleStyle:{fill:"#d1d1d1","font-size":16},style:{fill:"#000000","stroke-width":2},animated:"fade",showAnimated:"fade",hideAnimated:"fade",duration:120,showDuration:120,hideDuration:120,easing:"",showEasing:"",hideEasing:"",showDelay:0,hideDelay:150,compass:"north",offsetX:0,offsetY:0,showCallout:!0,calloutFilled:!1,calloutFilledStyle:{fill:"#000"},beforeShowing:null,closeBehavior:"auto",relativeTo:"mouse",isContentHtml:!1},this.indicator={visible:!1,style:{stroke:"#000000"}},this.showChartLabels=!0,this.chartLabelStyle={},this.chartLabelFormatString="",this.chartLabelFormatter=null,this.disableDefaultTextStyle=!1,this.shadow=!0,this.dataSource=null,this.data=null,this.beforeSeriesChange=null,this.seriesChanged=null,this.beforePaint=null,this.painted=null,this.seriesTransition={enabled:!0,duration:400,easing:">"}}return e}();t.wijchartcore_options=h;var p=function(e){function t(){e.apply(this,arguments),this.headerText="wijchart-header-text",this.headerContainer="wijchart-header-container",this.footerText="wijchart-footer-text",this.footerContainer="wijchart-footer-container",this.legendTitle="wijchart-legend-title",this.legendText="wijchart-legend-text",this.legend="wijchart-legend",this.legendDot="chart-legend-dot",this.legendIcon="wijchart-legend-icon",this.legendContainer="wijchart-legend-container",this.legendTextCover="wijchart-legend-textCover",this.axis="wijchart-axis",this.axisText="wijchart-axis-text",this.axisGridLine="wijchart-axis-gridline",this.axisTick="wijchart-axis-tick",this.axisLabel="wijchart-axis-label",this.labelText="wijchart-label-text",this.labelConnect="wijchart-label-connect",this.canvasObject="wijchart-canvas-object",this.stateDisabled="ui-state-disabled",this.trendlineElement="trendlineElement",this.trendlineTracker="trendlinetracker"}return __extends(t,e),t}(e.wijmo_css);t.wijchartcore_css=p,c.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new h);var d=function(){function e(){}return e._text=function(e,t,n,r,i){var s=e.text(t,n,r);return i&&(s.node.style.cssText=""),s},e._calculateRectPositionByCompass=function(e,t,n,r){var i={x:0,y:0},s=5,o=5,u=e;switch(t){case"north":i.x=(u.endX-u.startX)/2,i.y=u.startY+r/2+o;break;case"south":i.x=(u.endX-u.startX)/2,i.y=u.endY-r/2-o;break;case"east":i.x=u.endX-n/2-s,i.y=(u.endY-u.startY)/2;break;case"west":i.x=u.startX+n/2+s,i.y=(u.endY-u.startY)/2}return i},e._updateCanvasBoundsByCompass=function(e,t,n,r){var i=5,s=5,o=e;switch(t){case"north":o.startY=o.startY+s*2+r;break;case"south":o.endY=o.endY-s*2-r;break;case"east":o.endX=o.endX-i*2-n;break;case"west":o.startX=o.startX+i*2+n}return o},e._removeRaphaelEle=function(e){if(e){var t=n(e.node);t.unbind().removeData(),e.wijRemove(),t.remove(),t=null}e=null},e._getCulture=function(e,t){return n.wijGetCulture(e,t)},e}(),v=function(){function e(){}return e}();t.BaseRendererOptions=v;var m=function(){function e(e,t){this.canvas=e,this._initData(t)}return e.prototype.render=function(){this._clearElements(),this._paint(),this._bindLiveEvents()},e.prototype.redraw=function(e){this._initData(e),this.render()},e.prototype.destroy=function(){this._clearElements(),this.options=null,this.canvas=null},e.prototype._initData=function(e){this.options=n.extend(!1,{},this.options,e)},e.prototype._paint=function(){},e.prototype._bindLiveEvents=function(){},e.prototype._unbindLiveEvents=function(){},e.prototype._clearElements=function(){this._unbindLiveEvents()},e.prototype._text=function(e,t,n){return d._text(this.canvas,e,t,n,this.options.disableDefaultTextStyle)},e}();t.BaseRenderer=m;var g=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._initData=function(t){e.prototype._initData.call(this,t),this.updatedCanvasBounds=this.options.canvasBounds},t.prototype.render=function(){e.prototype.render.call(this),this._getUpdatedCanvasBounds()},t.prototype._getUpdatedCanvasBounds=function(){var e=this.options,t=e.canvasBounds,n=e.compass,r;this.container&&(r=this.container.wijGetBBox(),this.updatedCanvasBounds=d._updateCanvasBoundsByCompass(t,n,r.width,r.height))},t}(m);t.EdgeElement=g;var y=function(e){function t(t,n){e.call(this,t,n),this.titleMargin=2}return __extends(t,e),t.prototype._paint=function(){this._paintTitle()},t.prototype._paintTitle=function(){var e=this.options,t=e.text,r=e.visible,i=e.compass,s,o=e.textCSS,u=e.textStyle,a=e.containerCSS,f=e.containerStyle,l,c,h=e.canvasBounds,p=e.position,v=n.extend(v,{x:0,y:0},e.offset);t&&t.length>0&&r&&(this.titleTextEle=this._text(0,0,t),n.wijraphael.addClass(n(this.titleTextEle.node),o),s=this._getTitleRotationByCompass(i),this.titleTextEle.attr(u),this.titleTextEle.transform("...R"+s),l=this.titleTextEle.wijGetBBox(),c={width:l.width+2*this.titleMargin,height:l.height+2*this.titleMargin},this.container=this.canvas.rect(0,0,c.width,c.height),i&&!p&&(p=d._calculateRectPositionByCompass(h,i,l.width,l.height)),p&&this._setTitlePosition(p),n.wijraphael.addClass(n(this.container.node),a),this.container.attr(f),this.container.toBack())},t.prototype._getTitleRotationByCompass=function(e){var t=0;return e==="east"?t=90:e==="west"&&(t=-90),t},t.prototype._setTitlePosition=function(e){var t=n.extend(t,{x:0,y:0},this.options.offset),r={x:e.x+=t.x,y:e.y+=t.y},i=this.container.wijGetBBox();this.titleTextEle.transform(Raphael.format("...T{0},{1}",r.x,r.y)),this.container.transform(Raphael.format("...T{0},{1}",r.x-i.width/2,r.y-i.height/2))},t.prototype._clearElements=function(){e.prototype._clearElements.call(this);var t,n;d._removeRaphaelEle(this.titleTextEle),d._removeRaphaelEle(this.container),this.titleTextEle=null,this.container=null},t}(g);t.Title=y;var b=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(v);t.LegendRendererOptions=b;var w=function(e){function t(t,n){this.nodeSetList=[],this.nodeClass="wijlegend-node",e.call(this,t,n)}return __extends(t,e),t.prototype._initData=function(t){this.options&&t.legendInfoList&&(this.options.legendInfoList=[]),e.prototype._initData.call(this,t)},t.prototype._paint=function(){this._paintLegend()},t.prototype._paintLegend=function(){var e=this,t=e.options,r,i,s;this.titleEle=this._paintTitle(),n.each(t.legendInfoList,function(t,s){r=e._paintLabelSet(s),i=e._paintIconSet(s),e.nodeSetList[t]=n.extend(!0,{},e.nodeSetList[t],{label:r.label,labelCover:r.labelCover,icon:i.icon,marker:i.marker})}),e.layoutInfo=e._calculateLayout(),s=e.layoutInfo.position,e.container=e._paintContainer(s.x,s.y,e.layoutInfo.width,e.layoutInfo.height),e._setElementsPosition()},t.prototype._paintTitle=function(){var e=this.options,t=e.title,r;return t&&t.length&&(r=this._text(0,0,t),n.wijraphael.addClass(n(r.node),e.titleCSS),r.wijAttr(e.titleStyle)),r},t.prototype._paintContainer=function(e,t,r,i){var s=this.options,o;return o=this.canvas.rect(e,t,r,i),n.wijraphael.addClass(n(o.node),s.legendCSS),o.attr(s.legendStyle),o.toBack(),o},t.prototype._paintLabelSet=function(e){var t=this,r=t.options,i=r.labelStyle,s,o,u,a;return r.labelWidth?(s=t.canvas.wrapText(0,0,e.label,r.labelWidth,"far",i),a=s.wijGetBBox()):(o=this._text(0,0,e.label),o.wijAttr(i),a=o.wijGetBBox(),s=[o]),n.each(s,function(i,s){n.wijraphael.addClass(n(s.node),r.labelCSS+" "+t.nodeClass),n(s.node).data("vOpacity",s.attr("opacity")).data("legendIndex",e.legendIdx).data("index",e.seriesIdx),t._setElementVisibility(s,e.seriesVisible)}),Raphael.vml&&(u=t.canvas.rect(0,0,a.width,a.height),u.attr({stroke:"none",fill:"#000000",opacity:.01}),n.wijraphael.addClass(n(u.node),r.labelCoverCSS+" "+t.nodeClass),n(u.node).data("legendIndex",e.legendIdx).data("index",e.seriesIdx)),{label:r.labelWidth?s:o,labelCover:u}},t.prototype._paintIconSet=function(e){var t=this.options,r=t.iconSize.width||0,i=t.iconSize.height||0,s,o=e.legendIdx,u=e.seriesIdx,a=e.iconStyle,f=a["stroke-width"]||0,l=e.icon,c=e.markers,h=e.markerStyle,p,d;return l==="rect"?p=this.canvas.rect(0,0,r,i):l==="line"?p=this.canvas.path(Raphael.format("M{0},{1}L{2},{3}",0,0,r,0)):(e.iconSize&&(s=e.iconSize.r),s||(s=t.iconSize.r||0),p=p=this.canvas.paintMarker(l,0,0,s/2)),a&&p.attr(a),n(p.node).data("vOpacity",p.attr("opacity")).data("legendIndex",o).data("index",u),n.wijraphael.addClass(n(p.node),t.iconCSS+" "+this.nodeClass),this._setElementVisibility(p,e.seriesVisible),c&&e.markerVisible&&(h=n.extend({fill:a.fill,stroke:a.stroke,opacity:1},h),c||(c="circle"),d=this.canvas.paintMarker(c,0,0,3),n.wijraphael.addClass(n(d.node),this.options.markerCSS+" "+this.nodeClass),d.attr(h),n(d.node).data("vOpacity",d.attr("opacity")).data("index",u).data("legendIndex",o),this._setElementVisibility(d,e.seriesVisible)),{icon:p,marker:d}},t.prototype._setElementVisibility=function(e,t){if(!e)return;var r=n(e.node),i;if(!r||r.length===0)return;t?(i=r.data("vOpacity")||1,e.attr("opacity",i),r.data("hidden",!1)):(e.attr("opacity","0.3"),r.data("hidden",!0))},t.prototype._calculateLayout=function(){var e=this,t=e.options,r=t.compass,i=t.orientation,s,o=0,u=0,a,f=0,l=0,c=e.nodeSetList.length,h=0,p=0,v=t.iconSize.width||0,m=t.iconSize.height||0,g=t.legendMargin||0,y=t.labelMargin,b=t.canvasBounds,w=b.endX-b.startX,E=b.endY-b.startY,S=1,x=1,T,N,C,k,L;this.titleEle&&(s=this.titleEle.wijGetBBox(),o=s.height,u=s.width),n.each(e.nodeSetList,function(e,t){a=t.label.wijGetBBox(),a.width>f&&(f=a.width),a.height>l&&(l=a.height)}),T=v+f+g+y.left+y.right,N=l+y.top+y.bottom,h=c*T,p=c*N+o;if(r==="east"||r==="west")i==="horizontal"?h>w/2?(S=Math.floor(w/2/T),S<1&&(S=1)):S=c:i==="vertical"&&(p>E?S=Math.ceil(p/E):S=1);else if(r==="south"||r==="north")i==="horizontal"?h>w?(S=Math.floor(c/h*w),S<1&&(S=1)):S=c:i==="vertical"&&(p>E/2?(x=Math.floor(E-o)/2/l,S=Math.ceil(c/x)):S=1);return S===0&&(S=1),C=S*(f+v+g)+S*(y.left+y.right),x=Math.ceil(c/S),k=l*x+o+x*(y.top+y.bottom),C=C>u?C:u,L=d._calculateRectPositionByCompass(b,r,C,k),L.x-=C/2,L.y-=k/2,{width:C,height:k,legendNodeWidth:T,legendNodeHeight:N,columnNum:S,rowNum:x,position:L}},t.prototype._setElementsPosition=function(){var e=this,t=e.options,r=t.compass,i=t.legendMargin||0,s=t.iconSize.width||0,o=t.iconSize.height||0,u=e.layoutInfo,a=u.position,f=u.width,l=u.height,c=u.legendNodeWidth,h=u.legendNodeHeight,p=u.columnNum,d=0,v,m,g,y=0,b;m=a.x,g=a.y,e.titleEle&&(y=e.titleEle.wijGetBBox().height,e.titleEle.transform(Raphael.format("...T{0},{1}",m+f/2,g+y/2))),b=y,n.each(e.nodeSetList,function(n,r){var u=e.options.legendInfoList[n],a=u.icon,f=r.label,l=r.labelCover,v=r.icon,y=r.marker,w,E,S,x,T;E=u.iconStyle["stroke-width"]||0,x=m+d*c+t.labelMargin.left+d*E,T=g+b+h/2,w=f.wijGetBBox(),S=t.labelWidth?f[0]:f,a==="rect"?v.transform(Raphael.format("...T{0},{1}",x,T-o/2-E)):a==="line"?v.transform(Raphael.format("...T{0},{1}",x,T)):v.transform(Raphael.format("...T{0},{1}",x+s/2,T)),y&&y.transform(Raphael.format("...T{0},{1}",x+s/2,T)),t.labelStyle["text-anchor"]==="start"&&(x-=w.width/2),t.labelWidth?f.transform(Raphael.format("...T{0},{1}",x+s+i,T-w.height/2)):f.transform(Raphael.format("...T{0},{1}",x+s+i+w.width/2,T)),l&&(l.transform(Raphael.format("...T{0},{1}",x+s+i,T-w.height/2)),l.toFront()),f.toFront(),d++,d===p&&(d=0,b+=h)})},t.prototype._bindLiveEvents=function(){var e=this,t=e.options;n(e.canvas.canvas).on("click.Legend","."+this.nodeClass,function(t){e._triggerNodeClick(n(t.currentTarget))})},t.prototype._triggerNodeClick=function(e){var t=e.data("legendIndex"),r=e.data("index"),i=!e.data("hidden"),s=this.options.legendClickFunc,o,u,a,f;if(this.options.disabled)return;o={seriesIdx:e.data("index"),legendIdx:e.data("legendIndex"),visible:i},a=this.nodeSetList[t];var l=!0;s&&typeof s=="function"&&(l=s(o)!=="false"),l&&(this._setElementVisibility(a.label,!i),this._setElementVisibility(a.icon,!i),this._setElementVisibility(a.marker,!i),f=a.labelCover,f&&(i?n(f.node).data("hidden",!0):n(f.node).data("hidden",!1)))},t.prototype._unbindLiveEvents=function(){e.prototype._unbindLiveEvents.call(this),n(this.canvas.canvas).off("click.Legend")},t.prototype._clearElements=function(){e.prototype._clearElements.call(this),d._removeRaphaelEle(this.titleEle),this.titleEle=null;for(var t=0;t<this.nodeSetList.length;t++)d._removeRaphaelEle(this.nodeSetList[t].label),d._removeRaphaelEle(this.nodeSetList[t].labelCover),d._removeRaphaelEle(this.nodeSetList[t].icon),d._removeRaphaelEle(this.nodeSetList[t].marker),this.nodeSetList[t]=null;this.nodeSetList=[]},t}(g);t.Legend=w;var E=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(v);t.AxisRendererOptions=E;var S=function(e){function t(t,n){this.thickness=2,this.majorSizeFactor=3,this.minorSizeFactor=2,this.canvasBounds=n.canvasBounds,e.call(this,t,n),this.axisDotGroupList=[],this.axisElements=[]}return __extends(t,e),t.prototype._initData=function(t){e.prototype._initData.call(this,t),this._initStartEndPoints(),this.majorTickRect=this._getTickRect(!0),this.minorTickRect=this._getTickRect(!1),this.majorTickValues=this._getMajorTickValues(),this.minorTickValues=this._getMinorTickValues()},t.prototype._initStartEndPoints=function(){var e=this.options,t=e.compass,n=e.canvasBounds,r={x:0,y:0},i={x:0,y:0},s=this.thickness;switch(t){case"south":r.x=n.startX,r.y=n.endY,i.x=n.endX,i.y=n.endY;break;case"north":r.x=n.startX,r.y=n.startY-s,i.x=n.endX,i.y=n.startY-s;break;case"east":r.x=n.endX-s,r.y=n.endY,i.x=n.endX-s,i.y=n.startY,e.axisOffset&&(r.x+=e.axisOffset,i.x+=e.axisOffset);break;case"west":r.x=n.startX,r.y=n.endY,i.x=n.startX,i.y=n.startY,e.axisOffset&&(r.x-=e.axisOffset,i.x-=e.axisOffset)}this.startPoint=r,this.endPoint=i},t.prototype._paint=function(){var e=this;e.axisElements=[],e._paintAxis(),e.axisMainLineEle&&e.axisElements.push(e.axisMainLineEle),n.each(e.axisDotGroupList,function(t,n){n.tick&&e.axisElements.push(n.tick),n.label&&e.axisElements.push(n.label),n.gridSet&&(n.gridSet.gridLine&&e.axisElements.push(n.gridSet.gridLine),n.gridSet.vlGridLine&&e.axisElements.push(n.gridSet.vlGridLine))}),e.axisTitleEle&&e.axisElements.push(e.axisTitleEle)},t.prototype._paintAxis=function(){var e=this,t=e.options,r=t.canvasBounds,i=e.startPoint,s=e.endPoint,o=t.compass,u=o==="east"||o==="west",a=t.max,f=t.min,l=t.labelOptions,c=0,h=0,p=t.annoFormatString,v=[],m,g,y,b;e.axisMainLineEle=e._paintMainAxisLine(),n.each(this.majorTickValues,function(r,i){var s=i,o=t.isTime,l=t.is100Percent,p=!1,b={},w;if(i<f||i>a)return h++,!0;if(t.annoMethod==="valueLabels"){if(h>=t.valueLabels.length)return!1;s=t.valueLabels[h],p=s.gridLine,b=s.gridLineStyle,s.text!==null&&s.text!==undefined?s=s.text:typeof s.value!="undefined"&&(s=s.value,t.annoFormatString&&t.annoFormatString.length&&(s=Globalize.format(s,t.annoFormatString,d._getCulture(t.culture,t.cultureCalendar))))}else t.annoMethod==="values"&&(t.annoFormatString&&t.annoFormatString.length?(o&&(s=n.fromOADate(i)),s=Globalize.format(s,t.annoFormatString,d._getCulture(t.culture,t.cultureCalendar))):l&&(s=Globalize.format(i,"p0",d._getCulture(t.culture,t.cultureCalendar))));w=e._paintSingleDotGroup(i,s,!0,p,b),e.axisDotGroupList.push(w),m=w.label,m&&(g=m.getBBox(),y=u?g.width:g.height,c<y&&(c=y),v.push({label:m,length:y})),h++}),!l.width&&l.textAlign!=="center"&&n.each(v,function(e,t){m=t.label,m&&(y=t.length,b=(y-c)/2,b=l.textAlign==="near"?b*-1:b,u?m.transform(Raphael.format("...T{0},{1}",b,0)):m.transform(Raphael.format("...T{0},{1}",0,b)))}),n.each(this.minorTickValues,function(t,n){e.axisDotGroupList.push(e._paintSingleDotGroup(n,null,!1))}),e.axisTitleEle=this._paintAxisTitle()},t.prototype._paintMainAxisLine=function(){var e,t=this.options,r=this.startPoint,i=this.endPoint;return t.visible&&(e=this.canvas.line(r.x,r.y,i.x,i.y).attr(t.axisStyle),n.wijraphael.addClass(n(e.node),t.axisCSS)),e},t.prototype._paintSingleDotGroup=function(e,t,n,r,i){var s,o,u,a=this,f=a.options,l=n?f.tickMajor:f.tickMinor,c=n?this.majorTickRect:this.minorTickRect,h=n?f.gridMajor:f.gridMinor,p;return p=a._getSingleDotPositionInfo(e,l,c),o=this._paintGridLine(p.x,p.y,h,r,i),s=this._paintTick(p.x,p.y,l,c),t!=null&&t!==undefined&&(u=this._paintLabel(p.labelX,p.labelY,t.toString())),{tick:s,label:u,gridSet:o}},t.prototype._getSingleDotPositionInfo=function(e,t,n){var r,i,s=-1,o=-1,u=this.options,a=u.max,f=u.min,l=t.position,c=n.height,h=n.width,p=u.labelOptions.width,d=u.axisMaxLabelSize,v=u.axisLabelOffset,m=this.startPoint,g=this.endPoint,y=u.compass,b=y==="east"||y==="west";r=m.x,i=m.y;switch(y){case"south":l==="inside"?i-=c:l==="cross"&&(i-=c/2),p?o=i+v+c:o=i+v+c+d/2;break;case"north":l==="outside"?i-=c:l==="cross"&&(i-=c/2),p?o=i-(v+d):o=i-(v+d/2);break;case"west":l==="outside"?r-=h:l==="cross"&&(r-=h/2),p?s=r-(v+d):s=r-(v+d/2);break;case"east":l==="inside"?r-=h:l==="cross"&&(r-=h/2),p?s=r+v+h:s=r+v+h+d/2}return b?(i+=(e-f)/(a-f)*(g.y-m.y),o=i):(r+=(e-f)/(a-f)*(g.x-m.x),p?s=r-p/2:s=r),{x:r,y:i,labelX:s,labelY:o}},t.prototype._paintGridLine=function(e,t,r,i,s){var o=this.options,u=o.canvasBounds,a=o.compass==="east"||o.compass==="west",f,l,c;return a?f=["M",u.startX,t,"H",u.endX]:f=["M",e,u.startY,"V",u.endY],r.visible&&(l=this.canvas.path(f.join(" ")),n.wijraphael.addClass(n(l.node),o.gridCSS),l.attr(r.style)),i&&(c=this.canvas.path(f.join(" ")),n.wijraphael.addClass(n(c.node),o.gridCSS),c.attr(n.extend(!0,{},r.style,s))),{gridLine:l,vlGridLine:c}},t.prototype._paintTick=function(e,t,r,i){var s=this.options,o=r.position,u=r.style,a=s.compass==="east"||s.compass==="west",f={"stroke-width":2},l,c;return a?o!=="none"&&(l=["M",e,t,"h",i.width],u["stroke-width"]=i.height):o!=="none"&&(l=["M",e,t,"v",i.height],u["stroke-width"]=i.width),o!=="none"&&(c=this.canvas.path(l.join(" ")),n.wijraphael.addClass(n(c.node),s.tickCSS),f=n.extend(f,u),c.attr(f)),c},t.prototype._paintLabel=function(e,t,r){var i=this,s=i.options,o=s.titleVisible,u=s.labelStyle,a=s.labelOptions.textAlign,f=s.labelOptions.width,l,c,h,p=s.compass==="east"||s.compass==="west";return r!==null&&o&&(f?(l=i.canvas.wrapText(e,t,r.toString(),f,a,u),n.wijraphael.addClass(n(l.node),s.labelCSS)):(l=this._text(e,t,r.toString()),n.wijraphael.addClass(n(l.node),s.labelCSS),l.attr(u))),l},t.prototype._paintAxisTitle=function(){var e,t=this,r=t.options,i=r.canvasBounds,s=r.titleText,o=r.titleStyle,u=r.compass,a=r.titleAlignment,f=u==="east"||u==="west",l=r.axisOffset,c=r.axisLabelOffset,h=this.majorTickRect,p=r.tickMajor.position,d=f?h.width:h.height,v=i.startX,m=i.startY,g=i.endX,y=i.endY,b=v,w=m,E={top:0,bottom:0,left:0,right:0},S;if(!s||!s.length)return null;e=this._text(0,0,s.toString()),e.attr(o),n.wijraphael.addClass(n(e.node),r.titleCSS),S=e.wijGetBBox(),n.each(["top","bottom","left","right"],function(e,t){var n=o["margin-"+t];n&&(E[t]=parseFloat(n))}),p==="cross"?d/=2:p==="inside"&&(d=0);if(f){switch(a){case"near":w=y-S.width/2;break;case"center":w=(m+y)/2;break;case"far":w=m+S.width/2}u==="west"?b=v-(r.axisMaxLabelSize+l+c+d+S.height/2+E.right):b=g+r.axisMaxLabelSize+l+c+d+S.height/2+E.left}else{switch(a){case"near":b=v+S.width/2;break;case"center":b=(v+g)/2;break;case"far":b=g-S.width/2}u==="north"?w=m-(r.axisMaxLabelSize+c+d+S.height/2+E.bottom):w=y+r.axisMaxLabelSize+c+d+S.height/2+E.top}return e.attr({x:b,y:w}),f&&e.transform("...R-90"),e},t.prototype._getTickRect=function(e){var t=this.options,n=t.compass,r=0,i=e?t.tickMajor:t.tickMinor,s=i.factor,o=i.position,u=e?this.majorSizeFactor:this.minorSizeFactor,a={x:0,y:0,width:0,height:0};return s=s>0?s:1,r=u*s,o==="none"&&(r=0),n==="east"||n==="west"?(a={x:0,y:-1,width:r*this.thickness,height:this.thickness},n==="east"&&o==="outside"||n==="west"&&o==="inside"?a.width+=2:(o==="cross"&&(a.width<<=1),a.width+=2)):(a={x:-1,y:0,width:this.thickness,height:r*this.thickness},n==="south"&&o==="outside"||n==="north"&&o==="inside"?a.height+=2:(o==="cross"&&(a.height<<=1),a.height+=2)),a},t.prototype._getMajorTickValues=function(){var e=this.options,t=[],r=e.autoMajor,i=e.unitMajor,s,o,u=e.valueLabels;if(e.annoMethod==="valueLabels"&&u&&u.length>0){n.each(u,function(e,t){if(typeof t.text!="undefined"||typeof t.value!="undefined")return!1;typeof t=="string"?u[e]={text:t,gridLine:!1}:u[e]={value:t,gridLine:!1}});if(typeof u[0].value!="undefined")return t=this._getSortedDataValues(),t}return s=r?e.max:e.originalMax,o=r?e.min:e.originalMin,t=this._getTickValues(s,o,i,e.tprec,!e.isTime,r),t},t.prototype._getMinorTickValues=function(){var e=this.options,t=[],n=e.autoMinor,r=e.unitMinor,i,s,o=0,u=0,a=null,f=null;i=n?e.max:e.originalMax,s=n?e.min:e.originalMin,t=this._getTickValues(i,s,r,e.tprec,!e.isTime,n);for(o=t.length-1;o>=0;o--){a=t[o];for(u=this.majorTickValues.length-1;u>=0;u--)f=this.majorTickValues[u],a===f&&t.splice(o,1)}return t},t.prototype._getSortedDataValues=function(){var e=this,t=this.options,r=[],i=t.valueLabels;return n.each(i,function(e,t){var i=t.value;o.isDate(i)?r.push(n.toOADate(i)):typeof i=="number"?r.push(i):r.push(e)}),r},t.prototype._getTickValues=function(e,t,r,i,s,o){var a=this,f=[],l,c=t,h=e,p=0,d=0,v=0,m=0,g=0,y=0;try{if(r===0)f=[e,t];else{o?(i+1<0?i=-1:i+1>15&&(i=14),y=n.round(u.signedCeiling(t/r)*r,i+1),y<e&&(t=y),v=parseInt(n.round(e/r,5).toString(),10),m=parseInt(n.round(t/r,5).toString(),10),g=parseInt((v-m+1).toString(),10),g>1&&(d=m*r,d<t&&(g--,t+=r),d=t+(g-1)*r,d>e&&g--),g<1&&(g=2,t=c,r=e-t)):(g=parseInt(((e-t)/r+1).toString(),10),g>1&&(d=t+(g-1)*r,d>e&&g--),g<1&&(g=2,r=e-t));for(p=0;p<g;p++)s?o?l=n.round(t+p*r,i+1):l=t+p*r:l=t+p*r,l<=h&&l>=c&&f.push(l)}}catch(b){}return f},t.prototype._clearElements=function(){e.prototype._clearElements.call(this);for(var t=0;t<this.axisElements.length;t++)d._removeRaphaelEle(this.axisElements[t]),this.axisElements[t]=null;this.axisMainLineEle=null,this.axisTitleEle=null,this.axisDotGroupList=[],this.axisElements=[]},t}(m);t.Axis=S;var x=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.render=function(){e.prototype.render.call(this)},t}(m);t.Series=x;var T=function(){function t(e,t){var n=this;n.options=t,n.element=e,n._init()}return t.prototype._init=function(){var e=this,t=e.options,r=t.bounds;e.fields=e.element.data("fields")||{},e.chartElements=e.fields.chartElements||{},e.canvas=t.canvas,e.annoTooltip=new f(e.canvas,null,{contentStyle:{fill:"#d1d1d1","font-size":16},style:{fill:"#000000","stroke-width":2},compass:"north",offsetX:0,offsetY:0,relativeTo:"mouse",mouseTrailing:!0,showDelay:0,hideDelay:0,isContentHtml:t.widget.options.hint?t.widget.options.hint.isContentHtml:!1,beforeShowing:function(r,i){var s=t.widget.tooltip;s&&!s.isContentHtml&&s.hide(!0),e.annoTooltip.setOptions({content:n(this.target).data("tooltip")})}}),r&&(e.width=r.endX-r.startX,e.height=r.endY-r.startY)},t.prototype.getChartElementPosition=function(e,t){var n=this,r=n.options.widget,i,s,u,a;if(!n.annoPoints[e]||!n.annoPoints[e][t]){i=r.options.seriesList[e];if(i.isTrendline)return u=o.getNumberValues(i.data.x),a=o.getNumberValues(i.data.y),n.getDataPosition(u[t],a[t]);return}return s=n.annoPoints[e][t],{x:s.x,y:s.y}},t.prototype.getDataPosition=function(e,n){return t.calculateDataPosition(e,n,this)},t.calculateDataPosition=function(e,r,i,s){typeof s=="undefined"&&(s=!1);var o,u,a=i.options,f=a.axis.x,l=n.isArray(a.axis.y)?a.axis.y[0]:a.axis.y;return e instanceof Date&&(e=n.toOADate(e)),r instanceof Date&&(r=n.toOADate(r)),o=t._convertDataToLen(i.width,s?l:f,s?r:e)+a.bounds.startX,u=t._convertDataToLen(i.height,s?f:l,s?e:r,!0)+a.bounds.startY,{x:o,y:u}},t._convertDataToLen=function(e,t,n,r){typeof r=="undefined"&&(r=!1);var i=t.min==null?t.actualMin:t.min,s=t.max==null?t.actualMax:t.max;return r?e*(1-(n-i)/(s-i)):e*(n-i)/(s-i)},t.prototype.render=function(){this.paintAnnotations()},t.prototype.paintAnnotations=function(){var e=this,t=e.options.annotations;if(!n.isArray(t)||t.length===0)return;e.fields.annotationTrackers&&(e.fields.annotationTrackers=null),n.each(t,function(t,n){e._paintAnnotation(n)}),t.length&&e.fields.annotationTrackers&&e.annoTooltip.setOptions({relatedElement:e.fields.annotationTrackers[0]})},t.prototype._changeFirstCharUpper=function(e){var t=e;return t=e[0].toUpperCase(),t+=e.substr(1),t},t.prototype._paintAnnotation=function(t){var n=this,r,i=e.chart[n._changeFirstCharUpper(t.type)],s=n.options.seriesList;if(i==null)return;return r=new i(t),r.render(n),r.attachment=="dataIndex"&&n._updateBoundAnnotations(r),r},t.prototype._updateBoundAnnotations=function(e){var t=this,n=e.seriesIndex,r=e.pointIndex;if(n==null||r==null)return;t.fields.boundAnnotations==null&&(t.fields.boundAnnotations={}),t.fields.boundAnnotations[n]==null&&(t.fields.boundAnnotations[n]={}),t.fields.boundAnnotations[n][r]=e},t}();t.BaseChartRender=T;var N=function(){function e(e){this.attachment="absolute",this.point={x:0,y:0},this.seriesIndex=0,this.pointIndex=0,this.position="center",this.offset={x:0,y:0},this.style={},this.isVisible=!0,this.tooltip=""}return e.prototype._setOptions=function(e){var t=this;n.each(e,function(e,n){t[e]=n})},e.prototype.render=function(e){var t=this,n;n=t._getPosition(e);if(n==null)return;t.paintAnnotation(e,n),t.isVisible||t.toggleVisibility(!1)},e.prototype.toggleVisibility=function(e){var t=this;if(!t._annoText)return;e&&t.isVisible?t._annoText.show():t._annoText.hide()},e.prototype.paintAnnotation=function(e,t){},e.prototype.getSize=function(e){return{width:0,height:0}},e.prototype._getPosition=function(e){var t=this,n=t._getAttachmentPosition(e),r=t._getOffset(e);return n&&(n.x+=r.x,n.y+=r.y),n},e.prototype._getPlotAreaXY=function(e,t){var n=e.options.bounds,t={x:t.x+n.startX,y:t.y+n.startY};return t},e.prototype._getAttachmentPosition=function(e){var t=this,n;switch(t.attachment){case"dataIndex":n=e.getChartElementPosition(t.seriesIndex,t.pointIndex);break;case"dataCoordinate":n=e.getDataPosition(t.point.x,t.point.y);break;case"relative":n=t._getPlotAreaXY(e,{x:t.point.x*e.width,y:t.point.y*e.height});break;case"absolute":default:n=t._getPlotAreaXY(e,{x:t.point.x,y:t.point.y})}return n},e.prototype._getOffset=function(e){var t=this,n={x:0,y:0},r=t.position,i=t.getSize(e);return r.indexOf("top")>-1?n.y-=i.height/2:r.indexOf("bottom")>-1&&(n.y+=i.height/2),r.indexOf("left")>-1?n.x-=i.width/2:r.indexOf("right")>-1&&(n.x+=i.width/2),n.x+=t.offset.x,n.y+=t.offset.y,n},e.prototype._paintAnnotation=function(e,t){var r=this,i,s=e.annoTooltip,o;if(!r.isVisible)return;t&&t.length&&t[0].node&&(i=t[0].clone(),n.browser.msie&&parseInt(n.browser.version)<9?i.attr({opacity:.01,fill:"white","stroke-width":0,"fill-opacity":.01}):i.attr({opacity:.01,fill:"white","fill-opacity":.01}),r.tooltip&&n(i).data("tooltip",r.tooltip),e.fields.annotationTrackers==null&&(e.fields.annotationTrackers=e.canvas.set()),e.fields.annotationTrackers.push(i));if(!e.fields.annotationTrackers)return;o=e.fields.trackers?e.fields.trackers[0]:e.fields.annotationTrackers[0],n.each(t,function(e,t){t.insertBefore(o)}),r.tooltip&&r._bindTooltip(e,i)},e.prototype._bindTooltip=function(e,t){e.annoTooltip.setTargets(t)},e}();t.AnnotationBase=N;var C=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.toggleVisibility=function(t){e.prototype.toggleVisibility.call(this,t);var n=this;if(!n._annoShape)return;t&&n.isVisible?n._annoShape.show():n._annoShape.hide()},t.prototype.paintAnnotation=function(e,t){var n=this;n._paintAnnotation(e,[n._annoShape,n._annoText])},t}(N);t.Shape=C;var k=function(e){function t(t){e.call(this,t),this.radius=25,this._setOptions(t)}return __extends(t,e),t.prototype.paintAnnotation=function(t,n){this._annoShape=t.canvas.circle(n.x,n.y,this.radius),this._annoText=t.canvas.text(n.x,n.y,this.content),this._annoShape.wijAttr(this.style),e.prototype.paintAnnotation.call(this,t,n)},t.prototype.getSize=function(e){return{width:this.radius*2,height:this.radius*2}},t}(C);t.Circle=k;var L=function(e){function t(t){e.call(this,t),this.width=50,this._setOptions(t)}return __extends(t,e),t.prototype.paintAnnotation=function(t,n){var r=this;r._annoShape=t.canvas.box(n.x,n.y,r.width),r._annoText=t.canvas.text(n.x,n.y,r.content),r._annoShape.wijAttr(r.style),e.prototype.paintAnnotation.call(this,t,n)},t.prototype.getSize=function(e){return{width:this.width,height:this.width}},t}(C);t.Square=L;var A=function(e){function t(t){e.call(this,t),this.width=60,this.height=30,this.r=2,this._setOptions(t)}return __extends(t,e),t.prototype.paintAnnotation=function(t,n){var r=this,i=n.x-r.width/2,s=n.y-r.height/2;r._annoShape=t.canvas.rect(i,s,r.width,r.height,r.r),r._annoText=t.canvas.text(n.x,n.y,r.content),r._annoShape.wijAttr(r.style),e.prototype.paintAnnotation.call(this,t,n)},t.prototype.getSize=function(e){return{width:this.width,height:this.height}},t}(C);t.Rect=A;var O=function(e){function t(t){e.call(this,t),this.width=60,this.height=30,this._setOptions(t)}return __extends(t,e),t.prototype.paintAnnotation=function(t,n){var r=this;r._annoShape=t.canvas.ellipse(n.x,n.y,r.width/2,r.height/2),r._annoText=t.canvas.text(n.x,n.y,r.content),r._annoShape.wijAttr(r.style),e.prototype.paintAnnotation.call(this,t,n)},t.prototype.getSize=function(e){return{width:this.width,height:this.height}},t}(C);t.Ellipse=O;var M=function(e){function t(t){e.call(this,t),this._setOptions(t)}return __extends(t,e),t.prototype._getContentCenter=function(){var e=this.start,t=this.end;return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},t.prototype.paintAnnotation=function(t,n){var r=this,i=t.options.bounds.startX,s=t.options.bounds.startY,o,u=r.start,a=r.end,f,l,c,h,p,d;if(!u||!a)return;d=r._getOffset(t),u.x+=d.x,u.y+=d.y,a.x+=d.x,a.y+=d.y,o=r._getContentCenter(),r._annoShape=t.canvas.path("M"+(u.x+i)+","+(u.y+s)+"L"+(a.x+i)+","+(a.y+s));var v=Math.atan2(a.y-u.y,a.x-u.x)*180/Math.PI;v=v<-90?v+180:v>90?v-180:v,r._annoText=t.canvas.text(o.x,o.y,r.content),r._annoShape.wijAttr(r.style),h=r.style["stroke-width"]||1,c=r._annoText.getBBox().height/2+h,p=v*Math.PI/180,f=c*Math.sin(p),l=c*Math.cos(p),r._annoText.attr({x:o.x+i+f,y:o.y+s-l,transform:"r"+v}),e.prototype.paintAnnotation.call(this,t,n)},t.prototype.getSize=function(e){var t=this;return!t.start||!t.end?{width:0,height:0}:{width:t.end.x-t.start.x,height:t.end.y-t.start.x}},t}(C);t.Line=M;var _=function(e){function t(t){e.call(this,t),this._setOptions(t)}return __extends(t,e),t.prototype.paintAnnotation=function(t,r){var i=this,s=i.points,o,u=t.options.bounds,a,f,l,c;if(!s||s.length==0)return;c=i._getOffset(t),n.each(s,function(e,t){t.x+=c.x,t.y+=c.y}),a=u.startX,f=u.startY,o="M"+(s[0].x+a)+" "+(s[0].y+f);for(var h=1;h<s.length;h++)o+="L"+(s[h].x+a)+" "+(s[h].y+f);o+="Z",l=i._getContentCenter(),i._annoShape=t.canvas.path(o),i._annoText=t.canvas.text(l.x+a,l.y+f,i.content),i._annoShape.wijAttr(i.style),e.prototype.paintAnnotation.call(this,t,r)},t.prototype._getContentCenter=function(){var e=this.points,t=e.length,n=0,r=0,i;for(i=0;i<t;i++)n+=e[i].x,r+=e[i].y;return{x:n/t,y:r/t}},t.prototype.getSize=function(e){var t=this,n,r,i,s,o,u,a,f=t.points;if(!f||f.length==0)return{width:0,height:0};a=f.length;for(o=0;o<a;o++){u=f[o];if(o===0){n=r=u.x,i=s=u.y;continue}u.x<n?n=u.x:u.x>r&&(r=u.x),u.y<i?i=u.y:u.y>s&&(s=u.y)}return{width:r-n,height:s-i}},t}(C);t.Polygon=_;var D=function(e){function t(t){e.call(this,t),this.width=60,this.height=60,this._setOptions(t)}return __extends(t,e),t.prototype.paintAnnotation=function(t,n){var r=this;r._annoShape=t.canvas.image(r.href,n.x-r.width/2,n.y-r.height/2,r.width,r.height),r._annoText=t.canvas.text(n.x,n.y,r.content),r._annoShape.wijAttr(r.style),e.prototype.paintAnnotation.call(this,t,n)},t.prototype.getSize=function(e){return{width:this.width,height:this.height}},t}(C);t.Image=D;var P=function(e){function t(t){e.call(this,t),this.text="Text",this._setOptions(t)}return __extends(t,e),t.prototype.paintAnnotation=function(e,t){var n=this;n._annoText=e.canvas.text(t.x,t.y,n.text),n._annoText.wijAttr(n.style),n._paintAnnotation(e,[n._annoText])},t.prototype.getSize=function(e){var t=e.canvas.text(0,0,this.text),n={width:t.getBBox().width,height:t.getBBox().height};return t.remove(),n},t}(N);t.Text=P})(e.chart||(e.chart={}));var t=e.chart})(wijmo||(wijmo={}));