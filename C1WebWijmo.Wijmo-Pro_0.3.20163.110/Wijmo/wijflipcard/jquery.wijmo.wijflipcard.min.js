var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n=jQuery,r="wijmo-wijflipcard",i="wijmo-wijflipcard-panels",s="wijmo-wijflipcard-panel",o="wijmo-wijflipcard-frontpanel",u="wijmo-wijflipcard-backpanel",a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){var t=this;e.prototype._create.call(this);var n=this.element.children("div");this.nativeDivsLength=n.length,this._storeNativePanelsStyles(),n.length===2?(this._getPanelsFromElements(n),this._storeFrontAndBackPanelsStyles()):this._createPanels(),this.isCSS3Enabled=h(),this.isHover=!1,this._decorateFlipCard(),this.frontEleOpacity=this.frontPanel.css("opacity"),this.backEleOpacity=this.backPanel.css("opacity"),this._createAnimation(),this.bounds=this._getBounds(this.element),this._isDisabled()||this._bindEvents()},t.prototype._storeNativePanelsStyles=function(){var e=this.element.attr("class"),t=this.element.attr("style");this.nativeOuterPanelClass=e&&e!==""?e:undefined,this.nativeOuterPanelStyle=t&&t!==""?t:undefined},t.prototype._reStoreNativePanelsStyles=function(){this.nativeOuterPanelClass?this.element.attr("class",this.nativeOuterPanelClass):this.element.removeAttr("class"),this.nativeOuterPanelStyle?this.element.attr("style",this.nativeOuterPanelStyle):this.element.removeAttr("style")},t.prototype._storeFrontAndBackPanelsStyles=function(){var e=this.frontPanel.attr("class"),t=this.frontPanel.attr("style"),n=this.backPanel.attr("class"),r=this.backPanel.attr("style");this.nativeFrontPanelClass=e&&e!==""?e:undefined,this.nativeFrontPanelStyle=t&&t!==""?t:undefined,this.nativeBackPanelClass=n&&n!==""?n:undefined,this.nativeBackPanelStyle=r&&r!==""?r:undefined},t.prototype._reStoreFrontAndBackPanelsStyles=function(){this.nativeFrontPanelClass?this.frontPanel.attr("class",this.nativeFrontPanelClass):this.frontPanel.removeAttr("class"),this.nativeFrontPanelStyle?this.frontPanel.attr("style",this.nativeFrontPanelStyle):this.frontPanel.removeAttr("style"),this.nativeBackPanelClass?this.backPanel.attr("class",this.nativeBackPanelClass):this.backPanel.removeAttr("class"),this.nativeBackPanelStyle?this.backPanel.attr("style",this.nativeBackPanelStyle):this.backPanel.removeAttr("style")},t.prototype._bindEvents=function(){var e=this,t="",r=this.options.triggerEvent;n.support.isTouchEnabled&&n.support.isTouchEnabled()&&n.mobile?this.element.on("touchend.wijflipcard","."+s,n.proxy(this._flipPanels,this)):r==="click"?this.element.on(t+"click.wijflipcard","."+s,n.proxy(this._flipPanels,this)):this.isCSS3Enabled?this.element.on(t+"mouseenter.wijflipcard",this.element,n.proxy(this._flipPanels,this)).on(t+"mouseleave.wijflipcard",this.element,n.proxy(this._flipPanels,this)):(n("body").on(t+"mousemove.wijflipcard",function(t){e.mousePostion={x:t.pageX||t.clientX,y:t.pageY||t.clientY}}),this.element.on(t+"mouseenter.wijflipcard",this.element,n.proxy(this._flipPanelsByMouseEnter,this)).on(t+"mouseleave.wijflipcard",this.element,n.proxy(this._flipPanelsByMouseLeave,this)))},t.prototype._unbindEvents=function(){this.element.off(".wijflipcard"),n("body").off(".wijflipcard")},t.prototype._getBounds=function(e){var t=e.height(),n=e.width(),r=e.offset().top,i=e.offset().left;return{h:t,w:n,t:r,l:i}},t.prototype._isMouseInsideRect=function(e,t){return e.x<t.l||e.x>=t.l+t.w?!1:e.y<=t.t||e.y>=t.t+t.h?!1:!0},t.prototype._flipPanelsByMouseEnter=function(e,t){return!this.isHover&&n(e.currentTarget).data("flipLock")!==1&&(this.isHover=!0,this._flipPanels(e)),t||(e.preventDefault(),e.stopPropagation()),!1},t.prototype._flipPanelsByMouseLeave=function(e,t){return n(e.currentTarget).data("flipLock")!==1&&(this.isHover=!1,this._flipPanels(e)),t||(e.preventDefault(),e.stopPropagation()),!1},t.prototype._flipPanels=function(e){var t=this,r=this.options,i=r.animation,s=i.type,o,u,a=n.wijmo.wijflipcard.animations,f=this.frontPanel.is(":visible"),l,c=f?this.frontPanel:this.backPanel,h=f?this.backPanel:this.frontPanel;i.disabled?this._flipWithoutAnimation(c,h):a&&s&&a[s]&&a[s].animation?a[s].animation(i,this.element,function(){return t._onFlipping()},function(){t.options.triggerEvent!=="click"&&!t.isCSS3Enabled&&(o=t._isMouseInsideRect(t.mousePostion,t.bounds),o!==t.isHover&&(u={currentTarget:t.element},o?t._flipPanelsByMouseEnter(u,!0):t._flipPanelsByMouseLeave(u,!0))),t.isCSS3Enabled?l=t.element.hasClass("wijflipshowback"):l=t.frontPanel.css("visibility")==="hidden",t._onFlipped(l)}):n.effects&&(n.effects[s]||n.effects.effect&&n.effects.effect[s])?this._flipWithJQueryAnimation(c,h):this._flipWithoutAnimation(c,h)},t.prototype._flipWithJQueryAnimation=function(e,t){var n=this,r=this.options,i=r.animation,s=r.duration,o=i.type,u;u=this._trigger("flipping",null,{frontPanel:this.frontPanel,backPanel:this.backPanel});if(u===!1)return;e.hide(o,i,s),t.show(o,i,s,function(){t.css("transform","none"),n._onFlipped()})},t.prototype._flipWithoutAnimation=function(e,t){var n;n=this._trigger("flipping",null,{frontPanel:this.frontPanel,backPanel:this.backPanel});if(n===!1)return;e.hide(),t.show(),this._onFlipped()},t.prototype._onFlipping=function(){return this._trigger("flipping",null,{frontPanel:this.frontPanel,backPanel:this.backPanel})},t.prototype._onFlipped=function(e){if(e===undefined||e===null)e=this.frontPanel.css("display")==="none";this._trigger("flipped",null,{frontPanel:this.frontPanel,backPanel:this.backPanel,isFlipped:e})},t.prototype._createAnimation=function(){var e=this.options,t=e.animation,r=t.type,i=n.wijmo.wijflipcard.animations,s;t.disabled||i&&r&&i[r]&&(s=i[r].create,s&&n.isFunction(s)&&s(t,this.element))},t.prototype._decorateFlipCard=function(){var e=this.options,t=e.wijCSS;this.element.addClass(r).addClass(t.widget),t.wijFlipCardClass.length&&this.element.addClass(t.wijFlipCardClass),this.frontPanel.addClass(s).addClass(o).addClass(t.cornerAll).addClass(t.stateDefault).addClass(t.content),this.backPanel.addClass(s).addClass(u).addClass(t.cornerAll).addClass(t.stateDefault).addClass(t.content),t.wijFlipCardPanelClass.length&&(this.frontPanel.addClass(t.wijFlipCardPanelClass),this.backPanel.addClass(t.wijFlipCardPanelClass)),t.wijFlipCardFrontPanelClass.length&&this.frontPanel.addClass(t.wijFlipCardFrontPanelClass),t.wijFlipCardBackPanelClass.length&&this.backPanel.addClass(t.wijFlipCardBackPanelClass),this._isDisabled()&&this.element.addClass(t.stateDisabled),this._setWidth(e.width),this._setHeight(e.height),this._setCSS3Options()},t.prototype._removeDecoration=function(){var e=this.options,t=e.wijCSS;this.nativeDivsLength===2?(this.frontPanel.appendTo(this.element),this.backPanel.appendTo(this.element),this._reStoreFrontAndBackPanelsStyles()):(this.frontPanel.remove(),this.backPanel.remove()),this.panels.remove(),this._reStoreNativePanelsStyles()},t.prototype._setWidth=function(e){e!==undefined&&e!==null&&(this.element.width(e),this.frontPanel.width(e),this.backPanel.width(e))},t.prototype._setHeight=function(e){e!==undefined&&e!==null&&(this.element.height(e),this.element.find(".wijmo-wijflipcard-frontpanel").height(e),this.element.find(".wijmo-wijflipcard-backpanel").height(e))},t.prototype._setCSS3Options=function(){if(!this.isCSS3Enabled)return;var e=this.element.find(".wijmo-wijflipcard-panel").outerHeight(!0)/2,t=this.element.find(".wijmo-wijflipcard-panel").outerWidth(!0)/2;d(this.element.find(".wijmo-wijflipcard-panels")[0],"transformOrigin",t+"px "+e+"px")},t.prototype._getPanelsFromElements=function(e){this.frontPanel=n(e[0]),this.backPanel=n(e[1]),this.panels=n("<div></div>").appendTo(this.element).addClass(i),this.frontPanel.appendTo(this.panels),this.backPanel.appendTo(this.panels)},t.prototype._createPanels=function(){this.element.empty(),this.panels=n("<div></div>").appendTo(this.element).addClass(i),this.frontPanel=n("<div></div>").appendTo(this.panels),this.backPanel=n("<div></div>").appendTo(this.panels)},t.prototype._setOption=function(t,n){if(this.options[t]!==n)switch(t){case"triggerEvent":this.options[t]=n,this._isDisabled()||(this._unbindEvents(),this._bindEvents());break;case"width":this._setWidth(n),this._setCSS3Options();break;case"height":this._setHeight(n),this._setCSS3Options();break;case"animation":this.options[t]=n,this._resettingAnimation();break;default:}e.prototype._setOption.call(this,t,n)},t.prototype._innerDisable=function(){e.prototype._innerDisable.call(this),this._toggleDisableFlipCard(!0)},t.prototype._innerEnable=function(){e.prototype._innerEnable.call(this),this._toggleDisableFlipCard(!1)},t.prototype._toggleDisableFlipCard=function(e){e?this._unbindEvents():(this._unbindEvents(),this._bindEvents()),this.element.toggleClass(this.options.wijCSS.stateDisabled,e)},t.prototype._resettingAnimation=function(){this.element.removeClass("wijflip").removeClass("wijvflip").removeClass("wijflipshowback").removeClass("ie").removeClass("nonie"),this.frontPanel.css("opacity",this.frontEleOpacity).show(),this.backPanel.css("opacity",this.frontEleOpacity).show(),this.isCSS3Enabled||(this.frontPanel.css("visibility","visible"),this.backPanel.css("visibility","visible")),this._unbindEvents(),this._createAnimation(),this._isDisabled()||this._bindEvents()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this._unbindEvents(),this._removeDecoration()},t}(e.wijmoWidget);t.wijflipcard=a;var f=function(){function e(){this.initSelector=":jqmData(role='wijflipcard')",this.wijCSS={wijFlipCardClass:"",wijFlipCardPanelClass:"",wijFlipCardFrontPanelClass:"",wijFlipCardBackPanelClass:""},this.wijMobileCSS={},this.disabled=!1,this.width=null,this.height=null,this.triggerEvent="click",this.animation={disabled:!1,type:"flip",duration:500,direction:"horizontal"},this.flipping=null,this.flipped=null}return e}();a.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new f),n.wijmo.registerWidget("wijflipcard",a.prototype);var l=function(e){e.elem.style[e.prop]=parseInt(e.now,10)+e.unit},c=function(){return!1};n.extend(n.fx.step,{borderTopWidth:l,borderBottomWidth:l,borderLeftWidth:l,borderRightWidth:l}),n.fn.wijRevertFlip=function(){return this.each(function(){var e=n(this);e.wijFlip(e.data("flipRevertedSettings"))})},n.fn.wijFlip=function(e){return this.each(function(){var t=n(this),r,i,s,o,u,a=c();if(t.data("flipLock")||!e)return!1;if(e&&e.animationStart&&n.isFunction(e.animationStart)&&!e.animationStart.call(this))return!1;var f={direction:function(e){switch(e){case"tb":return"bt";case"bt":return"tb";case"lr":return"rl";case"rl":return"lr";default:return"bt"}}(e.direction),bgColor:e.color||"#999",color:e.bgColor||t.css("background-color"),speed:e.speed||500,animationStart:e.animationStart||function(){},onBefore:e.onBefore||function(){},onEnd:e.onEnd||function(){},onAnimation:e.onAnimation||function(){}};t.data("flipRevertedSettings",f).data("flipLock",1).data("flipSettings",f),r={width:t.width(),height:t.height(),bgColor:e.bgColor||t.css("background-color"),fontSize:t.css("font-size")||"12px",direction:e.direction||"tb",toColor:e.color||"#999",speed:e.speed||500,top:t.offset().top,left:t.offset().left,target:e.content||null,transparent:"transparent",dontChangeColor:e.dontChangeColor||!1,onBefore:e.onBefore||function(){},onEnd:e.onEnd||function(){},onAnimation:e.onAnimation||function(){}},t.data("flipObj",r),a&&(r.transparent="#123456"),i=t.css("visibility","hidden").clone(!0).data("flipLock",1).appendTo("body").html("").css({visibility:"visible",position:"absolute",left:r.left,top:r.top,margin:0,zIndex:9999,"-webkit-box-shadow":"0px 0px 0px #000","-moz-box-shadow":"0px 0px 0px #000"}),t.data("clone",i);var l=function(){return{backgroundColor:r.transparent,fontSize:0,lineHeight:0,borderTopWidth:0,borderLeftWidth:0,borderRightWidth:0,borderBottomWidth:0,borderTopColor:r.transparent,borderBottomColor:r.transparent,borderLeftColor:r.transparent,borderRightColor:r.transparent,background:"none",borderStyle:"solid",height:0,width:0}},h=function(){var e=r.height/100*25,t=l();return t.width=r.width,{start:t,first:{borderTopWidth:0,borderLeftWidth:e,borderRightWidth:e,borderBottomWidth:0,borderTopColor:"#999",borderBottomColor:"#999",top:r.top+r.height/2,left:r.left-e},second:{borderBottomWidth:0,borderTopWidth:0,borderLeftWidth:0,borderRightWidth:0,borderTopColor:r.transparent,borderBottomColor:r.transparent,top:r.top,left:r.left}}},p=function(){var e=r.height/100*25,t=l();return t.height=r.height,{start:t,first:{borderTopWidth:e,borderLeftWidth:0,borderRightWidth:0,borderBottomWidth:e,borderLeftColor:"#999",borderRightColor:"#999",top:r.top-e,left:r.left+r.width/2},second:{borderTopWidth:0,borderLeftWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftColor:r.transparent,borderRightColor:r.transparent,top:r.top,left:r.left}}};o={tb:function(){var e=h();return e.start.borderTopWidth=r.height,e.start.borderTopColor=r.bgColor,e.second.borderBottomWidth=r.height,e.second.borderBottomColor=r.toColor,e},bt:function(){var e=h();return e.start.borderBottomWidth=r.height,e.start.borderBottomColor=r.bgColor,e.second.borderTopWidth=r.height,e.second.borderTopColor=r.toColor,e},lr:function(){var e=p();return e.start.borderLeftWidth=r.width,e.start.borderLeftColor=r.bgColor,e.second.borderRightWidth=r.width,e.second.borderRightColor=r.toColor,e},rl:function(){var e=p();return e.start.borderRightWidth=r.width,e.start.borderRightColor=r.bgColor,e.second.borderLeftWidth=r.width,e.second.borderLeftColor=r.toColor,e}},s=o[r.direction](),a&&(s.start.filter="chroma(color="+r.transparent+")"),u=function(){var e=r.target;return e&&e.jquery?e.html():e},i.queue(function(){r.onBefore(i,t),i.html("").css(s.start),i.dequeue()}),i.animate(s.first,r.speed),i.queue(function(){r.onAnimation(i,t),i.dequeue()}),i.animate(s.second,r.speed),i.queue(function(){r.dontChangeColor||t.css({backgroundColor:r.toColor}),t.css({visibility:"visible"});var e=u();e&&t.html(e),i.remove(),t.removeData("flipLock"),r.onEnd(i,t),i.dequeue()})})};var h=function(){var e=!1;if("WebkitTransform"in document.body.style||"MozTransform"in document.body.style||"OTransform"in document.body.style||"transform"in document.body.style)e=!0;return e},p=function(e){return e.toLowerCase().replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})},d=function(e,t,r){var i=["-moz-","-webkit-","-o-","-ms-","-khtml-",""];n.each(i,function(i,s){var o=n.camelCase(s+t);o in e.style&&(e.style[o]=r)})};n.extend(n.wijmo.wijflipcard,{animations:{flip:{create:function(e,t){var r=e.direction==="horizontal"?"h":"v",i="wij"+(r==="h"?"":"v")+"flip";t.addClass(i),n.browser&&n.browser.msie?t.addClass("ie"):t.addClass("nonie")},animation:function(e,t,r,i){var s=e,f=t.find("."+o),l=t.find("."+u),c=i,p=s.duration||500,d=p+"ms",v=p/2,m=s.direction==="horizontal"?"h":"v",g="wij"+(m==="h"?"":"v")+"flip";if(h()){s.duration&&(n.browser.msie?t.find(".wijmo-wijflipcard-panel").css("transition-duration",d):t.find(".wijmo-wijflipcard-panels").css("transition-duration",d).css("-ms-transition-duration",d));if(r&&n.isFunction(r)&&r.call(a)===!1)return;t.on("transitionend.wij webkitTransitionEnd.wij oTransitionEnd.wij otransitionend.wij MSTransitionEnd.wij",function(){i&&n.isFunction(i)&&i.call(a),t.off(".wij")}),t.toggleClass("wijflipshowback")}else t.data("flipped")?(t.wijRevertFlip(),t.data("flipped",!1)):(t.stop(!0,!0).wijFlip({direction:s.direction==="horizontal"?"lr":"tb",speed:p,color:l.css("background-color"),bgColor:f.css("background-color"),animationStart:r,onBefore:function(){f.css("visibility","hidden"),l.css("visibility","hidden")},onEnd:function(){t.data("flipped")?l.css("visibility","visible").css("transform","none"):f.css("visibility","visible").css("transform","none"),i&&n.isFunction(i)&&i.call(this)}}),t.data("flipped",!0))},destroy:function(e){e.removeClass("wijflip").removeClass("wijvflip").removeClass("ie").removeClass("nonie")}}}})})(e.flipcard||(e.flipcard={}));var t=e.flipcard})(wijmo||(wijmo={}));