var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n=jQuery,r="wijdialog",i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){return n.ui.dialog.prototype._create.apply(this,arguments)},t.prototype._init=function(){return n.ui.dialog.prototype._init.apply(this,arguments)},t.prototype._destroy=function(){return n.ui.dialog.prototype._destroy.apply(this,arguments)},t.prototype._appendTo=function(){return n.ui.dialog.prototype._appendTo.apply(this,arguments)},t.prototype._setOptions=function(){return n.ui.dialog.prototype._setOptions.apply(this,arguments)},t.prototype._setOption=function(e,t){return n.ui.dialog.prototype._setOption.apply(this,arguments)},t.prototype.widget=function(){return n.ui.dialog.prototype.widget.apply(this,arguments)},t.prototype.close=function(){return n.ui.dialog.prototype.close.apply(this,arguments)},t.prototype.isOpen=function(){return n.ui.dialog.prototype.isOpen.apply(this,arguments)},t.prototype.moveToTop=function(){return n.ui.dialog.prototype.moveToTop.apply(this,arguments)},t.prototype._moveToTop=function(){return n.ui.dialog.prototype._moveToTop.apply(this,arguments)},t.prototype.open=function(){return n.ui.dialog.prototype.open.apply(this,arguments)},t.prototype._focusTabbable=function(){return n.ui.dialog.prototype._focusTabbable.apply(this,arguments)},t.prototype._keepFocus=function(){return n.ui.dialog.prototype._keepFocus.apply(this,arguments)},t.prototype._createWrapper=function(){return n.ui.dialog.prototype._createWrapper.apply(this,arguments)},t.prototype._createTitlebar=function(){return n.ui.dialog.prototype._createTitlebar.apply(this,arguments)},t.prototype._title=function(){return n.ui.dialog.prototype._title.apply(this,arguments)},t.prototype._createButtonPane=function(){return n.ui.dialog.prototype._createButtonPane.apply(this,arguments)},t.prototype._createButtons=function(){return n.ui.dialog.prototype._createButtons.apply(this,arguments)},t.prototype._makeDraggable=function(){return n.ui.dialog.prototype._makeDraggable.apply(this,arguments)},t.prototype._makeResizable=function(){return n.ui.dialog.prototype._makeResizable.apply(this,arguments)},t.prototype._minHeight=function(){return n.ui.dialog.prototype._minHeight.apply(this,arguments)},t.prototype._position=function(){return n.ui.dialog.prototype._position.apply(this,arguments)},t.prototype._size=function(){return n.ui.dialog.prototype._size.apply(this,arguments)},t.prototype._blockFrames=function(){return n.ui.dialog.prototype._blockFrames.apply(this,arguments)},t.prototype._unblockFrames=function(){return n.ui.dialog.prototype._unblockFrames.apply(this,arguments)},t.prototype._createOverlay=function(){return n.ui.dialog.prototype._createOverlay.apply(this,arguments)},t.prototype._destroyOverlay=function(){return n.ui.dialog.prototype._destroyOverlay.apply(this,arguments)},t.prototype._trackFocus=function(){var e;this._on(this.widget(),{focusin:function(t){this._untrackInstance(),this._trackingInstances().unshift(this),e=n(t.target).parents(".ui-dialog-content"),e&&e.length>0&&(this._focusedElement=n(t.target))}})},t}(e.JQueryUIWidget);t.JQueryUIDialog=i;var s=function(){function e(){this.wijCSS={wijdialog:"wijmo-wijdialog",wijdialogZone:"wijmo-wijdialog-defaultdockingzone",uiFront:"ui-front",uiDialog:"ui-dialog",wijdialogOverlay:"ui-dialog-overlay",uiDialogContent:"ui-dialog-content",wijdialogCaptionButton:"wijmo-wijdialog-captionbutton",wijdialogHasFrame:"wijmo-wijdialog-hasframe",iconPinW:"ui-icon-pin-w",iconPinS:"ui-icon-pin-s",iconRefresh:"ui-icon-refresh",iconCarat1N:"ui-icon-carat-1-n",iconCarat1S:"ui-icon-carat-1-s",iconMinus:"ui-icon-minus",iconExtlink:"ui-icon-extlink",iconNewWin:"ui-icon-newwin",uiDialogClose:"ui-dialog-titlebar-close",uiDialogTitleBar:"ui-dialog-titlebar",uiDialogButtonPanel:"ui-dialog-buttonpane",uiDialogButtons:"ui-dialog-buttons",wijdialogTitleBarClose:"",wijdialogTitleBarPin:"",wijdialogTitleBarRefresh:"",wijdialogTitleBarToggle:"",wijdialogTitleBarMinimize:"",wijdialogTitleBarMaximize:"",wijdialogTitleBarRestore:""},this.appendTo="body",this.autoOpen=!0,this.buttons=[],this.closeOnEscape=!0,this.closeText="Close",this.dialogClass="",this.draggable=!0,this.height="auto",this.hide=null,this.maxHeight=null,this.maxWidth=null,this.minHeight=150,this.minWidth=150,this.modal=!1,this.position={my:"center",at:"center",of:window},this.resizable=!0,this.show=null,this.title=null,this.width=300,this.stack=!0,this.beforeClose=null,this.close=null,this.create=null,this.drag=null,this.dragStart=null,this.dragStop=null,this.focus=null,this.open=null,this.resize=null,this.resizeStart=null,this.resizeStop=null,this.zIndex=1e3,this.initSelector="",this.captionButtons={},this.collapsingAnimation=null,this.expandingAnimation=null,this.contentUrl="",this.minimizeZoneElementId="",this.buttonCreating=null,this.stateChanged=null,this.blur=null}return e}(),o="wijmo-wijdialog-titlebar-",u=["blind","bounce","clip","drop","explode","fold","size","shake","slide","transfer"],a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){var t=this,r=t.options,i=r.wijCSS,s=t.element,o=s.attr("title");t.buttonKeys={},n.ui.dialog.maxZ=n.ui.dialog.maxZ||100,s.uniqueId(),n.isArray(r.buttons)&&n.each(r.buttons,function(e,t){var n=t.click;n&&typeof n=="string"&&window[n]&&(t.click=window[n])}),t.form=s.closest("form[id]"),e.prototype._create.call(this),t._replaceClasses(s,["ui-dialog-content","ui-widget-content"],[i.uiDialogContent,i.content]),t._replaceClasses(t.uiDialog,["ui-dialog","ui-widget","ui-widget-content","ui-corner-all","ui-front"],[i.uiDialog,i.widget,i.content,i.cornerAll,i.uiFront,i.wijdialog,t.options.dialogClass]),o&&t.uiDialog.attr("title",o),t._replaceClasses(t.uiDialogTitlebar,["ui-dialog-titlebar","ui-widget-header","ui-corner-all","ui-helper-clearfix"],[i.uiDialogTitleBar,i.header,i.cornerAll,i.helperClearFix]),t._initWijWindow(),t._bindWindowResize(),t._attachDraggableResizableEvent(),t._originalPosition=r.position,t.uiDialog.css({zIndex:r.zIndex}),t.isPin=!1,t._initialCloseOption(),t._initDraggable(),t._bindFormOnSubimt()},t.prototype._isInnerFrame=function(){return!!this.innerFrame},t.prototype._bindFormOnSubimt=function(){var e=this;if(e.options.appendTo!=="body"||e.form.length===0)return;e.formOnSubmit=e.form[0].onsubmit,e.form[0].onsubmit=function(){return e._appendToForm(),e.formOnSubmit?e.formOnSubmit.call(this):!0},e.uiDialog.find("input[type='submit'], button[type='submit']").on("click.wijdialog",function(){e._appendToForm()})},t.prototype._appendToForm=function(){var e=this,t=e.uiDialog,r=e.options,i=r.wijCSS.wijdialogZone,s;if(n.contains(e.form[0],e.uiDialog[0]))return;e.minimized&&!e._isInnerFrame()?(s=n("."+i),s.size()===0&&(s=n('<div class="'+i+'"></div>'),n(document.body).append(s)),s.append(t).css("z-index",t.css("z-index")).appendTo(e.form)):t.appendTo(e.form)},t.prototype._unbindFormOnSubmit=function(){var e=this;if(e.options.appendTo!=="body"||e.form.length===0)return;e.uiDialog.find("input[type='submit'], button[type='submit']").off("click.wijdialog"),e.form[0].onsubmit=null,e.formOnSubmit&&(e.form[0].onsubmit=e.formOnSubmit)},t.prototype._replaceClasses=function(e,t,n){e.removeClass(t.join(" ")).addClass(n.join(" "))},t.prototype._createButtonPane=function(){var t=this,n=t.options.wijCSS;e.prototype._createButtonPane.call(this),t._replaceClasses(t.uiDialogButtonPane,["ui-dialog-buttonpane","ui-widget-content","ui-helper-clearfix"],[n.uiDialogButtonPanel,n.content,n.helperClearFix])},t.prototype._createButtons=function(){e.prototype._createButtons.call(this),this.uiDialog.hasClass("ui-dialog-buttons")&&this._replaceClasses(this.uiDialog,["ui-dialog-buttons"],[this.options.wijCSS.uiDialogButtons])},t.prototype._makeDraggable=function(){e.prototype._makeDraggable.call(this);var t=this.uiDialog.draggable("option","cancel");t||(t=""),t+=(t===""?".":", .")+this.options.wijCSS.wijdialogCaptionButton+", "+"input",this.uiDialog.draggable("option","cancel",t)},t.prototype._createOverlay=function(){var t=this,n=this.options.wijCSS;e.prototype._createOverlay.call(this),t.overlay&&t._replaceClasses(t.overlay,["ui-widget-overlay","ui-front","ui-dialog-overlay"],[n.overlay,n.uiFront,n.wijdialogOverlay])},t.prototype._handleDisabledOption=function(e){var t=this;t.uiDialog.removeClass(t.options.wijCSS.stateDisabled),e?(t.disabledDiv||(t.disabledDiv=t._createDisabledDiv()),t.disabledDiv.appendTo(t.options.appendTo),n.browser.msie&&t.uiDialog.data("ui-draggable")&&t.uiDialog.draggable("disable"),this.uiDialog.addClass(this.options.wijCSS.stateDisabled)):(t._destroyDisabledDiv(),n.browser.msie&&t.uiDialog.data("ui-draggable")&&t.uiDialog.draggable("enable"))},t.prototype._createDisabledDiv=function(){var e=this,t,r=e.uiDialog,i=r.offset(),s=r.outerWidth(),o=r.outerHeight();return t=n("<div></div>").addClass(e.options.wijCSS.stateDisabled).css({"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top}),n.browser.msie&&(t.css("background-color","white"),n.browser.version==="9.0"&&t.css("opacity","0.1")),t},t.prototype._destroyDisabledDiv=function(){var e=this;e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null)},t.prototype._sizeDisabledDiv=function(){var e=this,t=e.uiDialog;e.disabledDiv&&e.disabledDiv.css({width:t.outerWidth(!0),height:t.outerHeight(!0)})},t.prototype._positionDisabledDiv=function(){var e=this,t=e.uiDialog.offset();e.disabledDiv&&e.disabledDiv.css({left:t.left,top:t.top})},t.prototype._size=function(){e.prototype._size.call(this),this._sizeDisabledDiv()},t.prototype._destroyResizable=function(){this.options.resizable&&n.fn.resizable&&this.uiDialog.resizable("destroy")},t.prototype._destroyDraggable=function(){this.options.draggable&&n.fn.draggable&&this.uiDialog.draggable("destroy")},t.prototype._unbindCaptionButtons=function(){var e=this,t=e.options.wijCSS,r=n("."+t.wijdialogCaptionButton,e.uiDialog);r&&r.length>0&&r.off().remove()},t.prototype._clearVariables=function(){var e=this;e._originalPosition=undefined,e.uiDialog=undefined,e.isPin=undefined,e.disabledDiv=undefined,e.innerFrame=undefined,e.uiDialogButtonPane=undefined,e.contentWrapper=undefined,e.form=undefined,e.toggleHeight=undefined,e.minimized=undefined,e.collapsed=undefined,e.maximized=undefined,e._toggleHeight=undefined,e.normalState=undefined,e.initWidth=undefined,e.initHeight=undefined,e.copy=undefined,e._isOpen=undefined,e.formOnSubmit=undefined,e.opener=undefined,e.document=undefined,e.buttonKeys&&(n.each(e.buttonKeys,function(t){e[t]&&(e[t]=undefined)}),e.buttonKeys=undefined),e.uiDialogTitlebar=undefined,delete e.disabledDiv,delete e.uiDialogButtonPane,delete e.uiDialogTitlebar,delete e.uiDialog,delete e.contentWrapper,delete e.uiButtonSet,delete e.bindings},t.prototype.destroy=function(){var t=this,n=t.options.wijCSS;t._destroyDisabledDiv(),t._unbindFormOnSubmit(),t.uiDialog.unbind(".wijdialog"),t._unbindWindowResize(),t._destoryIframeMask(),t.element.removeUniqueId(),t.element.removeAttr("scrollTop").removeAttr("scrollLeft"),t._destroyResizable(),t._destroyDraggable(),t._unbindCaptionButtons(),e.prototype.destroy.call(this),t.element.removeClass(n.uiDialogContent).removeClass(n.content),t.element.unbind(".wijdialog").removeData("wijdialog").removeData(this.widgetFullName),t._clearVariables()},t.prototype._attachDraggableResizableEvent=function(){var e=this,t=e.uiDialog,r=e.options;r.draggable&&t.draggable&&t.bind("dragstop.wijdialog",function(t){e._saveNormalState(),e._destoryIframeMask()}).bind("dragstart.wijdialog",function(t){n(t.target).is(".wijmo-wijdialog")&&e._createIframeMask()}),r.resizable&&t.resizable&&t.bind("resizestop.wijdialog",function(t){e._saveNormalState(),e._destoryIframeMask()}).bind("resizestart.wijdialog",function(t){e._createIframeMask(),e.initWidth===undefined&&e.initHeight===undefined&&(e.initWidth=e.uiDialog.width(),e.initHeight=e.uiDialog.height())})},t.prototype._createIframeMask=function(){var e=this;e.innerFrame&&(e.mask=n("<div style='width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:"+(n.ui.dialog.maxZ+1)+"'></div>").appendTo(e.uiDialog))},t.prototype._destoryIframeMask=function(){var e=this;e.innerFrame&&e.mask&&(e.mask.remove(),e.mask=undefined)},t.prototype._initWijWindow=function(){var e=this,t=!0;e._createCaptionButtons(),e._checkUrl(),e.uiDialog.bind("mousedown.wijdialog",function(t){var r=t.target;!n.contains(e.element[0],r)&&!(n(r).closest("."+e.options.wijCSS.wijdialogCaptionButton).length>0)&&e.uiDialog.focus()}).bind("mouseenter.wijdialog",function(e){t=!0}).bind("mouseleave.wijdialog",function(e){t=!1}).bind("focusout.wijdialog",function(n){t||e._trigger("blur",n,{el:e.element})})},t.prototype._moveToTop=function(e,t){var r=this,i=r.options,s,o,u,a;return i.modal&&!t||!i.stack&&!i.modal?(r._trigger("focus",e),(n.browser.msie||navigator.userAgent.indexOf("Edge/")>0)&&i.draggable&&e&&e.target&&(a=n(e.target),o=r.uiDialog.draggable("option","handle"),u=r.uiDialog.draggable("option","cancel"),!a.hasClass("ui-resizable-handle")&&!a.hasClass("ui-dialog-title")&&(o&&!a.is(o)||a.is(u))&&e.stopImmediatePropagation()),!1):(i.zIndex>n.ui.dialog.maxZ&&(n.ui.dialog.maxZ=i.zIndex),r.overlay&&(n.ui.dialog.maxZ+=1,r.overlay.css("z-index",n.ui.dialog.maxZ)),s={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},n.ui.dialog.maxZ+=1,r.uiDialog.css("z-index",n.ui.dialog.maxZ),r.element.attr(s),r._trigger("focus",e),!1)},t.prototype._checkUrl=function(){var e=this,t=e.options,r=t.contentUrl,i=n('<iframe style="width:100%;height:99%;" frameborder="0"></iframe>');typeof r=="string"&&r.length>0&&(e.element.addClass(t.wijCSS.wijdialogHasFrame),e.element.append(i),e.innerFrame=i),e.contentWrapper=e.element},t.prototype._setOption=function(t,r){var i=this,s=i._isDisabled(),o;e.prototype._setOption.call(this,t,r);if(t==="disabled"){i.options.disabled=r,o=i._isDisabled();if(s===o)return;i._handleDisabledOption(o)}else if(t==="contentUrl"){if(i.getState()==="minimized"||!i.innerFrame&&!r)return;i.innerFrame?i.innerFrame.attr("src",r):(i._checkUrl(),i.innerFrame.attr("src",r))}else t==="captionButtons"?i._createCaptionButtons():t==="minimizeZoneElementId"?i.getState()==="minimized"&&n("#"+r).length>0&&n("#"+r).append(i.uiDialog):t==="stack"?r||i.uiDialog.css("z-index",i.options.zIndex):t==="close"?i._initialCloseOption():t==="draggable"&&i._initDraggable()},t.prototype._initDraggable=function(){window.navigator.userAgent.match(/iPhone|iPad|iPod/i)&&this.options.draggable&&this.uiDialog.data("ui-draggable")&&this.uiDialog.draggable("option","handle",!1)},t.prototype._createCaptionButtons=function(){var e=[],t=this,r=t.options,i,s=r.wijCSS,o={pin:{visible:!0,click:t.pin,title:t._getLocalizedString("pin","Pin"),iconClassOn:s.iconPinW,iconClassOff:s.iconPinS},refresh:{visible:!0,click:t.refresh,title:t._getLocalizedString("refresh","Refresh"),iconClassOn:s.iconRefresh},toggle:{visible:!0,click:t.toggle,title:t._getLocalizedString("toggle","Toggle"),iconClassOn:s.iconCarat1N,iconClassOff:s.iconCarat1S},minimize:{visible:!0,click:t.minimize,title:t._getLocalizedString("minimize","Minimize"),iconClassOn:s.iconMinus},maximize:{visible:!0,click:t.maximize,title:t._getLocalizedString("maximize","Maximize"),iconClassOn:s.iconExtlink},close:{visible:!0,text:r.closeText,click:t.close,title:t._getLocalizedString("close","Close"),iconClassOn:s.iconClose}},u=r.captionButtons,a=t.uiDialogTitlebar,f=a.children("."+r.wijCSS.uiDialogClose+", ."+r.wijCSS.wijdialogCaptionButton);t._off&&t._off(f,"click"),f.remove(),n.each(o,function(t,r){u&&u[t]&&n.extend(r,u[t]),e.push({button:t,info:r})}),t._trigger("buttonCreating",null,e);for(i=0;i<e.length;i++)t._createCaptionButton(e[i],a)},t.prototype._createCaptionButton=function(e,t,r){var i=this,s=i.options.wijCSS,u,a=t.children("."+o+e.button),f=e.info,l=n("<span></span>"),c=e.button+"Button";if(f.visible){if(a.size()===0){l.addClass([s.icon,f.iconClassOn].join(" ")).text(f.text||e.button),u=n('<a href="#"></a>').append(l).addClass([o+e.button,s["wijdialogTitleBar"+e.button.charAt(0).toUpperCase()+e.button.substring(1)],s.cornerAll,s.wijdialogCaptionButton].join(" ")).attr("role","button").attr("title",f.title?f.title:"").hover(function(){u.addClass(s.stateHover)},function(){u.removeClass(s.stateHover)}).click(function(e){return l.hasAllClasses(f.iconClassOff)?l.removeClass(f.iconClassOff):l.addClass(f.iconClassOff),n.isFunction(f.click)&&f.click.apply(i,arguments),!1});if(r)return u;u.appendTo(t)}i[c]=u,i.buttonKeys[c]=!0}else a.remove()},t.prototype.pin=function(){var e=this,t=e.isPin,n=e.pinButton.children("span"),r=e.options.wijCSS;t?n.removeClass(r.iconPinS):n.length&&(n.hasAllClasses(r.iconPinS)||n.addClass(r.iconPinS)),e._enableDisableDragger(!t),e.isPin=!t},t.prototype.refresh=function(){var e=this.innerFrame;e!==undefined&&e.attr("src",e.attr("src"))},t.prototype.toggle=function(){var e=this,t=e.toggleButton.children("span"),n=e.options.wijCSS;if(e.minimized)return;e.collapsed?(e.collapsed=!1,t.hasAllClasses(n.iconCarat1S)&&t.removeClass(n.iconCarat1S),e._expandDialogContent(!0)):(e.collapsed=!0,t.hasAllClasses(n.iconCarat1S)||t.addClass(n.iconCarat1S),e._collapseDialogContent(!0))},t.prototype._expandDialogContent=function(e){var t=this,r=t.options,i=r.expandingAnimation;t.uiDialog.height("auto"),e&&i!==null?t.contentWrapper.show(i.animated,i.options,i.duration,function(e){t.uiDialog.css("height",t._toggleHeight),n.isFunction(i.callback)&&i.callback(e),r.resizable&&t._enableDisableResizer(!1)}):(t.contentWrapper.show(),r.resizable&&t._enableDisableResizer(!1),t.uiDialog.css("height",t.toggleHeight))},t.prototype._collapseDialogContent=function(e,t){var n=this,r=n.options,i=r.collapsingAnimation;r.resizable&&n._enableDisableResizer(!0),t||(n._toggleHeight=n.uiDialog[0].style.height),n.uiDialog.height("auto"),e&&i!==null?n.contentWrapper.hide(i.animated,i.options,i.duration):n.contentWrapper.hide(),n._enableDisableDragger(n.isPin)},t.prototype._enableDisableResizer=function(e){var t=this.uiDialog;if(!this.options.resizable)return;t.resizable({disabled:e}),e&&t.removeClass(this.options.wijCSS.stateDisabled)},t.prototype._enableDisableDragger=function(e){var t=this.uiDialog;if(!this.options.draggable)return;t.draggable({disabled:e}),e&&t.removeClass(this.options.wijCSS.stateDisabled)},t.prototype._position=function(){var e=this.options.position,t=[],r=[0,0],i;if(e){if(typeof e=="string"||typeof e=="object"&&"0"in e)t=e.split?e.split(" "):[e[0],e[1]],t.length===1&&(t[1]=t[0]),n.each(["left","top"],function(e,n){+t[e]===t[e]&&(r[e]=t[e],t[e]=n)}),e={my:t[0]+(r[0]<0?r[0]:"+"+r[0])+" "+t[1]+(r[1]<0?r[1]:"+"+r[1]),at:t.join(" ")};e=n.extend({},n.ui.dialog.prototype.options.position,e)}else e=n.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(e),this._positionDisabledDiv(),i||this.uiDialog.hide()},t.prototype.minimize=function(){var e=this,t=e.uiDialog,r=e.options,i=r.wijCSS,s=null,o=n("<div></div>"),u=n("<div></div>"),a,f,l,c,h,p,d={},v={},m="uiDialog";if(e.minimized)return;c=t.position(),d={width:t.width(),height:t.height()},p=e.getState(),e.maximized?(e.maximized=!1,e.restoreButton.remove(),n(window).unbind(".onWinResize")):(e.collapsed&&e._expandDialogContent(!1),e._saveNormalState()),e._enableDisableResizer(!0),e.collapsed&&e._collapseDialogContent(!1),o.appendTo(e.options.appendTo).css({top:t.offset().top,left:t.offset().left,height:t.innerHeight(),width:t.innerWidth(),position:"absolute"}),e.contentWrapper.hide(),e.uiDialogButtonPane.length&&e.uiDialogButtonPane.hide(),t.height("auto"),t.width("auto"),e._doButtonAction(e.minimizeButton,"hide"),e._restoreButton(!0,e.minimizeButton,"After"),e._doButtonAction(e.pinButton,"hide"),e._doButtonAction(e.refreshButton,"hide"),e._doButtonAction(e.toggleButton,"hide"),e._doButtonAction(e.maximizeButton,"show"),n.browser.webkit&&n("."+i.wijdialogCaptionButton,t).css("float","left"),e.innerFrame&&(m="copy",e[m]=t.clone(),e[m].empty(),e.uiDialogTitlebar.appendTo(e[m])),r.minimizeZoneElementId.length>0&&(s=n("#"+r.minimizeZoneElementId)),s!==null&&s.size()>0?s.append(e[m]):(a=n("."+i.wijdialogZone),a.size()===0&&(a=n('<div class="'+i.wijdialogZone+'"></div>'),n(document.body).append(a)),a.append(e[m]).css("z-index",t.css("z-index"))),e[m].css("position","static"),e[m].css("float","left"),n.browser.msie&&n.browser.version==="6.0"&&(f=n(document).scrollTop(),l=document.documentElement.clientHeight-a.height()+f,a.css({position:"absolute",left:"0px",top:l})),u.appendTo("body").css({top:e[m].offset().top,left:e[m].offset().left,height:e[m].innerHeight(),width:e[m].innerWidth(),position:"absolute"}),t.hide(),e.innerFrame&&e[m].hide(),o.effect("transfer",{to:u,className:i.content},100,function(){o.remove(),u.remove(),e[m].show(),e.minimized=!0,h=t.position(),v={width:t.width(),height:t.height()},e._enableDisableDragger(!0),e._trigger("resize",null,{originalPosition:c,originalSize:d,position:h,size:v}),e._trigger("stateChanged",null,{originalState:p,state:"minimized"})})},t.prototype._doButtonAction=function(e,t){e!==undefined&&(e.removeClass(this.options.wijCSS.stateHover),e[t]())},t.prototype.maximize=function(){var e=this,t=n(window),r=e.uiDialog,i={},s={},o,u,a;if(e.maximized)return;e._enableDisableDragger(!1),a=r.position(),i={width:r.width(),height:r.height()},e.minimized?e.restore():(e.collapsed&&e._expandDialogContent(!1),e._saveNormalState(),o="normal"),e.maximized=!0,e.maximizeButton!==undefined&&(e.maximizeButton.hide(),e._restoreButton(!0,e.maximizeButton,"Before")),n.browser.webkit&&n("."+this.options.wijCSS.wijdialogCaptionButton).css("float",""),e._onWinResize(e,t),e.collapsed&&e._collapseDialogContent(!1),e.collapsed||e._enableDisableDragger(!0),e._enableDisableResizer(!0),u=r.position(),s={width:r.width(),height:r.height()},e._trigger("resize",null,{originalPosition:a,originalSize:i,position:u,size:s}),o==="normal"&&e._trigger("stateChanged",null,{originalState:"normal",state:"maximized"})},t.prototype._bindWindowResize=function(){var e=this,t=n(window),r=e.element.attr("id").replace(/-/g,""),i="resize."+r,s="scroll."+r;t.bind(i,function(){e.maximized&&e._onWinResize(e,t)}),n.browser.msie&&n.browser.version==="6.0"&&t.bind(s+" "+i,function(){var t,r,i;e.minimized&&(r=n(document).scrollTop(),i=e.uiDialog.parent(),t=document.documentElement.clientHeight-i.height()+r,i.css("top",t))})},t.prototype._unbindWindowResize=function(){var e=this.element.attr("id").replace(/-/g,"");n(window).unbind("."+e)},t.prototype._saveNormalState=function(){var e=this,t=e.uiDialog,n=e.element;if(e.maximized)return;e.normalState={width:parseFloat(t.css("width")),left:parseFloat(t.css("left")),top:parseFloat(t.css("top")),height:parseFloat(t.css("height")),innerHeight:parseFloat(n.css("height")),innerWidth:parseFloat(n.css("width")),innerMinWidth:parseFloat(n.css("min-width")),innerMinHeight:parseFloat(n.css("min-height"))}},t.prototype._onWinResize=function(e,t){var n=e.uiDialog;n.css({top:t.scrollTop(),left:t.scrollLeft()}),n.setOutWidth(t.width()),n.setOutHeight(t.height()),e.options.width=n.width(),e.options.height=n.height(),e._size(),e.collapsed&&(n.height("auto"),e.contentWrapper.hide())},t.prototype._restoreButton=function(e,t,n){var r=this,i={button:"restore",info:{visible:e,click:r.restore,iconClassOn:this.options.wijCSS.iconNewWin}},s=r._createCaptionButton(i,r.uiDialogTitlebar,!0);e&&(s["insert"+n](t),r.restoreButton=s)},t.prototype._appendToBody=function(e){this.innerFrame?(this.uiDialogTitlebar.prependTo(e),e.show()):e.appendTo(this.options.appendTo)},t.prototype.restore=function(){var e=this,t=e.uiDialog,r=e.options.contentUrl,i={},s={},o,u,a,f=n("<div></div>"),l=n("<div></div>"),c="uiDialog";e.minimized?(e.minimized=!1,e.innerFrame&&(c="copy",e[c]||(c="uiDialog")),a=e[c].position(),i={width:e[c].width(),height:e[c].height()},f.appendTo(e.options.appendTo).css({top:e[c].offset().top,left:e[c].offset().left,height:e[c].innerHeight(),width:e[c].innerWidth(),position:"absolute"}),t.css("position","absolute"),t.css("float",""),e._appendToBody(t),e._enableDisableResizer(!1),e.isPin||e._enableDisableDragger(!1),e._restoreToNormal(),e.contentWrapper.show(),e.uiDialogButtonPane.length&&e.uiDialogButtonPane.show(),l.appendTo(e.options.appendTo).css({top:t.offset().top,left:t.offset().left,height:t.innerHeight(),width:t.innerWidth(),position:"absolute"}),t.hide(),f.effect("transfer",{to:l,className:this.options.wijCSS.content},150,function(){t.show(),o=t.position(),s.width=t.width(),s.height=t.height(),f.remove(),l.remove(),e.copy&&e.copy.remove(),e._trigger("resize",null,{originalPosition:a,originalSize:i,position:o,size:s}),u=e.getState(),e._trigger("stateChanged",null,{originalState:"minimized",state:u})}),e.collapsed&&e._collapseDialogContent(),e._doButtonAction(e.minimizeButton,"show"),e._doButtonAction(e.restoreButton,"remove"),e._doButtonAction(e.pinButton,"show"),e._doButtonAction(e.refreshButton,"show"),e._doButtonAction(e.toggleButton,"show"),n.browser.webkit&&n("."+this.options.wijCSS.wijdialogCaptionButton).css("float",""),typeof r=="string"&&r.length>0&&(e.innerFrame||e._checkUrl(),e.innerFrame.attr("src")!==r&&e.innerFrame.attr("src",r),e.element.css("width",e.normalState.width))):e.maximized&&(e.maximized=!1,a=t.position(),i={width:t.width(),height:t.height()},n(window).unbind(".onWinResize"),e.collapsed&&e._expandDialogContent(),e._enableDisableResizer(!1),e.isPin||e._enableDisableDragger(!1),e._restoreToNormal(),e.contentWrapper.show(),e.collapsed&&e._collapseDialogContent(),e.maximizeButton!==undefined&&(e.maximizeButton.show(),e._restoreButton(!1,e.maximizeButton,"before")),o=t.position(),s={width:t.width(),height:t.height()},e._trigger("resize",null,{originalPosition:a,originalSize:i,position:o,size:s}),u=e.getState(),e._trigger("stateChanged",null,{originalState:"maximized",state:u}))},t.prototype.getState=function(){var e=this;return e.minimized?"minimized":e.maximized?"maximized":"normal"},t.prototype.reset=function(){var e=this;e.getState()==="normal"?e._reset():(e.element.one(this.widgetEventPrefix+"statechanged",function(){e._reset()}),e.restore())},t.prototype._reset=function(){var e=this;e.normalState={},e.initHeight&&e.initWidth&&(e.options.width=e.initWidth,e.options.height=e.initHeight,e._size()),e._setOption("position",e._originalPosition)},t.prototype.open=function(){var t=this,r=t.options;(r.hide==="drop"||r.hide==="bounce")&&n.browser.msie&&t.uiDialog.css("filter","auto"),t.innerFrame?(t._isIE9()?(r.show&&u.indexOf(r.show)>-1&&(r.show=null),window.setTimeout(function(){t.innerFrame.attr("src",r.contentUrl)},200)):t.innerFrame.attr("src",r.contentUrl),t.minimized?(t._setOpener(),t.uiDialogTitlebar.show(),t._isOpen=!0,t._trigger("open")):e.prototype.open.call(this)):t.minimized?(t._setOpener(),t.uiDialog.show(),t._isOpen=!0,t._trigger("open")):(e.prototype.open.call(this),t.uiDialog.wijTriggerVisibility()),t.collapsed&&t._collapseDialogContent(!1,!0),t._isDisabled()&&(t.disabledDiv?t.disabledDiv.show():t._handleDisabledOption(!0))},t.prototype._isDisabled=function(){var e=this.options;return e.disabledState===!0||e.disabled===!0},t.prototype._setOpener=function(){var e=this;!e.opener&&e.document&&e.document[0]&&(e.opener=n(e.document[0].activeElement))},t.prototype._isIE9=function(){return n.browser.msie&&parseInt(n.browser.version)===9},t.prototype.close=function(){var t=this,n=t.options;t.innerFrame&&t._isIE9()&&n.hide&&u.indexOf(n.hide)>-1&&(n.hide=null),e.prototype.close.call(this)},t.prototype._initialCloseOption=function(){var e=this,t=e.options.close;e.options.close=function(n){e._closeDialogHelper(),t&&typeof t=="function"&&t(n)}},t.prototype._closeDialogHelper=function(){var e=this;e.innerFrame&&(e.innerFrame.attr("src",""),e.minimized&&e.uiDialogTitlebar.hide()),e.disabledDiv&&e._isDisabled()&&e.disabledDiv.hide()},t.prototype._restoreToNormal=function(){var e=this,t=e.uiDialog,n=e.element,r=e.normalState;t.css({width:r.width,left:r.left,top:r.top,height:r.height}),n.css({height:r.innerHeight,width:r.innerWidth,"min-width":r.innerMinWidth,"min-height":r.innerMinHeight}),e.options.width=t.width(),e.options.height=t.height()},t.prototype._getLocalizedString=function(e,t){var n=this.options.localization;return n&&n[e]?n[e]:t},t}(i);t.wijdialog=a,n.ui&&n.ui.dialog&&(n.extend(n.ui.dialog.overlay,{create:function(t){this.instances.length===0&&(setTimeout(function(){n.ui.dialog.overlay.instances.length&&n(document).bind(n.ui.dialog.overlay.events,function(e){if(n(e.target).zIndex()<n.ui.dialog.overlay.maxZ&&!n.contains(t.element[0],e.target))return!1})},1),n(document).bind("keydown.dialog-overlay",function(n){var r=e.getKeyCodeEnum();t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===r.ESCAPE&&(t.close(n),n.preventDefault())}),n(window).bind("resize.dialog-overlay",n.ui.dialog.overlay.resize));var r=(this.oldInstances.pop()||n("<div></div>").addClass(t.options.wijCSS.overlay)).appendTo(document.body).css({width:this.width(),height:this.height()});return n.fn.bgiframe&&r.bgiframe(),this.instances.push(r),r},height:function(){var e,t;return n.browser.msie?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),t=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<t?n(window).height()+"px":e+"px"):n(document).height()+"px"},width:function(){var e,t;return n.browser.msie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<t?n(window).width()+"px":e+"px"):n(document).width()+"px"}}),a.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,n.ui.dialog.prototype.options,new s),a.prototype.disable=function(){return this._setOption("disabled",!0)},a.prototype.enable=function(){return this._setOption("disabled",!1)},n.wijmo.registerWidget(r,n.ui.dialog,a.prototype))})(e.dialog||(e.dialog={}));var t=e.dialog})(wijmo||(wijmo={}));