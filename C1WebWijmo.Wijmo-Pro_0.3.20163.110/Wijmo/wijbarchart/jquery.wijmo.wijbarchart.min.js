var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._create=function(){var t=this,n=t.options,r=t._getDefFill(),i;n.horizontal&&(i=n.axis.y.compass||"south",n.axis.y.compass=n.axis.x.compass||"west",n.axis.x.compass=i),$.extend(!0,{compass:"east"},n.hint),t._handleChartStyles(),r=null,e.prototype._create.call(this),t.chartElement.addClass(n.wijCSS.barChart)},n.prototype._setOption=function(t,n){if(t==="horizontal"){var r=this.options.axis;r.x.compass=n?"west":"south",r.y.compass=n?"south":"west"}e.prototype._setOption.call(this,t,n)},n.prototype.destroy=function(){var t=this,n=t.options,r=t.chartElement,i=r.data("fields"),s=i&&i.bars;r.removeClass(n.wijCSS.barChart),e.prototype.destroy.call(this),s&&s.length&&$.each(s,function(e,t){t=null}),r.data("fields",null)},n.prototype._clearChartElement=function(){var t=this,n=t.options,r=t.chartElement.data("fields");e.prototype._clearChartElement.call(this),t.element.removeData("plotInfos"),n.seriesTransition.enabled||r&&r.aniBarsAttr&&(r.aniBarsAttr=null)},n.prototype._isBarChart=function(){return!0},n.prototype.getBar=function(e){var t=this.chartElement,n=t.data("fields");return n.chartElements.bars[e]},n.prototype._paintTooltip=function(){var t=this,n=t.chartElement,r=n.data("fields");e.prototype._paintTooltip.call(this),t.tooltip&&r&&r.trackers&&r.trackers.length&&(t.tooltip.setTargets(r.trackers),t.tooltip.setOptions({relatedElement:r.trackers[0]}))},n.prototype._getTooltipText=function(e,t){var n=$(t.node),r,i;return n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),i={data:r,value:r.value,label:r.label,total:r.total,target:t,fmt:e,x:r.x,y:r.y},$.proxy(e,i)()},n.prototype._preHandleSeriesData=function(){e.prototype._preHandleSeriesData.call(this);var t=this,n=t.options,r=n.seriesList;$.each(r,function(e,n){var r=n.data;r.y&&$.each(r.y,function(e,n){try{t._isDate(n)||(r.y[e]=parseFloat(n))}catch(i){r.y[e]=1}})})},n.prototype._paintPlotArea=function(){var e=this,t=e.options;this.barchartRender=new o(this.chartElement,{annotations:t.annotations,canvas:e.canvas,bounds:e.canvasBounds,hint:t.hint,tooltip:e.tooltip,widgetName:e.widgetName,horizontal:t.horizontal,stacked:t.stacked,axis:t.axis,seriesList:t.seriesList,seriesStyles:t.seriesStyles,seriesHoverStyles:t.seriesHoverStyles,seriesTransition:t.seriesTransition,showChartLabels:t.showChartLabels,textStyle:t.textStyle,chartLabelStyle:t.chartLabelStyle,chartLabelFormatString:t.chartLabelFormatString,chartLabelFormatter:t.chartLabelFormatter,shadow:t.shadow,disabled:e._isDisabled(),clusterOverlap:t.clusterOverlap,clusterWidth:t.clusterWidth,clusterSpacing:t.clusterSpacing,is100Percent:t.is100Percent,clusterRadius:t.clusterRadius,animation:t.animation,culture:e._getCulture(),isYTime:e.axisInfo.y[0].isTime,isXTime:e.axisInfo.x.isTime,mouseDown:$.proxy(e._mouseDown,e),mouseUp:$.proxy(e._mouseUp,e),mouseOver:$.proxy(e._mouseOver,e),mouseOut:$.proxy(e._mouseOut,e),mouseMove:$.proxy(e._mouseMove,e),click:$.proxy(e._click,e),wijCSS:t.wijCSS,widget:this}),this.barchartRender.render()},n.prototype._showSerieEles=function(e){var n=this.options.stacked;if(e.isTrendline){t.TrendlineRender.showSerieEles(e);return}$.each(e,function(e,t){t&&t.bar&&(t.bar.show(),t.bar.shadow&&t.bar.shadow.show(),t.bar.tracker&&t.bar.tracker.show(),$(t.bar.node).data("wijchartDataObj")&&($(t.bar.node).data("wijchartDataObj").visible=!0)),t&&t.dcl&&t.dcl.show(),t&&t.animatedBar&&!t.animatedBar.removed&&t.animatedBar.show()}),n&&this.stackedSeriesObjs&&this._handleStackedVisible(e.length)},n.prototype._hideSerieEles=function(e){var n=this.options.stacked,r=e.length;if(e.isTrendline){t.TrendlineRender.hideSerieEles(e);return}$.each(e,function(e,t){t&&t.bar&&(t.bar.hide(),t.bar.shadow&&t.bar.shadow.hide(),t.bar.tracker&&t.bar.tracker.hide(),$(t.bar.node).data("wijchartDataObj")&&($(t.bar.node).data("wijchartDataObj").visible=!1)),t&&t.dcl&&t.dcl.hide(),t&&t.animatedBar&&!t.animatedBar.removed&&t.animatedBar.hide()}),n&&this.stackedSeriesObjs&&this._handleStackedVisible(e.length)},n.prototype._handleStackedVisible=function(e){function n(e){return $(e.bar.node).data("wijchartDataObj").visible!==!1}function r(e,t,n){e&&(e.bar&&(e.bar.attr("x",t),e.bar.attr("width",n)),e.bar.shadow&&(e.bar.shadow.attr("x",t),e.bar.shadow.attr("width",n)),e.bar.tracker&&(e.bar.tracker.attr("x",t),e.bar.tracker.attr("width",n)))}function i(e,t,n){e&&(e.bar&&(e.bar.attr("y",t),e.bar.attr("height",n)),e.bar.shadow&&(e.bar.shadow.attr("y",t),e.bar.shadow.attr("height",n)),e.bar.tracker&&(e.bar.tracker.attr("y",t),e.bar.tracker.attr("height",n)))}function s(e){if(e){var t=e.rect.x,n=e.rect.width;e.bar&&(e.bar.attr("x",t),e.bar.attr("width",n)),e.bar.shadow&&(e.bar.shadow.attr("x",t),e.bar.shadow.attr("width",n)),e.bar.tracker&&(e.bar.tracker.attr("x",t),e.bar.tracker.attr("width",n))}}function o(e){if(e){var t=e.rect.y,n=e.rect.height;e.bar&&(e.bar.attr("y",t),e.bar.attr("height",n)),e.bar.shadow&&(e.bar.shadow.attr("y",t),e.bar.shadow.attr("height",n)),e.bar.tracker&&(e.bar.tracker.attr("y",t),e.bar.tracker.attr("height",n))}}var t=this;if(this.stackedSeriesObjs){$.each(this.stackedSeriesObjs,function(e,n){t.options.horizontal?s(n):o(n)});var u=[],a=this.stackedSeriesCount;for(var f=0;f<a;f++)u.push(n(this.stackedSeriesObjs[f+"0"]));var l=[],c=-1,h=-1,p=-1;for(var f=u.length-1;f>=0;f--)u[f]&&(p-f>1&&l.push({start:p,end:f+1}),p=f);p>0&&l.push({start:p,end:0}),$.each(l,function(n,s){var o=s.start,u=s.end,a,f,l,c,h,p;for(var d=0;d<e;d++)a=t.stackedSeriesObjs[o+""+d],f=t.stackedSeriesObjs[u+""+d],t.options.horizontal?(l=f.rect.x,h=a.rect.width+a.rect.x-f.rect.x,r(a,l,h)):(l=a.rect.y,h=f.rect.height+f.rect.y-a.rect.y,i(a,l,h))})}},n.prototype._indicatorLineShowing=function(t){e.prototype._indicatorLineShowing.call(this,t),$.each(t,function(e,t){t.bar&&t.bar.attr(t.hoverStyle)})},n.prototype._removeIndicatorStyles=function(e){$.each(e,function(e,t){t.bar&&t.bar.attr(t.style)})},n.prototype._supportStacked=function(){return!0},n.prototype._calculateParameters=function(t,n){e.prototype._calculateParameters.call(this,t,n);if(t.id==="x"){var r=n.unitMinor,i=this._getBarAdjustment(t);i===0?i=r:r<i&&r!==0&&(i=Math.floor(i/r)*r),t.min-=i,t.max+=i,this._calculateMajorMinor(n,t)}},n.prototype._getBarAdjustment=function(e){var t=0,n=this.options,r=e.max,i=e.min,s=n.seriesList,o=0,u=0;for(o=0;o<s.length&&s[o].data.x;o++)u=s[o].data.x.length,t<u&&(t=u);if(t>1){var a=(r-i)/(t-1)*(n.clusterWidth/100);return a*1.25/2}return t===1?(i===0&&r===1&&(i=-1,e.min=i),(r-i)*.0125):0},n}(t.wijchartcore);t.wijbarchart=n;var r=function(e){function t(){e.apply(this,arguments),this.barChart="wijmo-wijbarchart",this.barLabel="wijbarchart-label",this.barElement="wijbarchart",this.barTracker="bartracker"}return __extends(t,e),t}(t.wijchartcore_css);t.wijbarchart_css=r;var i=function(t){function n(){t.apply(this,arguments),this.initSelector=":jqmData(role='wijbarchart')",this.wijCSS=new e.chart.wijbarchart_css,this.horizontal=!0,this.stacked=!1,this.is100Percent=!1,this.clusterOverlap=0,this.clusterWidth=85,this.clusterRadius=0,this.clusterSpacing=0,this.animation={enabled:!0,duration:400,easing:">"},this.seriesTransition={enabled:!0,duration:400,easing:">"},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return __extends(n,t),n}(t.wijchartcore_options);n.prototype.options=$.extend(!0,{},e.wijmoWidget.prototype.options,new i),n.prototype.widgetEventPrefix="wijbarchart",$.wijmo.registerWidget("wijbarchart",n.prototype);var s=function(){function e(e){this.x=e,this.paSpec=[]}return e.prototype.stackValues=function(){var e=this,t=e.paSpec.length,n;t>1&&(n=e.paSpec[0],$.each(e.paSpec,function(e,t){if(e===0)return!0;t.y+=n.y,n=t}))},e}(),o=function(e){function n(t,n){e.call(this,t,n)}return __extends(n,e),n.prototype._init=function(){e.prototype._init.call(this);var n=this.options,r=n.horizontal,i=n.axis.x,s=n.bounds;this.startLocation={x:s.startX,y:s.startY},this.nSeries=n.seriesList.length,this.seriesList=$.arrayClone(n.seriesList),this.seriesStyles=[].concat(n.seriesStyles.slice(0,this.nSeries)),this.seriesHoverStyles=[].concat(n.seriesHoverStyles.slice(0,this.nSeries)),this.xscale=t.ChartUtil.getScaling(r,i.max,i.min,r?this.height:this.width),this.xlate=t.ChartUtil.getTranslation(r,this.startLocation,i.max,i.min,this.xscale),this.aniBarsAttr=this.fields.aniBarsAttr,this.canvas=n.canvas,this.animationSet=this.canvas.set(),this.fieldsAniPathAttr=[],this.paths=[],this.aniPathsAttr=[]},n.prototype._paintShadow=function(e,n,r){this.options.shadow&&t.ChartUtil.paintShadow(e,n,r)},n.prototype.getMinDX=function(e){var t=Number.MAX_VALUE,n=e.length,r,i;n==1&&(t=Math.min(e[0].x-this.options.axis.x.min,this.options.axis.x.max-e[0].x));for(r=1;r<n;r++)i=e[r].x-e[r-1].x,i<t&&i>0&&(t=i);return t===Number.MAX_VALUE?2:t},n.prototype.getChartElementPosition=function(t,n){var r=this,i=r.options,s=i.widget,o=s.options.seriesList,u=o[t];return!u.isTrendline&&i.horizontal&&!i.stacked&&(t=o.length-1-t),e.prototype.getChartElementPosition.call(this,t,n)},n.prototype.getDataPosition=function(e,n){return t.BaseChartRender.calculateDataPosition(e,n,this,this.options.horizontal)},n.prototype.stackValues=function(e){return $.each(e,function(e,t){t.stackValues()}),e},n.prototype.barPointList=function(e,n,r,i){function c(e,t){var n=l(t),r=t.length,i=null,u=0,a=0,f=0,c=!0,h=0,p=!1;n&&(u=n.length),o&&(f=o.length);if(n===undefined)return;$.each(n,function(t,n){c?(c=!1,h=n.x):(h===n.x?p=!0:p=!1,h=n.x);while(a<f&&o[a].x<n.x)a++;a<f?o[a].x!==n.x?(i=new s(n.x),o.splice(a,0,i),f=o.length):i=o[a]:(i=new s(n.x),o.push(i),f=o.length),i.paSpec.push({y:n.y,sIdx:e,pIdx:t,dupl:p})})}var o=[],u=[],a=this,f=a.options.canvas.set(),l=t.ChartUtil.getXSortedPoints;return $.each(e,function(e,s){var o;s.isTrendline?(o=[],t.TrendlineRender.renderSingleTrendLine(s,a.seriesStyles[e],a.seriesHoverStyles[e],a.options.axis,null,a.fieldsAniPathAttr,a.options.animation,a.options.seriesTransition,e,a.options.bounds,a.canvas,a.paths,u,a.animationSet,a.aniPathsAttr,a.options.wijCSS,o,i,a.options.shadow),o.length&&(n[e]=o[0],r.push(o[0].path))):c(e,s)}),o},n.prototype.adjustToLimits=function(e,t,n){return e<t?t:e>n?n:e},n.prototype.transformPoints=function(e,t,n,r,i,s){return $.each(s,function(s,o){var u=o.x,a=o.y,f=0;o.x=t*u+r,o.y=n*a+i,e&&(f=o.x,o.x=o.y,o.y=f)}),s},n.prototype.paintDefaultChartLabel=function(e,n,r,i){var s=this.options,o=s.horizontal,u=s.canvas,a=s.wijCSS,f=s.culture,l=$.extend(!0,{},s.textStyle,s.chartLabelStyle),c=o?{x:e.x+e.width,y:e.y+e.height/2}:{x:e.x+e.width/2,y:e.y},h=s.chartLabelFormatString,p=s.chartLabelFormatter,d,v,m=this.options.widget,g=n.y,y;return i&&(l=$.extend(!0,l,i)),r&&(g=$.fromOADate(g)),y=t.ChartUtil.getChartLabel(h,g,f,{index:n.sIdx,data:{x:n.x,y:n.y},value:n.y,chartLabelFormatter:p}),y.processed?g=y.text:r||(g=$.round(g,2)),v=m._text.call(m,c.x,c.y,g),v.wijAttr(l),$.wijraphael.addClass($(v.node),a.barLabel),d=v.getBBox(),o?v.attr({x:c.x+d.width/2}):v.attr({y:c.y-d.height/2}),v},n.prototype.getSeriesItemPosition=function(e){var t=this.options,n=t.horizontal,r=n?{x:e.x+e.width,y:e.y+e.height/2}:{x:e.x+e.width/2,y:e.y};return{x:r.x,y:r.y}},n.prototype.paintBar=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=this.options,m=v.stacked,g=v.horizontal,y=v.is100Percent,b=r.min,w=r.max,E=i.min,S=i.max,x=r.scale,T=r.late,N=i.scale,C=i.late,k,L,A,O,M=null,_,D=s,P=s["stroke-width"],H=s.stroke,B,j,F,I,q=-1,R=t.y,U;d.origin!==null&&(q=N*d.origin+C);if(m)if(y){c>0&&(e.height=R/c);if(l||l===0)e.y=l/c,e.height-=e.y}else{e.height=R;if(l||l===0)e.height-=l,e.y=l}else if(l||l===0)e.x+=e.width*(1-f),e.height=R-d.origin||0;L=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y+e.height}],A=(b<=L[0].x&&L[0].x<=w||b<=L[1].x&&L[1].x<=w)&&(E<=L[0].y&&L[0].y<=S||E<=L[1].y&&L[1].y<=S),L[0].x=this.adjustToLimits(L[0].x,b,w),L[0].y=this.adjustToLimits(L[0].y,E,S),L[1].x=this.adjustToLimits(L[1].x,b,w),L[1].y=this.adjustToLimits(L[1].y,E,S),L=this.transformPoints(g,x,N,T,C,L),L[0].x>L[1].x&&(k=L[0].x,L[0].x=L[1].x,L[1].x=k),L[0].y>L[1].y&&(k=L[0].y,L[0].y=L[1].y,L[1].y=k),O={x:L[0].x,y:L[0].y,width:L[1].x-L[0].x,height:L[1].y-L[0].y},A&&!m&&(O.width===0&&(O.width=1),O.height===0&&(O.height=1,O.y-=1)),v.showChartLabels&&(M=this.paintDefaultChartLabel(O,t,h,p)),U=this.getSeriesItemPosition(O),_=s.r?s.r:v.clusterRadius,_&&(D=$.extend(!0,{},s,{r:0})),H!=="none"&&P&&(P=parseInt(P,10));if(!P||isNaN(P))P=0;return j=O.width,F=O.height,P>1&&(P--,j=O.width-P,F=O.height-P/2,O.x+=P/2),j<0&&(j=0),F<0&&(F=0),o?(q===-1&&(g?q=a.x+P/2:q=a.y+n-P/2),_?(g?(R>d.origin?B=this.canvas.roundRect(O.x,O.y,j,F,0,0,_,_).hide():B=this.canvas.roundRect(O.x,O.y,j,F,_,_,0,0).hide(),I=this.canvas.rect(q,O.y,O.width,O.height)):(R>d.origin?B=this.canvas.roundRect(O.x,O.y,j,F,_,0,0,_).hide():B=this.canvas.roundRect(O.x,O.y,j,F,0,_,_,0).hide(),I=this.canvas.rect(O.x,q,O.width,O.height)),this._paintShadow(I,u),I.wijAttr(D),I.bar=B):(g?B=this.canvas.rect(q,O.y,O.width,F):B=this.canvas.rect(O.x,q,j,O.height),I=B),M&&(M.attr({opacity:0}),I.chartLabel=M),I.left=O.x,I.top=O.y,I.width=j,I.height=F,I.r=_):_?g?R>d.origin?B=this.canvas.roundRect(O.x,O.y,j,F,0,0,_,_):B=this.canvas.roundRect(O.x,O.y,j,F,_,_,0,0):R>d.origin?B=this.canvas.roundRect(O.x,O.y,j,F,_,0,0,_):B=this.canvas.roundRect(O.x,O.y,j,F,0,_,_,0):B=this.canvas.rect(O.x,O.y,j,F),this._paintShadow(B,u),o&&_&&B.shadow&&B.shadow.hide(),B.wijAttr(s),{rect:O,dcl:M,animatedBar:I,bar:B,annotation:U}},n.prototype.paintClusters=function(e,n,r,i,s,o,u,a,f,l){var c=this,h=c.options,p=h.clusterOverlap/100,d=h.clusterWidth/100,v=1,m=h.clusterSpacing+v,g=e.length,y=h.canvas,b=h.stacked,w=h.horizontal,E=h.axis.y,S=h.widget,x=h.wijCSS,T=h.animation&&h.animation.enabled,N,C,k,L=[],A=[],O=[],M=[],_=[],D=[],P=y.set(),H=[],B,j=0;return f||l?($.each(e,function(e,t){var n=$.extend(!0,{},t);n.data&&n.data.y&&n.data.y.length&&f&&$.each(n.data.y,function(e,t){n.data.y[e]=$.toOADate(t)}),n.data&&n.data.x&&n.data.x.length&&l&&$.each(n.data.x,function(e,t){n.data.x[e]=$.toOADate(t)}),_.push(n)}),N=c.barPointList(_,D,H,w)):N=c.barPointList(e,D,H,w),b&&(N=c.stackValues(N)),C=c.getMinDX(N)*d,$.each(n,function(e,t){t["stroke-width"]&&!isNaN(t["stroke-width"])&&(j!==0?j=Math.min(parseFloat(t["stroke-width"]),j):j=parseFloat(t["stroke-width"]))}),g-=H.length,g>1&&!b&&(p-=N.length*(g-1)*(m+j*2)/(w?u:o),C/=g*(1-p)+p),c.annoPoints={},$.each(N,function(d,m){var g=m.paSpec,y=g.length,N,_,H,j;b?N=C:N=C*(y*(1-p)+p),_={x:m.x-N/2,y:0,width:C,height:g[0].y},$.each(g,function(d,y){if(_.height===undefined)return!0;var N=y.sIdx,C=y.pIdx,F=n[N],I=e[N],q,R=I.yAxis||0,U=E[R]||E,z=s[R]||s;b||(_.y=U.origin||0,_.height-=_.y),M[N]||(M[N]=[]),D[N]||(D[N]=[]),c.yscale=t.ChartUtil.getScaling(!w,U.max,U.min,w?o:u),c.ylate=t.ChartUtil.getTranslation(!w,a,U.max,U.min,c.yscale),z.late=c.ylate,z.scale=c.yscale,j=c.paintBar(_,y,u,i,z,F,T,v,a,p,d>0?g[d-1].y:null,g[g.length-1].y,f,I.textStyle,U),H=j.bar,q=H.clone().attr({opacity:.01,fill:"white","stroke-width":0,"fill-opacity":.01}),I.visible===!1&&(H.hide(),j.dcl&&j.dcl.hide(),q.hide(),H.shadow&&H.shadow.hide()),$.wijraphael.addClass($(H.node),x.canvasObject+" "+x.barElement),B=$.extend(!1,{index:C,bar:H,type:"bar",style:F,hoverStyle:r[N],x:I.data.x[C],y:I.data.y[C],visible:!0},I),l?B.x=$.fromOADate(m.x):typeof I.data.x[C]=="number"&&(B.x=m.x),f?B.y=$.fromOADate(y.y):typeof I.data.y[C]=="number"&&(B.y=y.y),$(H.node).data("wijchartDataObj",B),S.dataPoints=S.dataPoints||{},S.pointXs=S.pointXs||[],h.horizontal?k=$.round(j.rect.y+j.rect.height/2,2):k=$.round(j.rect.x+j.rect.width/2,2),S.dataPoints[k.toString()]||(S.dataPoints[k.toString()]=[],S.pointXs.push(k)),S.dataPoints[k.toString()].push(B),$(q.node).data("owner",$(H.node)),$.wijraphael.addClass($(q.node),x.barElement+" "+x.barTracker),j.bar.tracker=q,P.push(q),A.push(H),j.animatedBar&&O.push(j.animatedBar),j.dcl&&L.push(j.dcl),M[N][C]=j.rect,D[N][C]=j,H=null,q=null,c.annoPoints[N]==null&&(c.annoPoints[N]={}),c.annoPoints[N][C]=j.annotation})}),$.each(L,function(e,t){t.toFront()}),P.toFront(),{bars:A,animatedBars:O,rects:M,chartLabels:L,seriesEles:D,trackers:P,trendLines:H}},n.prototype.processStackedElement=function(e){var t={},n=0;$.each(e,function(e,r){if(!$.isArray(r))return!0;if(r.isTrendline)return!0;$.each(r,function(e,r){r.sIndex=n,r.stackIndex=e,t[n+""+e]=r}),n+=1}),this.options.widget.stackedSeriesObjs=t,this.options.widget.stackedSeriesCount=n},n.prototype.playAnimation=function(e){var n=this,r=n.options,i=r.animation,s=i&&i.enabled,o=r.horizontal,u=r.seriesTransition,a,f,l=[],c,h=r.chartLabelStyle;s&&(a=i.duration||2e3,f=i.easing||"linear",e&&$.each(e,function(e,r){var i;o?(r.wijAttr({width:0}),i={width:r.width,x:r.left}):(r.wijAttr({height:0}),i={height:r.height,y:r.top}),n.aniBarsAttr&&u.enabled&&n.aniBarsAttr.length>e&&(c=t.ChartUtil.getDiffAttrs(n.aniBarsAttr[e],r.attr()),o?(c.x=n.aniBarsAttr[e].x,c.width=n.aniBarsAttr[e].width):(c.y=n.aniBarsAttr[e].y,c.height=n.aniBarsAttr[e].height),c.path&&delete c.path,r.attr(c),a=u.duration,f=u.easing),l.push($.extend(!0,{},r.attr(),i)),r.tracker&&r.tracker.hide(),r.stop().wijAnimate(i,a,f,function(){var e=this,t=e.r,n=e;e.chartLabel&&(h&&h.opacity?e.chartLabel.wijAnimate({opacity:h.opacity},250):e.chartLabel.wijAnimate({opacity:1},250)),e.tracker&&(e.tracker.show(),e.tracker.attr({width:e.width,height:e.height,x:e.attr("x"),y:e.attr("y")})),t&&(n=e.bar,n.show(),n.shadow&&n.shadow.show(),e.shadow&&(e.shadow.wijRemove(),e.shadow=null),e.wijRemove(),e=null)})}),n.aniBarsAttr=l)},n.prototype.playTrendLineAnimation=function(){var e=this,n=e.options,r=n.animation,i=r&&r.enabled,s=n.seriesTransition,o=e.fields.trendLines,u,a;i&&(u=r.duration||2e3,a=r.easing||"linear",o&&o.length&&t.TrendlineRender.playAnimation(i,u,a,s,n.bounds,o,e.fieldsAniPathAttr,n.axis,n.widget.extremeValue))},n.prototype.bindLiveEvents=function(){var e=this.options,n=e.wijCSS,r=e.widgetName,i=e.disabled,s=e.mouseDown,o=e.mouseUp,u=e.mouseOver,a=e.mouseOut,f=e.mouseMove,l=e.click,c=this.element,h=$.isFunction,p="";$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(p="wij"),$("."+n.barElement,c[0]).on(p+"mousedown."+r,function(e){if(i)return;if(h(s)){var t=$(e.target),n;t.data("owner")&&(t=t.data("owner")),n=t.data("wijchartDataObj"),s.call(c,e,n),n=null}}).on(p+"mouseup."+r,function(e){if(i)return;if(h(o)){var t=$(e.target),n;t.data("owner")&&(t=t.data("owner")),n=t.data("wijchartDataObj"),o.call(c,e,n),n=null}}).on(p+"mouseover."+r,function(e){if(i)return;if(h(u)){var t=$(e.target),n,r;t.data("owner")&&(t=t.data("owner")),n=t.data("wijchartDataObj"),r=n.bar,n.hoverStyle?(n.initTransform=r.matrix.toTransformString(),r.wijAttr(n.hoverStyle)):r&&r.wijAttr({opacity:"0.8"}),u.call(c,e,n),n=null}}).on(p+"mouseout."+r,function(e){if(i)return;var t=$(e.target),n,r;t.data("owner")&&(t=t.data("owner")),n=t.data("wijchartDataObj"),r=n.bar,n.hoverStyle?(r.transform(""),r.shadow&&r.shadow.transform(""),r.wijAttr(n.style)):r&&r.wijAttr({opacity:"1"}),h(a)&&a.call(c,e,n),n=null}).on(p+"mousemove."+r,function(e){if(i)return;var t=$(e.target),n,r;t.data("owner")&&(t=t.data("owner")),n=t.data("wijchartDataObj"),r=n.bar,h(f)&&f.call(c,e,n),n=null}).on(p+"click."+r,function(e){if(i)return;if(h(l)){var t=$(e.target),n;t.data("owner")&&(t=t.data("owner")),n=t.data("wijchartDataObj"),l.call(c,e,n)}if($.support.isTouchEnabled&&$.support.isTouchEnabled())return e.preventDefault(),e.stopPropagation(),!1}),t.TrendlineRender.bindLiveEvents(c,r,s,o,u,a,f,l,i,n,!1)},n.prototype.unbindLiveEvents=function(){var e=this.options,n=e.widgetName,r=e.wijCSS,i=this.element;$("."+r.barElement,i[0]).off(n).off("."+n),t.TrendlineRender.unbindLiveEvents(i,n,r)},n.prototype.render=function(){var t=this.options,n=t.horizontal,r=t.stacked,i=this.seriesList,s=this.seriesStyles,o=this.seriesHoverStyles,u=t.axis.x,a=t.axis.y,f=t.isYTime,l=t.isXTime,c;this.unbindLiveEvents(),n&&!r&&(i.reverse(),s.reverse(),o.reverse());if(this.nSeries===0)return;c=this.paintClusters(i,s,o,{min:u.min,max:u.max,late:this.xlate,scale:this.xscale},a,this.width,this.height,this.startLocation,f,l),this.element.data("plotInfos",{xscale:this.xscale,xlate:this.xlate,yscale:this.yscale,ylate:this.ylate,rects:c.rects}),this.fields.trendLines=c.trendLines,this.playAnimation(c.animatedBars),this.playTrendLineAnimation(),this.chartElements.bars=c.bars,this.chartElements.animatedBars=c.animatedBars,this.chartElements.chartLabels=c.chartLabels,this.fields.seriesEles=c.seriesEles,this.fields.trackers=c.trackers,this.fields.chartElements||(this.fields.chartElements={}),n&&!r&&this.fields.seriesEles.reverse(),r&&this.processStackedElement(this.fields.seriesEles),$.extend(!0,this.fields.chartElements,this.chartElements),this.fields.aniBarsAttr=this.aniBarsAttr,this.element.data("fields",this.fields),this.bindLiveEvents(),e.prototype.render.call(this)},n}(t.BaseChartRender);t.BarChartRender=o})(e.chart||(e.chart={}));var t=e.chart})(wijmo||(wijmo={}));