<!doctype html>
<html lang="en">
<head>
    <title>CandlestickChart - Trendline</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="description" content="%description%" />
    <meta name="keywords" content="" />
    <meta name="author" content="ComponentOne" />
    <link href="../../../../Themes/rocket/jquery-wijmo.css" rel="stylesheet" type="text/css" />
    <link href="../../../../css/jquery.wijmo-pro.all.3.20163.110.min.css" rel="stylesheet" type="text/css" />
    <script src="../../js/require.js" type="text/javascript"></script>
    <script src="../../js/require.wijmo.config.js" type="text/javascript"></script>	
    <script id="scriptInit" type="text/javascript">
        var data = [{
            x: new Date("12/1/2011"),
            high: 10,
            low: 7.5,
            open: 8,
            close: 8.6
        }, {
            x: new Date("12/2/2011"),
            high: 12,
            low: 8.6,
            open: 8.6,
            close: 11
        }, {
            x: new Date("12/5/2011"),
            high: 11,
            low: 4.4,
            open: 11,
            close: 6.2
        }, {
            x: new Date("12/6/2011"),
            high: 14,
            low: 4.2,
            open: 6.2,
            close: 13.8
        }, {
            x: new Date("12/7/2011"),
            high: 16,
            low: 8,
            open: 13.8,
            close: 15
        }, {
            x: new Date("12/8/2011"),
            high: 20,
            low: 9,
            open: 15,
            close: 14
        }, {
            x: new Date("12/9/2011"),
            high: 18,
            low: 11,
            open: 14,
            close: 12
        }, {
            x: new Date("12/12/2011"),
            high: 17,
            low: 10,
            open: 12,
            close: 16
        }, {
            x: new Date("12/13/2011"),
            high: 17.5,
            low: 12.2,
            open: 16,
            close: 15
        }, {
            x: new Date("12/14/2011"),
            high: 20,
            low: 12,
            open: 15,
            close: 17
        }, {
            x: new Date("12/15/2011"),
            high: 22,
            low: 16,
            open: 17,
            close: 18
        }, {
            x: new Date("12/16/2011"),
            high: 21,
            low: 15.5,
            open: 18,
            close: 17.2
        }, {
            x: new Date("12/19/2011"),
            high: 22.5,
            low: 16,
            open: 17.2,
            close: 18.5
        }, {
            x: new Date("12/20/2011"),
            high: 20,
            low: 15,
            open: 18.5,
            close: 17.8
        }, {
            x: new Date("12/21/2011"),
            high: 21,
            low: 16,
            open: 17.8,
            close: 18.6
        }, {
            x: new Date("12/22/2011"),
            high: 20.8,
            low: 16.5,
            open: 18.6,
            close: 19.8
        }, {
            x: new Date("12/23/2011"),
            high: 20,
            low: 16,
            open: 19.8,
            close: 18
        }, {
            x: new Date("12/26/2011"),
            high: 19,
            low: 16,
            open: 18,
            close: 16.9
        }, {
            x: new Date("12/27/2011"),
            high: 18,
            low: 15,
            open: 16.9,
            close: 15.6
        }, {
            x: new Date("12/28/2011"),
            high: 17,
            low: 14.5,
            open: 15.6,
            close: 14.7
        }, {
            x: new Date("12/29/2011"),
            high: 16,
            low: 14,
            open: 14.7,
            close: 14.2
        }, {
            x: new Date("12/30/2011"),
            high: 15,
            low: 13.5,
            open: 14.2,
            close: 13.9
        }, {
            x: new Date("1/2/2012"),
            high: 15,
            low: 13,
            open: 13.9,
            close: 13.2
        }, {
            x: new Date("1/3/2012"),
            high: 14,
            low: 12,
            open: 13.2,
            close: 12.8
        }, {
            x: new Date("1/4/2012"),
            high: 13,
            low: 11,
            open: 12.8,
            close: 11.7
        }, {
            x: new Date("1/5/2012"),
            high: 12,
            low: 11,
            open: 11.7,
            close: 11.2
        }, {
            x: new Date("1/6/2012"),
            high: 11.5,
            low: 10,
            open: 11.2,
            close: 10.5
        }, {
            x: new Date("1/9/2012"),
            high: 10.9,
            low: 9,
            open: 10.5,
            close: 9.4
        }, {
            x: new Date("1/10/2012"),
            high: 10,
            low: 8,
            open: 9.4,
            close: 8.9
        }, {
            x: new Date("1/11/2012"),
            high: 9,
            low: 7.5,
            open: 8.9,
            close: 8.4
        }, {
            x: new Date("1/12/2012"),
            high: 9.5,
            low: 7.9,
            open: 8.4,
            close: 8
        }, {
            x: new Date("1/13/2012"),
            high: 10,
            low: 7.5,
            open: 8,
            close: 8.6
        }, {
            x: new Date("1/16/2012"),
            high: 12,
            low: 8.6,
            open: 8.6,
            close: 11
        }, {
            x: new Date("1/17/2012"),
            high: 11,
            low: 4.4,
            open: 11,
            close: 6.2
        }, {
            x: new Date("1/18/2012"),
            high: 14,
            low: 4.2,
            open: 6.2,
            close: 13.8
        }, {
            x: new Date("1/19/2012"),
            high: 16,
            low: 8,
            open: 13.8,
            close: 15
        }, {
            x: new Date("1/20/2012"),
            high: 20,
            low: 9,
            open: 15,
            close: 14
        }, {
            x: new Date("1/23/2012"),
            high: 18,
            low: 11,
            open: 14,
            close: 12
        }, {
            x: new Date("1/24/2012"),
            high: 17,
            low: 10,
            open: 12,
            close: 16
        }, {
            x: new Date("1/25/2012"),
            high: 17.5,
            low: 12.2,
            open: 16,
            close: 15
        }, {
            x: new Date("1/26/2012"),
            high: 20,
            low: 12,
            open: 15,
            close: 17
        }, {
            x: new Date("1/27/2012"),
            high: 22,
            low: 16,
            open: 17,
            close: 18
        }, {
            x: new Date("1/30/2012"),
            high: 21,
            low: 15.5,
            open: 18,
            close: 17.2
        }, {
            x: new Date("1/31/2012"),
            high: 22.5,
            low: 16,
            open: 17.2,
            close: 18.5
        }];
        require(["wijmo.wijcandlestickchart"], function () {
            $(document).ready(function () { 
                $("#wijcandlestickchartDefault").wijcandlestickchart({
                    dataSource: data,
                    header: {
                        text: "Stock History"
                    },
                    legend: {
                        visible: true,
                        compass: "north",
                        orientation: "horizontal"
                    },
                    hint: {
                        content: function () {
                            return this.label + ' - ' +
							Globalize.format(this.x, "d") +
							'\n High:' + this.high +
							'\n Low:' + this.low +
							'\n Open:' + this.open +
							'\n Close:' + this.close;
                        },
                        contentStyle: {
                            "font-size": "12px",
                            "font-family": '"Segoe UI", Frutiger, "Frutiger Linotype", "Dejavu Sans", "Helvetica Neue", Arial, sans-serif'
                        },
                        style: {
                            fill: "#444444",
                            stroke: "none"
                        }
                    },
                    axis: {
                        x: { tickMajor: { position: "inside" } }
                    },
                    seriesList: [{
                        label: "MSFT",
                        legendEntry: true,
                        data: {
                            x: { bind: "x" },
                            high: { bind: "high" },
                            low: { bind: "low" },
                            open: { bind: "open" },
                            close: { bind: "close" }
                        }
                    }, {
                        label: "Trendline for close",
                        legendEntry: true,
                        isTrendline: true,// when adding a trendline, its value should be set to true. Otherwise, it would be considered as other charts.
                        order: 4, //it defines the number of terms in polynom equation
                        data: {
                            x: { bind: "x" },// binding 'x' axis to the 'x' property
                            y: { bind: "close" }// binding 'y' axis to the 'close' property
                        }
                    }],
                    seriesStyles: [
						{
						    highLow: { fill: "rgb(140,140,140)", width: 2 },
						    fallingClose: { fill: "rgb(240,126,110)", width: 6 },
						    risingClose: { fill: "rgb(144,205,151)", width: 6 }
						}
                    ]
                });
            });
        });

        function changeProperties() {
            
            var fitType = $("#selFitType").val(),
                sampleCount = parseInt($("#inpSampleCount").val()),
                order = parseInt($("#inpOrder").val());

            $("#wijcandlestickchartDefault").wijcandlestickchart("option", "seriesList", [{
                label: "MSFT",
                legendEntry: true,
                data: {
                    x: { bind: "x" },
                    high: { bind: "high" },
                    low: { bind: "low" },
                    open: { bind: "open" },
                    close: { bind: "close" }
                }
            }, {
                label: "Trendline for close",
                legendEntry: true,
                isTrendline: true,// when adding a trendline, its value should be set to true. Otherwise, it would be considered as other charts.
                fitType: fitType, //it specifies the fit type of the trendline. There are 11 kinds. Its default value is "polynom".
                sampleCount: sampleCount, // it specifies the sample count for function calculation
                order: order,//it defines the number of terms in polynom equation
                data: {
                    x: { bind: "x" },// binding 'x' axis to the 'x' property
                    y: { bind: "close" }// binding 'y' axis to the 'close' property
                }
            }]);
        }
    </script>
</head>
<body class="demo-single">
    <div class="container">
        <div class="header">
            <h2>
                Overview</h2>
        </div>
        <div class="main demo">
            <!-- Begin demo markup -->
            <div id="wijcandlestickchartDefault" class="ui-widget ui-widget-content ui-corner-all" style="width: 756px; height: 475px;">
            </div>
            <!-- End demo markup -->
            <div class="demo-options">
                <!-- Begin options markup -->
                <label for="selFitType">
                        FitType
                    </label>
                <select id="selFitType">
                    <option value="polynom">polynom</option>
                    <option value="exponent">exponent</option>
                    <option value="logarithmic">logarithmic</option>
                    <option value="power">power</option>
                    <option value="fourier">fourier</option>
                    <option value="minX">minX</option>
                    <option value="minY">minY</option>
                    <option value="maxX">maxX</option>
                    <option value="maxY">maxY</option>
                    <option value="averageX">averageX</option>
                    <option value="averageY">averageY</option>
                </select>
                <label for="inpOrder">
                        Order
                    </label>
                    <input id="inpOrder" type="text" value="4" />
                <label for="inpSampleCount">
                        SampleCount
                    </label>
                    <input id="inpSampleCount" type="text" value="100" />
                <input type="button" value="Apply" onclick="changeProperties()" />
                <!-- End options markup -->
            </div>
        </div>
        <div class="footer demo-description">
            <p>
                This sample shows how to add a trendline in wijcandlestickchart. <br />It also shows how to use <b>fitType</b>, <b>order</b> and <b>sampleCount</b> options to customize the trendline.
            </p>
            <p>
                <b>fitType</b>: It specifies the type of the trendline. There are 11 kinds. You can choose it from the list box above.
                </p> 
            <p><b>sampleCount</b>: It specifies the sample count for function calculation. It works when the fitType is polynom, power, exponent, logarithmic and fourier. It decides the count of the data items for function calculation. It should be set to some integer value greater than 0.</p>
                
                <p><b>order</b>: It defines the number of terms in polynom equation. It should be set to some integer value greater than 1. It works when the fitType is polynom, power, exponent, logarithmic and fourier. When the fitType is power, exponent and logarithmic, its value is fixed to 2 no matter what it is set to.</p>
        </div>
    </div>
</body>
</html>
